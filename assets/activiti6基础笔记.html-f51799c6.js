const t=JSON.parse('{"key":"v-0d25d5a0","path":"/blog/be/activiti/activiti6%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0.html","title":"activiti6笔记","lang":"zh-CN","frontmatter":{"title":"activiti6笔记","date":"2020-01-01T09:02:55.000Z","category":["后端技术","activiti"],"tag":["activiti","工作流"],"description":"first-demo： 步骤：设计流程，配置流程引擎，加载流程文件，启动流程。 数据库表的含义 url driver user password 配置文件 工作流引擎设计的一致原则是：强调流程服务的可嵌入性和可扩展性 jbpm3,jbpm5 activiti5: \\tjBPM3 是一个完整的工作流系统实现，面向开发人员， \\t\\t目的在于简化对组织核心流程进行支撑的软件创建，不支持标准。 \\tjBPM4 引入 PVM，使其拥有更强大的扩展性，同时增加 BPMS 特性， \\t\\t这些特性包括了对 BPMN 的支持、面向业务人员的 Web 建模器和简单统计分析功能的加入。 \\tjBPM5 基于原先的 Drools Flow，支持 BPMN，通过与 Drools 的合并支持 BAM， \\t\\t通过内容仓库增加对流程可视化的支持。由于放弃了 jBPM4 的 PVM，引擎的可扩展性受到损害，并且不再支持 jPDL。 \\tActiviti5 基于 jBPM4，与 Alfresco 的集成增加了其流程可视化与管理能力， \\t\\t同时通过创新的 Activiti Cycle 协作组件支持流程相关人员之间的协调，最后，它加强了集成能力。 ****************************************************************** 第一章 Activiti介绍 \\tBPMN Business Process Modeling Notation 业务流程模型和符号 \\tBPMN 2.0 定义了5个基础的元素类别： \\t\\t流对象 Flow Object :在一个业务流程中，流对象是用于定义行为的图形元素，主要有事件Events、活动Activities、和网关 Gateways 三种流对象 \\t\\t数据 Data :主要有数据对象 Data Objects、数据输入 Data Inputs 、数据输出 Data Outputs 和数据存储 Data Stores 四种元素 \\t\\t连接对象 Connecting Objects :用于连接流对象，顺序流 Sequence Flows、消息流 Message Flows、关联 Associations 和数据关联 Data Associations 四种连接流对象的方式 \\t\\t泳道 Swimlanes :泳道提供了两种途径用于组织基础的模型元素，分别是池 Pools 和道 Lanes \\t\\t制品 Artifacts :制品主要用于为流程提供附加信息，当前制品包括组 Group 和 注释 Text Annotation 第二章 安装运行Activiti \\t开发第一个应用： \\t\\t1.引入jar包 \\t\\t2.写配置文件 activiti的配置文件默认是resource中的activiti.cgf.xml \\t\\t\\t示例： \\t\\t\\t\\t&lt;?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?&gt; \\t\\t\\t\\t&lt;beans xmlns=\\"http://www.springframework.org/schema/beans\\" \\t\\t\\t\\t xmlns:xsi=\\"http://www.w3.org/2001/XMLSchema-instance\\" \\t\\t\\t\\t xsi:schemaLocation=\\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\\"&gt; \\t\\t\\t\\t\\t&lt;!-- 流程引擎配置的bean --&gt; \\t\\t\\t\\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\t\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act?useUnicode=true&amp;amp; characterEncoding=utf8&amp;amp; useSSL=false&amp;amp; serverTimezone=UTC&amp;amp; rewriteBatchedStatements=true\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.cj.jdbc.Driver\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"root\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"true\\" /&gt; \\t\\t\\t\\t\\t&lt;/bean&gt; \\t\\t\\t\\t&lt;/beans&gt; \\t\\t3.创建bpmn文件 \\t\\t4.类文件启动示例： \\t\\t\\t// 创建流程引擎 \\t\\t\\tProcessEngine engine = ProcessEngines.getDefaultProcessEngine(); \\t\\t★//部署层面 \\t\\t\\t// 得到流程存储服务组件，相当于流程仓库，可部署流程，kickstart App \\t\\t\\tRepositoryService repositoryService = engine.getRepositoryService(); \\t\\t\\t \\t\\t★//启动层面 \\t\\t\\t// 得到运行时服务组件，运行服务，启动流程 启动流程 \\t\\t\\tRuntimeService runtimeService = engine.getRuntimeService(); \\t\\t\\t \\t\\t★//流程处理层面 \\t\\t\\t// 获取流程任务组件 流程启动后，使用 \\t\\t\\tTaskService taskService = engine.getTaskService(); \\t\\t\\t// 部署流程文件 \\t\\t\\trepositoryService.createDeployment() \\t\\t\\t\\t\\t.addClasspathResource(\\"bpmn/First.bpmn\\").deploy(); \\t\\t\\t// 启动流程 \\t\\t\\truntimeService.startProcessInstanceByKey(\\"process1\\"); \\t\\t\\t// 查询第一个任务 \\t\\t\\tTask task = taskService.createTaskQuery().singleResult(); \\t\\t\\tSystem.out.println(\\"第一个任务完成前，当前任务名称：\\" + task.getName()); \\t\\t\\t// 完成第一个任务 \\t\\t\\ttaskService.complete(task.getId()); \\t\\t\\t// 查询第二个任务 \\t\\t\\ttask = taskService.createTaskQuery().singleResult(); \\t\\t\\tSystem.out.println(\\"第二个任务完成前，当前任务名称：\\" + task.getName()); \\t\\t\\t// 完成第二个任务（流程结束） \\t\\t\\ttaskService.complete(task.getId()); \\t\\t\\ttask = taskService.createTaskQuery().singleResult(); \\t\\t\\tSystem.out.println(\\"流程结束后，查找任务：\\" + task); \\t\\t\\t// 退出 \\t 第三章 Activiti数据库设计 \\tactiviti流程引擎的数据表分为5大类，各类职责不同，有统一的命名规范 \\t \\t1.通用数据表：只存放通用资源， ACT_GE \\t\\t资源表 ACT_GE_BYTEARRAY \\t\\t\\t保存与流程引擎相关的资源 \\t\\t\\t一般用来保存字符串、流程文件的内容、流程图片内容 \\t\\t属性表 ACT_GE_PROPERTY \\t\\t\\t属性的键值对 \\t2.流程存储表：保存流程定义和部署信息 ACT_RE \\t\\t部署数据表 ACT_RE_DEPLOYMENT \\t\\t\\t保存部署信息 \\t\\t流程定义表 ACT_RE_PROCDEF \\t\\t\\t保存流程文件 .bpmn \\t3.身份数据表：有关身份数据的几张表 ACT_ID \\t\\t用户表 ACT_ID_USER \\t\\t\\t保存用户信息 \\t\\t用户账号（信息）表 ACT_ID_INFO \\t\\t\\tactiviti将用户、用户账号和用户信息分三种数据，用户表保存用户的数据， \\t\\t\\t而其他两个被保存在这个表中 \\t\\t用户组表 ACT_ID_GROUP \\t\\t\\t用户组数据（组名称，组类型） \\t\\t关系表 ACT_ID_MEMBERSHIP \\t\\t\\t保存用户属于哪个组 \\t4.运行时数据表：保存流程在运行过程中所产生的数据，例如流程实例、执行流、任务等 ACT_RU \\t\\t流程实例（执行流）表 ACT_RU_EXECUTION \\t\\t流程任务表 ACT_RU_TASK \\t\\t流程参数表 ACT_RU_VARIABLE \\t\\t流程与身份关系表 ACT_RU_IDENTITYLINK \\t\\t工作数据表 \\t\\t\\tACT_RU_JOB \\t\\t\\tACT_RU_DEADLEFTER_JOB \\t\\t\\tACT_RU_SUSPENDED_JOB \\t\\t\\tACT_RU_TIMER_JOB \\t\\t事件描述表 ACT_RU_EVENT_SUBSCR \\t5.历史数据表：流程引擎的日志表，操作过的流程元素将会被记录到历史表中 ACT_HI \\t\\t流程实例表 ACT_HI_PROCINST \\t\\t流程明细表 ACT_HI_DETAIL \\t\\t历史任务表和历史行为表 ACT_HI_TASKINST \\t\\t附件表和评论表 ACT_HI_ATTACHMENT \\t6.DMN 规则引擎表 \\t\\tactiviti6加入了DMN规范的规则引擎模块 \\t\\t\\t1.决策部署表 ACT_DMN_DEPLOYMENT \\t\\t\\t\\t类似于流程定义部署，每次部署，向部署表中写入部署数据 \\t\\t\\t2.决策表 ACT_DMN_DECISION_TABLE \\t\\t\\t\\t决策类似于流程定义，保存决策模型 \\t\\t\\t3.部署资源表 ACT_DMN_DEPLOYMENT_RESOURCE \\t\\t\\t\\t规则引擎相关的资源，例如决策文件、图片 第四章 Activiti流程引擎配置 \\t1.流程引擎对象 \\t\\tProcessEngineConfiguration对象代表一个Activiti流程引擎的全部配置 \\t\\t\\t该对象的静态方法读取配置文件，生成实例 \\t\\t1. \\t\\t/** \\t\\t * 使用createProcessEngineConfigurationFromResourceDefault方法 \\t\\t * 创建ProcessEngineConfiguration实例 \\t\\t * @author Administrator \\t\\t * \\t\\t */ \\t\\t//使用Activiti默认的方式创建ProcessEngineConfiguration \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResourceDefault();\\t \\t\\t2. \\t\\t/** \\t\\t * 使用CreateProcessEngineConfigurationFromResource方法创建ProcessEngineConfiguration实例 \\t\\t * \\t\\t * @author Administrator \\t\\t * \\t\\t */ \\t\\t// 指定配置文件创建ProcessEngineConfiguration \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"my-activiti1.xml\\"); \\t\\t3. \\t\\t/** \\t\\t * 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration \\t\\t * \\t\\t * @author yangenxiong \\t\\t * \\t\\t */ \\t\\tFile file = new File(\\"resource/input-stream.xml\\"); \\t\\t// 得到文件输入流 \\t\\tInputStream fis = new FileInputStream(file); \\t\\t// 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromInputStream(fis); \\t\\t4. \\t\\t/** \\t\\t * 使用createStandaloneInMemProcessEngineConfiguration创建ProcessEngineConfiguration \\t\\t * \\t\\t * @author yangenxiong \\t\\t * \\t\\t */ \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createStandaloneInMemProcessEngineConfiguration(); \\t\\t// 值为create-drop \\t\\tSystem.out.println(config.getDatabaseSchemaUpdate()); \\t\\t// 值为jdbc:h2:mem:activiti \\t\\tSystem.out.println(config.getJdbcUrl()); \\t\\t5. \\t\\t/** \\t\\t * 使用CreateStandaloneProcessEngineConfiguration方法创建ProcessEngineConfiguration \\t\\t * \\t\\t * @author yangenxiong \\t\\t * \\t\\t */ \\t\\t ProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createStandaloneProcessEngineConfiguration(); \\t\\t// 默认值为 false \\t\\tSystem.out.println(config.getDatabaseSchemaUpdate()); \\t\\t// 默认值为 jdbc:h2:tcp://localhost/~/activiti \\t\\tSystem.out.println(config.getJdbcUrl()); \\t2.数据源配置 \\t3.其他属性配置 \\t\\thistory配置 \\t\\tasyncExecutorActivate配置 \\t\\t邮件服务器配置 \\t示例： \\t\\t************************************************************************************ \\t\\t&lt;!-- 将databaseType设置为oracle --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"create-drop\\"/&gt; \\t\\t\\t&lt;property name=\\"databaseType\\" value=\\"oracle\\"/&gt; \\t\\t&lt;/bean&gt; \\t\\t// 读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"database-type.xml\\"); \\t\\t// 启动Activiti \\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t// 关闭流程引擎 \\t\\tengine.close(); \\t\\t************************************************************************************ \\t\\t&lt;!-- 使用C3P0数据源 --&gt; \\t\\t&lt;bean id=\\"dataSource\\" class=\\"com.mchange.v2.c3p0.ComboPooledDataSource\\"&gt; \\t\\t\\t&lt;property name=\\"driverClass\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"user\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"password\\" value=\\"123456\\" /&gt; \\t\\t&lt;/bean&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"dataSource\\" ref=\\"dataSource\\" /&gt; \\t\\t&lt;/bean&gt; \\t\\t// 读取c3p0-config.xml配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"config/c3p0-config.xml\\"); \\t\\t// 能正常输出，即完成配置 \\t\\tDataSource ds = config.getDataSource(); \\t\\t// 查询数据库元信息，如果能查询则表示连接成功 \\t\\tds.getConnection().getMetaData(); \\t\\t// 结果为 com.mchange.v2.c3p0.ComboPooledDataSource \\t\\tSystem.out.println(config.getDataSource().getClass().getName()); \\t\\t \\t\\t或者 \\t\\t&lt;!-- 不初始化任何属性 --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t&lt;/bean&gt; \\t\\t// 创建C3P0数据源 \\t\\tComboPooledDataSource ds = new ComboPooledDataSource(); \\t\\t// 设置JDBC连接的各个属性 \\t\\tds.setUser(\\"root\\"); \\t\\tds.setPassword(\\"123456\\"); \\t\\tds.setJdbcUrl(\\"jdbc:mysql://localhost:3306/act\\"); \\t\\tds.setDriverClass(\\"com.mysql.jdbc.Driver\\"); \\t\\t// 验证是否连接成功 \\t\\tds.getConnection().getMetaData(); \\t\\t// 读取Activiti配置文件 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"config/c3p0-coding.xml\\"); \\t\\t// 为ProcessEngineConfiguration设置dataSource属性 \\t\\tconfig.setDataSource(ds); \\t\\tSystem.out.println(config.getDataSource()); \\t\\t************************************************************************************ \\t\\t&lt;!-- 将databaseSchemaUpdate设置为false --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"false\\"/&gt; \\t\\t&lt;/bean&gt; \\t\\t//读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"schemaUpdate-false.xml\\"); \\t\\t//启动Activiti \\t\\tconfig.buildProcessEngine(); \\t\\t************************************************************************************ \\t\\t&lt;!-- 将databaseSchemaUpdate设置为true --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"true\\"/&gt; \\t\\t&lt;/bean&gt; \\t\\t//读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"schemaUpdate-true.xml\\"); \\t\\tSystem.out.println(config.getClass().getName()); \\t\\t//启动Activiti \\t\\tconfig.buildProcessEngine(); \\t\\t************************************************************************************ \\t\\t&lt;!-- 将databaseSchemaUpdate设置为create-drop --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"create-drop\\"/&gt; \\t\\t&lt;/bean&gt; \\t\\t// 读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"schemaUpdate-create-drop.xml\\"); \\t\\t// 启动Activiti \\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t// 关闭流程引擎 \\t\\tengine.close(); \\t\\t************************************************************************************ \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"true\\"/&gt; \\t\\t\\t&lt;property name=\\"history\\" value=\\"activity\\"/&gt; activiti/audit/full/none/ \\t\\t&lt;/bean&gt; \\t\\t// 读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"history-activity.xml\\");\\t\\t \\t\\t//初始化流程引擎 \\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t//得到流程存储对象 \\t\\tRepositoryService repositoryService = engine.getRepositoryService(); \\t\\t//部署流程文件 \\t\\trepositoryService.createDeployment().addClasspathResource(\\"bpmn/history.bpmn20.xml\\").deploy(); \\t\\t//得到运行服务对象 \\t\\tRuntimeService runtimeService = engine.getRuntimeService(); \\t\\t//创建参数 \\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\tvars.put(\\"day\\", 10); \\t\\t//开始流程 \\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\"vacationProcess\\", vars); \\t\\tSystem.exit(0); \\t\\t************************************************************************************ \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"mailServerHost\\" value=\\"smtp.163.com\\"&gt;&lt;/property&gt; \\t\\t\\t&lt;property name=\\"mailServerPort\\" value=\\"25\\"&gt;&lt;/property&gt; \\t\\t\\t&lt;property name=\\"mailServerDefaultFrom\\" value=\\"yangenxiong@163.com\\"&gt;&lt;/property&gt; \\t\\t\\t&lt;property name=\\"mailServerUsername\\" value=\\"yangenxiong@163.com\\"&gt;&lt;/property&gt; \\t\\t\\t&lt;property name=\\"mailServerPassword\\" value=\\"123456\\"&gt;&lt;/property&gt; \\t\\t&lt;/bean&gt; \\t\\t************************************************************************************ \\t\\t************************************************************************************ \\t4.ProcessEngineCofiguration bean \\t\\t继承接口ProcessEngineCofiguration或ProcessEngineCofigurationImpl， \\t\\t自定义引擎启动类。 \\t5.Activiti的命令拦截器 \\t\\t未学习 第五章 流程引擎的创建 \\t和汽车发动机启动很像 \\t1.ProcessEngineConfiguration的buildProcessEngine方法创建 \\t先读后配，相当于配置检查 \\t\\t// 读取配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"build_engine.xml\\"); \\t\\t// 创建ProcessEngine \\t\\tProcessEngine engine = config.buildProcessEngine(); \\t2.ProcessEngines对象 \\t\\t调用ProcessEngines的init方法 \\t\\t\\t// 初始化ProcessEngines的Map, \\t\\t\\t// 再加载Activiti默认的配置文件（classpath下的activiti.cfg.xml文件） \\t\\t\\t// 如果与Spring整合，则读取classpath下的activiti-context.xml文件 \\t\\t\\tProcessEngines.init(); \\t\\t\\t// 得到ProcessEngines的Map \\t\\t\\tMap&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); \\t\\t\\tSystem.out.println(engines.size()); \\t\\t\\tSystem.out.println(engines.get(\\"default\\")); \\t\\t注册与注销ProcessEngine实例 \\t\\t\\t//读取自定义配置 \\t\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration. \\t\\t\\t\\t\\tcreateProcessEngineConfigurationFromResource(\\"register.xml\\"); \\t\\t\\t//创建ProcessEngine实例 \\t\\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t\\t//获取ProcessEngine的Map \\t\\t\\tMap&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); \\t\\t\\tSystem.out.println(\\"注册后引擎数：\\" + engines.size()); \\t\\t\\t//注销ProcessEngine实例 \\t\\t\\tProcessEngines.unregister( engine); \\t\\t\\tSystem.out.println(\\"调用unregister后引擎数：\\" + engines.size()); \\t\\t使用ProcessEngines的retry方法 \\t\\t\\t//得到资源文件的URL实例 \\t\\t\\tClassLoader cl = Retry.class.getClassLoader(); \\t\\t\\tURL url = cl.getResource(\\"retry.xml\\"); \\t\\t\\t//调用retry方法创建ProcessEngine实例 \\t\\t\\tProcessEngineInfo info = ProcessEngines.retry(url.toString()); \\t\\t\\t//得到流程实例保存对象 \\t\\t\\tMap&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); \\t\\t\\tSystem.out.println(\\"调用retry方法后引擎数：\\" + engines.size());\\t \\t\\t使用ProcessEngines的destroy方法 \\t\\t\\t// 进行初始化并且返回默认的ProcessEngine实例 \\t\\t\\tProcessEngine engine = ProcessEngines.getDefaultProcessEngine(); \\t\\t\\tSystem.out.println(\\"调用getDefaultProcessEngine方法后引擎数量：\\" \\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size()); \\t\\t\\t// 调用销毁方法 \\t\\t\\tProcessEngines.destroy(); \\t\\t\\t// 最终结果为0 \\t\\t\\tSystem.out.println(\\"调用destroy方法后引擎数量：\\" \\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size()); \\t\\t\\t// 得到资源文件的URL实例 \\t\\t\\tClassLoader cl = Destroy.class.getClassLoader(); \\t\\t\\tURL url = cl.getResource(\\"activiti.cfg.xml\\"); \\t\\t\\t// 调用retry方法创建ProcessEngine实例 \\t\\t\\tProcessEngines.retry(url.toString()); \\t\\t\\tSystem.out.println(\\"只调用 retry方法后引擎数量：\\" \\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size()); \\t\\t\\t// 调用销毁方法，没有效果 \\t\\t\\tProcessEngines.destroy(); \\t\\t\\tSystem.out.println(\\"调用destory无效果，引擎数量：\\" \\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size()); \\t3.ProcessEngine对象 \\t\\t一个ProcessEngine实例代表一个流程引擎，实例中保存着各个服务组件的实例，根据这些服务组件，可以操作流程实例 \\t\\t、任务、系统角色等数据。 \\t\\t1.服务组件： \\t\\t\\t好像J2EE的Service层，通过getXXXService方法得到实例 \\t\\t\\t包含的实例： \\t\\t\\t\\tRespositoryService:提供一系列管理流程定义和流程部署的API \\t\\t\\t\\tRuntimeService:在流程运行时对流程实例进行管理与控制 \\t\\t\\t\\tTaskService:对流程任务进行管理，例如任务提醒、任务完成和创建任务等 \\t\\t\\t\\tIdentityService:提供对流程角色数据进行管理的API，这些角色数据包括用户组、用户及它们之间的关系 \\t\\t\\t\\tManagementService:提供对流程引擎进行管理和维护的服务 \\t\\t\\t\\tHistoryService:对流程的历史数据进行操作，包括查询、删除这些历史数据 \\t\\t\\t\\tDynamicBpmnService:使用该服务，可以不需要重新部署流程模型，就可以实现对流程模型的修改 \\t\\t2.关闭流程引擎： \\t\\t\\tengine.close(); \\t\\t\\t根据配置中databaseSchemeUpdate属性判断是否删除数据库\\t \\t\\t3.流程引擎名称: \\t\\t\\t默认名称时default \\t\\t\\t使用config.setProcessEngineName(\\"test\\"); \\t\\t\\t示例： \\t\\t\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration. \\t\\t\\t\\tcreateProcessEngineConfigurationFromResource(\\"name.xml\\"); \\t\\t\\t\\t//设置流程引擎名称 \\t\\t\\t\\tconfig.setProcessEngineName(\\"test\\"); \\t\\t\\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t\\t\\t//根据名称查询流程引擎 \\t\\t\\t\\tProcessEngine engineTest = ProcessEngines.getProcessEngine(\\"test\\"); \\t\\t\\t\\tSystem.out.println(\\"创建的引擎实例：\\" + engine); \\t\\t\\t\\tSystem.out.println(\\"查询的引擎实例：\\" + engineTest); \\t 第六章 用户组与用户 \\t1.用户组管理： \\t\\t1.Group对象： \\t\\t\\t通过业务层组件去创建 \\t\\t\\tIdentityService \\t\\t2.创建用户组： \\t\\t\\tid,name,type 然后保存， \\t\\t\\t\\t技巧：group.setId(null) 可以让数据库自动生成主键id \\t\\t3.修改用户组： \\t\\t\\tsetter \\t\\t4.删除用户组： \\t\\t\\tdeleteGroup(id) \\t2.Activiti数据查询： \\t\\tActiviti提供了一套数据查询API供开发者使用，可以使用各个服务组件的createXXXQuery方法来获取这些查询对象。 \\t\\t \\t\\t1.查询对象： \\t\\t\\tQuery是多有查询对象的父接口，提供了很多基础的方法： \\t\\t\\t\\tasc\\t设置查询结果的排序方式为升序 \\t\\t\\t\\tcount\\t计算查询结果的数据量 \\t\\t\\t\\tdesc\\t降序 \\t\\t\\t\\tlist\\t封装查询结果，返回相应类型的集合 \\t\\t\\t\\tlistPage\\t分页返回查询结果 \\t\\t\\t\\tsingleResult\\t查询单条符合条件的数据，没有返回null,多条抛出异常 \\t\\t2.list方法： \\t\\t\\t// 使用list方法查询全部的部署数据 \\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery().list(); \\t\\t3.listPage方法： \\t\\t\\t//调用listPage方法，从索引为2的记录开始，查询3条记录 \\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery().listPage(2, 3); \\t\\t4.count方法： \\t\\t\\t// 使用list方法查询全部的部署数据 \\t\\t\\tlong size = identityService.createGroupQuery().count(); \\t\\t5.排序方法： \\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery().orderByGroupName().asc().list(); \\t\\t6.ID排序问题： \\t\\t\\t主键均是字符型，排序要额外处理 \\t\\t7.多字段排序： \\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery() \\t\\t\\t\\t.orderByGroupId().desc() \\t\\t\\t\\t.orderByGroupName().asc().list(); \\t\\t8.singleResult方法 \\t\\t9.用户组数据查询： \\t\\t\\t相应的数据查询对象除了拥有基类的方法，还有自己的方法： \\t\\t\\t// groupId方法 \\t\\t\\tGroup groupA = identityService.createGroupQuery().groupId(aId).singleResult(); \\t\\t\\t \\t\\t\\t// groupName方法 \\t\\t\\tGroup groupB = identityService.createGroupQuery().groupName(\\"GroupB\\").singleResult(); \\t\\t\\t \\t\\t\\t// groupType方法 \\t\\t\\tGroup groupC = identityService.createGroupQuery().groupType(\\"typeC\\").singleResult(); \\t\\t\\t \\t\\t\\t// groupNameLike方法 \\t\\t\\tList&lt;Group&gt; groups = identityService.createGroupQuery().groupNameLike(\\"%group%\\").list(); \\t\\t10.原生SQL查询： \\t\\t\\tcreateNativeGroupQuery() \\t\\t\\tgroups = identityService.createNativeGroupQuery() \\t\\t\\t\\t.sql(\\"select * from ACT_ID_GROUP where NAME_ = #{name}\\") \\t\\t\\t\\t.parameter(\\"name\\", \\"GroupD\\").list(); \\t \\t3.用户管理： \\t\\tUser对象 \\t\\t添加用户 newUser saveUser \\t\\t修改用户 \\t\\t删除用户 \\t\\t验证用户密码 checkPassWord 是用户密码，不是用户的账号密码 \\t\\t用户数据查询 UserQuery对象 \\t\\t设置认证用户 setAuthenticatedUserId 多线程中使用 \\t4.用户信息管理： \\t\\t添加和删除用户信息： \\t\\t\\t用为ACT_ID_INFO数据结构是key-value，没有查询对象,通过id+key可以查到记录 \\t\\t\\tsetUserInfo(String userId,String key,String value) \\t\\t\\tdeleteUserInfo(String userId,String key) \\t\\t\\t示例： \\t\\t\\t\\t// 创建用户 \\t\\t\\t\\tcreatUser(identityService, id, \\"angus\\", \\"young\\", \\"yangenxiong@163.com\\", \\"abc\\"); \\t\\t\\t\\t// 创建一个用户信息 \\t\\t\\t\\tidentityService.setUserInfo(id, \\"age\\", \\"30\\"); \\t\\t\\t\\t// 创建第二个用户信息 \\t\\t\\t\\tidentityService.setUserInfo(id, \\"weight\\", \\"60KG\\"); \\t\\t\\t\\t// 删除用户年龄信息 \\t\\t\\t\\tidentityService.deleteUserInfo(id, \\"age\\"); \\t\\t查询用户信息： \\t\\t\\tgetUserInfo(String userId,String key) \\t\\t设置用户图片： \\t\\t\\tsetUserPicture \\t\\t\\tgetUserPicture \\t\\t\\t先转为byte array，再存储，图片存放再资源表中，用户信息表存的是图片在的资源表的id \\t\\t\\t\\t// 读取图片并转换为byte数组 \\t\\t\\t\\tFileInputStream fis = new FileInputStream(new File(\\"resource/artifact/picture.png\\"));\\t\\t \\t\\t\\t\\tBufferedImage img = ImageIO.read(fis); \\t\\t\\t\\tByteArrayOutputStream output = new ByteArrayOutputStream(); \\t\\t\\t\\tImageIO.write(img, \\"png\\", output); \\t\\t\\t\\t//获取图片的byte数组 \\t\\t\\t\\tbyte[] picArray = output.toByteArray();\\t\\t \\t\\t\\t\\t// 创建Picture实例 \\t\\t\\t\\tPicture picture = new Picture(picArray, \\"angus image\\"); \\t\\t\\t\\t// 为用户设置图片 \\t\\t\\t\\tidentityService.setUserPicture(id, picture);\\t \\t5.用户组和用户的关系： \\t\\t多对多，中间表ACT_ID_MEMBERSHIP \\t\\t绑定关系： \\t\\t\\t// 绑定关系 \\t\\t\\tidentityService.createMembership(user.getId(), group.getId()); \\t\\t接触绑定： \\t\\t\\t// 删除绑定关系 \\t\\t\\tidentityService.deleteMembership(user.getId(), group.getId()); \\t\\t查询用户组下的用户： \\t\\t\\t使用用户的查询对象 memberOfGroup(group.getId()) \\t\\t\\t\\tList&lt;User&gt; users = identityService.createUserQuery() \\t\\t\\t\\t.memberOfGroup(group.getId()).list(); \\t\\t查询用户所属的用户组： \\t\\t\\t使用用户组的查询对象 groupMenber(user.getId()) \\t\\t\\t\\tList&lt;Group&gt; groups = identityService.createGroupQuery() \\t\\t\\t\\t\\t\\t.groupMember(user.getId()).list(); \\t 第七章 流程存储 \\tRepositoryService 主要对Activiti中的流程存储的相关数据进行操作，这些操作包括对流程存储数据的管理、 \\t\\t流程部署以及对流程的基本操作等。 \\t1.流程文件部署： \\t\\tRepositoryService负责对流程文件的部署以及流程定义的管理 \\t\\t \\t\\t1.Deployment对象： \\t\\t\\t只提供getter方法 \\t\\t2.DeploymentBuilder对象： \\t\\t\\tDeploymentBuilder builder = repositoryService.createDeployment(); \\t\\t3.添加输入流资源： \\t\\t\\tbuilder.addInputStream(\\"inputa\\",a) \\t\\t\\t\\t// 第一个资源输入流 \\t\\t\\t\\tInputStream is1 = new FileInputStream(new File( \\t\\t\\t\\t\\t\\t\\"resource/artifact/flow_inputstream1.png\\")); \\t\\t\\t\\t// 第二个资源输入流 \\t\\t\\t\\tInputStream is2 = new FileInputStream(new File( \\t\\t\\t\\t\\t\\t\\"resource/artifact/flow_inputstream1.png\\")); \\t\\t\\t\\t// 创建DeploymentBuilder实例 \\t\\t\\t\\tDeploymentBuilder builder = repositoryService.createDeployment(); \\t\\t\\t\\t// 为DeploymentBuilder添加资源输入流 \\t\\t\\t\\tbuilder.addInputStream(\\"inputA\\", is1); \\t\\t\\t\\tbuilder.addInputStream(\\"inputB\\", is2); \\t\\t\\t\\t// 执行部署方法 \\t\\t\\t\\tbuilder.deploy(); \\t\\t4.添加classpath资源： \\t\\t\\tbuilder.addClasspathResource(\\"artifact/classpath.png\\") \\t\\t\\t\\t//添加classpath下的资源 \\t\\t\\t\\tbuilder.addClasspathResource(\\"artifact/classpath.png\\"); \\t\\t\\t\\t//执行部署（写入到数据库中） \\t\\t\\t\\tbuilder.deploy(); \\t\\t5.添加字符串资源： \\t\\t\\t//添加String资源 \\t\\t\\tbuilder.addString(\\"test\\", \\"this is string method\\"); \\t\\t\\t//执行部署（写入到数据库中） \\t\\t\\tbuilder.deploy(); \\t\\t6.添加压缩包资源： \\t\\t\\t//获取zip文件的输入流 \\t\\t\\tFileInputStream fis = new FileInputStream(new File(\\"resource/artifact/ZipInputStream.zip\\")); \\t\\t\\t//读取zip文件，创建ZipInputStream对象 \\t\\t\\tZipInputStream zi = new ZipInputStream(fis); \\t\\t\\t//添加Zip压缩包资源 \\t\\t\\tbuilder.addZipInputStream(zi); \\t\\t\\t//执行部署（写入到数据库中） \\t\\t\\tbuilder.deploy(); \\t\\t7.添加BPMN模型资源： \\t\\t\\taddBpmnModel \\t\\t\\taddBytes \\t\\t8.修改部署信息： \\t\\t\\t//设置各个属性 \\t\\t\\tbuilder.name(\\"crazyit\\").tenantId(\\"tenanId\\").key(\\"myKey\\").category(\\"myCategory\\"); \\t\\t9.过滤重复部署： \\t\\t\\t重复部署不再写入数据库，若不同，添加方法后，仍会修改数据库 \\t\\t\\tbuilderB.enableDuplicateFiltering(); \\t\\t10.取消部署时的验证： \\t\\t\\t默认情况下，在部署时会对流程的XML文件进行验证，包括验证是否符合BPMN规范、定义的流程是否可执行。 \\t\\t\\t\\tbuilderB.addClasspathResource(\\"bpmn/bpmnError.bpmn\\") \\t\\t\\t\\t.disableBpmnValidation().deploy(); \\t2.流程定义的管理： \\t\\t中止流程定义、激活流程定义和设置流程权限 \\t\\t \\t\\t1.ProcessDefinition对象： \\t\\t\\t有很多getter方法 \\t\\t2.流程部署： \\t\\t\\t将流程的描述文件写入数据库 \\t\\t3.流程图部署： \\t\\t4.流程图自动生成： \\t\\t\\t不自动生成 ，在配置文件中加&lt;property name=\\"createDiagramOnDeploy\\" value=\\"false\\" /&gt; \\t\\t5.中止与激活流程定义： \\t\\t6.流程定义缓存配置： \\t\\t7.自定义缓存 \\t\\t\\t自定义Java类，维护map \\t3.流程定义的权限： \\t\\tactiviti没有拦截检查，完全由开发者定义用户权限，然后根据表来查询 \\t\\t1.设置流程定义的用户权限： \\t\\t\\trepositoryService.addCandidateStarterUser(def.getId(), \\"user1\\"); \\t\\t2.设置流程定义的用户权限： \\t\\t\\trepositoryService.addCandidateStarterGroup(def.getId(), \\"group1\\"); \\t\\t3.IdentityLink对象： \\t\\t\\t对应表 ACT_RU_IDENTITYLINK \\t\\t4.查询权限数据： \\t\\t\\t// 根据用户查询用权限的流程定义 \\t\\t\\tList&lt;ProcessDefinition&gt; defs = repositoryService \\t\\t\\t\\t\\t.createProcessDefinitionQuery().startableByUser(\\"user1\\").list(); \\t\\t\\t// 根据流程定义查询用户组数据 \\t\\t\\tList&lt;Group&gt; groups = identityService.createGroupQuery() \\t\\t\\t\\t\\t.potentialStarter(def.getId()).list(); \\t\\t\\t \\t\\t\\t// 根据流程定义查询用户数据 \\t\\t\\tList&lt;User&gt; users = identityService.createUserQuery() \\t\\t\\t\\t\\t.potentialStarter(def.getId()).list(); \\t\\t\\t \\t\\t\\t// 根据流程定义查询全部的 IdentityLink（ACT_RU_IDENTITYLINK表） 数据 \\t\\t\\tList&lt;IdentityLink&gt; links = repositoryService \\t\\t\\t\\t\\t.getIdentityLinksForProcessDefinition(def.getId());\\t \\t4.RepositoryService数据查询与删除： \\t\\t1.查询部署资源 \\t\\t\\t// 查询资源文件 \\t\\t\\tInputStream is = repositoryService.getResourceAsStream(dep.getId(), \\t\\t\\t\\t\\"artifact/GetResource.txt\\"); \\t\\t\\t// 读取输入流 \\t\\t\\tint count = is.available(); \\t\\t\\tbyte[] contents = new byte[count]; \\t\\t\\tis.read(contents); \\t\\t\\tString result = new String(contents); \\t\\t2.查询流程文件 \\t\\t3.查询流程图 \\t\\t4.查询部署的资源名称 \\t\\t5.删除部署资源 \\t\\t6.DeploymentQuery对象 \\t\\t7.ProcessDefinitionQuery对象 第八章 流程任务管理 \\t1.任务的创建和删除： \\t\\t1.Task接口： \\t\\t\\tACT_RU_TASK \\t\\t2.创建与保存Task实例： \\t\\t\\tnewTask \\t\\t\\tsaveTask \\t\\t3.删除任务： \\t\\t\\t多个删除方法 \\t2.任务权限： \\t\\t1.设置候选用户组 \\t\\t2.设置候选用户 \\t\\t3.权限数据查询 \\t\\t\\t用户组和用户的Query对象没有提供根据任务ID查询用户组和用户的方法 \\t\\t4.设置任务持有人： \\t\\t\\tsetOwner \\t\\t5.设置任务代理人 \\t\\t\\tsetAssignee \\t\\t6.添加任务权限数据 \\t\\t7.删除用户组权限 \\t\\t8.删除用户权限 \\t3.任务参数： \\t\\t参数类型分为流程参数和任务参数 \\t\\t1.基本类型参数设置： \\t\\t\\tsetVariable \\t\\t2.序列化参数： \\t\\t\\t对象必须实现序列化接口 \\t\\t3.获取参数 \\t\\t\\tgetVariable(taskId,argName) \\t\\t4.参数作用域： \\t\\t\\tsetVariableLocal 局部参数 \\t\\t\\tgetVariableLocal \\t\\t5.设置多个参数： \\t\\t\\tsetVariables \\t\\t\\tsetVariablesLocal\\t \\t\\t\\t\\t//初始化参数 \\t\\t\\t\\tMap&lt;String,Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\t\\tvars.put(\\"days\\", 10); \\t\\t\\t\\tvars.put(\\"target\\", \\"欧洲\\"); \\t\\t\\t\\ttaskService.setVariables(task1.getId(), vars); \\t\\t\\t或使用序列化对象 \\t\\t6.数据对象： \\t\\t\\tBPMN文件中的dataObject元素 \\t\\t\\t\\tMap&lt;String, DataObject&gt; objs = taskService.getDataObjects(task.getId()); \\t \\t4.任务附件管理： \\t\\t1.Attachment对象： \\t\\t2.创建任务附件： \\t\\t\\t// 设置任务附件 \\t\\t\\ttaskService.createAttachment(\\"web url\\", task.getId(), pi.getId(), \\"163.com\\", \\t\\t\\t\\t\\t\\"163 web page\\", \\"http://www.163.com\\"); \\t\\t\\t// 创建图片输入流 \\t\\t\\tInputStream is = new FileInputStream(new File(\\"resource/artifact/result.png\\")); \\t\\t\\t// 设置输入流为任务附件 \\t\\t\\ttaskService.createAttachment(\\"web url\\", task.getId(), pi.getId(), \\"163.com\\", \\t\\t\\t\\t\\t\\"163 web page\\", is); \\t\\t3.附件查询： \\t\\t4.删除附件 \\t5.任务评论和事件记录： \\t\\t1.Comment对象: \\t\\t2.新增任务评论 \\t\\t\\taddComment \\t\\t3.事件的记录 \\t\\t4.数据查询 \\t6.任务声明与完成： \\t\\t1.任务声明： \\t\\t\\tclaim \\t\\t2.任务完成： \\t\\t\\tcomplete 第九章 流程控制 \\tTaskService主要用于任务管理，包括任务操作、任务数据管理等 \\tIdentityService主要用于管理流程的身份数据 \\tRepositoryService主要管理流程部署的数据 \\tRuntimeService主要用于管理流程在运行时产生的数据，以及对流程进行操作的API \\t流程运行时产生的数据包括流程参数、事件、流程 实例及执行流等 \\t流程的操作包括启动流程，流程前进等 \\t1.流程实例与执行流： \\t\\t1.流程实例与执行流的概念： \\t\\t\\t启动一个流程时，会创建一个流程实例，每个流程实例至少有一个执行流 \\t\\t2.流程实例和执行流对象 ProcessInstance Execution \\t2.启动流程: \\t\\tRuntimeService提供流程启动的多个方法，命名均为startProcessInstanceByXXX \\t\\t\\tXXX可以是流程定义的ID、Key【流程描述文件中process的id属性】和message \\t\\t1.startProcessInstanceById方法： \\t\\t2.startProcessInstanceByKey方法 \\t\\t3.startProcessInstanceByMessage方法 \\t\\t\\t消息事件 \\t3.流程参数： \\t\\t1.设置与查询流程参数： \\t\\t\\t设置需要传入执行流的ID \\t\\t\\t查询需要传入执行流的ID和参数名称 \\t\\t\\tsetViriable \\t\\t2.流程参数的作用域： \\t\\t\\t局部只作用域执行流 \\t\\t\\tsetViriableLocal \\t\\t3.其他设置参数的方法： \\t\\t\\tsetViriables \\t\\t\\tsetViriablesLocal \\t4.流程操作： \\t\\t启动流程、发送信号、中断流程、激活流程 \\t\\t1.流程触发： \\t\\t\\t对于receiveTask等流程节点，使用trigger方法进行触发，使流程往前进行 \\t\\t2.触发信号事件： \\t\\t\\t事件节点是在流程中记录事件发生的流程元素，BPMN2 规范中主要有两种类型的事件： \\t\\t\\t\\t捕获事件Catching 需要信号才能前进 \\t\\t\\t\\t\\t// 发送信号给事件，流程结束 \\t\\t\\t\\t\\truntimeService.signalEventReceived(\\"testSignal\\"); \\t\\t\\t\\t抛出事件Throwing \\t\\t3.触发消息事件： \\t\\t\\t消息事件节点 \\t\\t\\t\\t// 触发消息事件 \\t\\t\\t\\truntimeService.messageEventReceived(\\"testMsg\\", exe.getId()); \\t\\t4.中断和激活流程： \\t\\t\\tSUSPENSION_STATE_字段保存中断状态，1为活跃，2为中断 \\t\\t\\t\\truntimeService.suspendProcessInstanceById(pi.getId()); \\t\\t\\t\\truntimeService.activateProcessInstanceById(pi.getId()); \\t\\t5.删除流程： \\t\\t\\truntimeService.deleteProcessInstance(pi.getId(), \\"abc\\"); \\t5.流程数据查询： \\t\\t1.执行流查询： \\t\\t2.流程实例查询 \\t\\t\\t 第十章 历史数据管理和流程引擎管理 \\t历史数据： \\t\\tactiviti删除的流程定义、流程任务和流程实例的数据 \\t\\t已经完成的流程实例以及相关数据 \\tManagementService可以查询引擎数据库信息、工作信息，直接对数据库操作 \\t \\t1.历史数据管理： \\t\\t1.历史流程实例查询： \\t\\t\\thistoryService.createHistoricProcessInstanceQuery() \\t\\t2.历史任务查询： \\t\\t\\thistoryService.createHistoricTaskInstanceQuery() \\t\\t3.历史行为查询： \\t\\t\\thistoryService.createHistoricActivityInstanceQuery() \\t\\t4.历史流程明细查询： \\t\\t\\t流程的明细信息包括流程参数和流程表单属性 \\t\\t\\t\\t默认情况下，Activiti不会记录明细，当history配置为full级别时，才会记录 \\t\\t5.删除历史流程实例和历史任务： \\t\\t\\thistoryService.deleteHistoricProcessInstance(pi1.getId()); \\t\\t\\t级联删除实例 \\t2.工作的产生： \\t\\t异步工作时，用工作表保存任务 \\t\\t\\t一般的工作 ACT_RU_JOB \\t\\t\\t定时中断任务 ACT_RU_SUSPENDED_JOB \\t\\t\\t定时任务 ACT_RU_TIMER_JOB \\t\\t1.异步任务产生的工作： \\t\\t\\tJava Service Task主要用于在任务中调用外部的Java 类 \\t\\t2.定义中间事件产生的工作： \\t\\t\\t定义了定时器相关的节点，会在某个定义的时间点上执行。 \\t\\t\\t可以加入定时器的节点： \\t\\t\\t\\t中间事件节点、流程开始事件节点和边界事件节点 \\t\\t3.定义边界事件产生的工作： \\t\\t4.定时开始事件产生的工作 \\t\\t5.流程抛出事件产生的工作 \\t\\t6.暂停工作的产生 \\t\\t7.无法执行的工作 \\t3.工作管理： \\t\\tManagementService提供工作查询对象（对象返回job实例） \\t\\t1.工作查询对象：\\t \\t\\t\\t4个： \\t\\t\\t\\tJobQuery \\t\\t\\t\\tTimerJobQuery \\t\\t\\t\\tSuspendedJobQuery \\t\\t\\t\\tDeadLetterJobQuery \\t\\t2.获取工作异常信息： \\t\\t\\tgetXXXJobExceptionStacktrace \\t\\t3.转移与删除工作： \\t\\t\\tmove \\t\\t\\tdelete \\t4.数据库管理： \\t\\t1.查询引擎属性 \\t\\t2.数据表信息查询 \\t\\t3.数据库操作 \\t\\t4.数据表查询 \\t 第十一章 流程事件 \\t要点： \\t\\tBPMN的事件分类 \\t\\t各种流程的事件定义 \\t\\t开始事件的应用 \\t\\t结束事件的应用 \\t\\t边界事件的应用 \\t\\t中间事件的应用 \\t \\t1.事件分类： \\t\\t1.按照事件的位置分类： \\t\\t\\t开始事件：表示流程开始的事件 \\t\\t\\t结束事件：表示流程结束的事件 \\t\\t\\t中间事件：出现在流程中，单独作为流程节点的事件 \\t\\t\\t边界事件：附属于某个流程节点（如子流程，流程任务）的事件 \\t\\t2.按照事件的特性分类： \\t\\t\\tCatching事件 \\t\\t\\tThrowing事件 \\t\\t\\t\\t开始事件是Catching \\t\\t\\t\\t结束事件是throwing \\t\\t\\t\\t边界时catching \\t\\t\\t\\t中间 都有 \\t2.事件定义： \\t\\t与事件结合 \\t3.开始事件： \\t\\t无指定开始事件 \\t\\t定时器开始事件 \\t\\t消息开始事件 \\t\\t错误开始事件 \\t4.结束事件： \\t\\t无指定结束事件 \\t\\t错误结束事件 \\t\\t取消结束事件 \\t\\t中止结束事件 \\t5.边界事件 \\t\\t定时器 \\t\\t信号 \\t\\t错误 \\t\\t取消 \\t6.中间事件 \\t\\t定时器 捕获 \\t\\t信号 捕获 抛出 \\t\\t消息 抛出\\t \\t7.补偿事件 \\t\\t补偿边界 \\t\\t\\t事务子流程取消触发 \\t\\t\\t补偿中间触发 \\t\\t补偿中间 第十二章 流程任务 \\tBPMN任务概述 \\t用户任务的应用 \\t指定服务任务的行为 \\tWebService任务的应用 \\t脚本任务的应用 \\t任务监听器的使用 \\t流程监听器的使用 \\t1.用户任务： \\t\\t1.分配任务候选人 \\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Task1\\"&gt; \\t\\t\\t\\t&lt;potentialOwner&gt; \\t\\t\\t\\t\\t&lt;resourceAssignmentExpression&gt; \\t\\t\\t\\t\\t\\t&lt;formalExpression&gt;user(angus), group(management), boss \\t\\t\\t\\t\\t\\t&lt;/formalExpression&gt; \\t\\t\\t\\t\\t&lt;/resourceAssignmentExpression&gt; \\t\\t\\t\\t&lt;/potentialOwner&gt; \\t\\t\\t&lt;/userTask&gt; \\t\\t2.分配任务代理人 \\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Task 1\\"&gt; \\t\\t\\t\\t&lt;humanPerformer&gt; \\t\\t\\t\\t\\t&lt;resourceAssignmentExpression&gt; \\t\\t\\t\\t\\t\\t&lt;formalExpression&gt;user1&lt;/formalExpression&gt; \\t\\t\\t\\t\\t&lt;/resourceAssignmentExpression&gt; \\t\\t\\t\\t&lt;/humanPerformer&gt; \\t\\t\\t&lt;/userTask&gt; \\t\\t3.权限分配扩展 \\t\\t\\t使用activiti扩展来分配任务的候选人和代理人 \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Assignee\\" activiti:assignee=\\"user1\\"&gt;&lt;/userTask&gt; \\t\\t\\t\\t&lt;userTask id=\\"usertask2\\" name=\\"Candidate User\\" \\t\\t\\t\\t\\tactiviti:candidateUsers=\\"user1, user2\\"&gt;&lt;/userTask&gt; \\t\\t\\t\\t&lt;userTask id=\\"usertask3\\" name=\\"Candidate Group\\" \\t\\t\\t\\t\\tactiviti:candidateGroups=\\"group1,group2\\"&gt;&lt;/userTask&gt; \\t\\t4.使用任务监听器进行权限分配 \\t\\t\\t设置监听类 \\t\\t\\t\\tpublic class UserTaskListener implements TaskListener { \\t\\t\\t\\t\\tpublic void notify(DelegateTask delegateTask) { \\t\\t\\t\\t\\t\\tSystem.out.println(\\"使用任务监听器设置任务权限\\"); \\t\\t\\t\\t\\t\\tdelegateTask.setAssignee(\\"user1\\"); \\t\\t\\t\\t\\t\\tdelegateTask.addCandidateGroup(\\"group1\\"); \\t\\t\\t\\t\\t\\tdelegateTask.addCandidateUser(\\"user1\\");\\t\\t \\t\\t\\t\\t\\t} \\t\\t\\t\\t} \\t\\t\\t配置监听器 \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Assignee\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:taskListener event=\\"create\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.UserTaskListener\\"&gt;&lt;/activiti:taskListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/userTask&gt; \\t\\t5.使用JUEL分配权限 \\t\\t\\t \\t\\t\\t&lt;userTask id=\\"usertask2\\" name=\\"Task 1\\" activiti:assignee=\\"${authService.getUserAssignee()}\\"&gt;&lt;/userTask&gt; \\t\\t\\t&lt;userTask id=\\"usertask3\\" name=\\"Task 2\\" activiti:candidateUsers=\\"${authService.getCandidateUsers()}\\"&gt;&lt;/userTask&gt; \\t\\t\\t&lt;userTask id=\\"usertask4\\" name=\\"Task 3\\" activiti:candidateGroups=\\"${authService.getCandidateGroups()}\\"&gt;&lt;/userTask&gt; \\t\\t\\t&lt;userTask id=\\"usertask5\\" name=\\"Task 4\\" activiti:assignee=\\"${authService.lastUser}\\"&gt;&lt;/userTask&gt; \\t\\t \\t\\t\\t服务Bean \\t\\t\\tpublic class AuthService implements Serializable { \\t \\t\\t\\t\\tprivate String lastUser = \\"angus\\"; \\t\\t\\t\\t \\t\\t\\t\\tpublic String getLastUser() { \\t\\t\\t\\t\\treturn this.lastUser; \\t\\t\\t\\t} \\t\\t\\t\\t \\t\\t\\t\\tpublic AuthService() { \\t\\t\\t\\t\\tSystem.out.println(\\"create AuthService\\"); \\t\\t\\t\\t} \\t\\t\\t\\t//使用方法为任务指定代理人 \\t\\t\\t\\tpublic String getUserAssignee() { \\t\\t\\t\\t\\treturn \\"crazyit\\"; \\t\\t\\t\\t} \\t\\t\\t\\t \\t\\t\\t\\t//使用方法为任务指定候选人 \\t\\t\\t\\tpublic List&lt;String&gt; getCandidateUsers() { \\t\\t\\t\\t\\tList&lt;String&gt; result = new ArrayList&lt;String&gt;(); \\t\\t\\t\\t\\tresult.add(\\"user1\\"); \\t\\t\\t\\t\\tresult.add(\\"user2\\"); \\t\\t\\t\\t\\treturn result; \\t\\t\\t\\t} \\t\\t\\t\\t \\t\\t\\t\\t//使用方法为任务指定候选用户组 \\t\\t\\t\\tpublic List&lt;String&gt; getCandidateGroups() { \\t\\t\\t\\t\\tList&lt;String&gt; result = new ArrayList&lt;String&gt;(); \\t\\t\\t\\t\\tresult.add(\\"group1\\"); \\t\\t\\t\\t\\tresult.add(\\"group2\\"); \\t\\t\\t\\t\\treturn result; \\t\\t\\t\\t} \\t\\t\\t} \\t\\t\\t添加流程变量 \\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\tvars.put(\\"authService\\", new AuthService()); \\t\\t\\t// 启动流程 \\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\"process1\\", vars); \\t\\t\\t\\t\\t \\t2.服务任务： \\t\\tactiviti:class: JavaDelegate或ActivitiBehavior的实现类 \\t\\tactiviti:delegateExpression \\t\\tactiviti:expression 直接调用bean \\t\\t \\t\\t1.实现JavaDelegate \\t\\t\\t \\t\\t\\tpublic class MyJavaDelegate implements JavaDelegate, Serializable { \\t\\t\\t\\tpublic void execute(DelegateExecution execution) { \\t\\t\\t\\t\\tSystem.out.println(\\" 实现 JavaDelegate 的 JavaSeviceTask: \\" + this); \\t\\t\\t\\t} \\t\\t\\t} \\t\\t\\tactiviti:class方式： \\t\\t\\t\\t&lt;serviceTask id=\\"servicetask1\\" name=\\"Service Task 1\\" \\t\\t\\t\\t\\tactiviti:class=\\"org.crazyit.activiti.MyJavaDelegate\\"&gt;&lt;/serviceTask&gt; \\t\\t\\tactiviti:delegateExpression 方式： \\t\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\t\\tvars.put(\\"myDelegate\\", new MyJavaDelegate()); \\t\\t\\t\\t// 启动流程 \\t\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\"process1\\", vars); \\t\\t\\t\\t&lt;serviceTask id=\\"servicetask1\\" name=\\"Service Task\\" \\t\\t\\t\\t\\tactiviti:delegateExpression=\\"${myDelegate}\\"&gt;&lt;/serviceTask&gt; \\t\\t\\t \\t\\t2.使用普通的JavaBean \\t\\t\\t调用Bean方法和属性 \\t\\t\\tBean类： \\t\\t\\t\\tpublic class MyJavaBean implements Serializable { \\t\\t\\t\\t\\tprivate String name = \\"crazyit\\"; \\t\\t\\t\\t\\t \\t\\t\\t\\t\\tpublic String getName() { \\t\\t\\t\\t\\t\\treturn this.name; \\t\\t\\t\\t\\t} \\t\\t\\t\\t\\t \\t\\t\\t\\t\\tpublic void print(Execution exe) { \\t\\t\\t\\t\\t\\tSystem.out.println(\\"使用Java Bean的print方法：\\" + exe.getId()); \\t\\t\\t\\t\\t} \\t\\t\\t\\t} \\t\\t\\t \\t\\t\\tBPMN： \\t\\t\\t\\t&lt;serviceTask id=\\"servicetask1\\" name=\\"Service Task\\" \\t\\t\\t\\t\\tactiviti:expression=\\"${myBean.print(execution)}\\"&gt;&lt;/serviceTask&gt; \\t\\t\\t\\t&lt;serviceTask id=\\"servicetask2\\" name=\\"Service Task\\" \\t\\t\\t\\t\\tactiviti:expression=\\"${execution.setVariable(\'myName\', myBean.name)}\\"&gt;&lt;/serviceTask&gt; \\t\\t\\t设置参数： \\t\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\t\\tvars.put(\\"myBean\\", new MyJavaBean()); \\t\\t\\t\\t// 启动流程 \\t\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey( \\t\\t\\t\\t\\t\\t\\"process1\\", vars); \\t\\t3.Shell任务： \\t\\t\\t执行cmd命令 \\t \\t3.流程与任务监听器： \\t\\t \\t\\t任务监听器taskListener 设置event =\\"create/complete/assignment\\"表示用户任务创建时调用监听器 \\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"User Task\\"&gt; \\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t&lt;activiti:taskListener event=\\"create\\" \\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.PropertyConfigListener\\" /&gt; \\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t&lt;/userTask&gt; \\t\\t\\t属性注入，往任务监听器中注入属性 \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"User Task\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:taskListener event=\\"create\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.PropertyInjection\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"userName\\" stringValue=\\"crazyit\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:taskListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/userTask&gt; \\t\\t\\t\\t监听器类： \\t\\t\\t\\t\\tpublic class PropertyInjection implements TaskListener { \\t\\t\\t\\t\\t\\tprivate Expression userName; \\t\\t\\t\\t\\t\\t \\t\\t\\t\\t\\t\\tpublic void setUserName(Expression userName) { \\t\\t\\t\\t\\t\\t\\tthis.userName = userName; \\t\\t\\t\\t\\t\\t} \\t\\t\\t\\t\\t\\t \\t\\t\\t\\t\\t\\tpublic void notify(DelegateTask delegateTask) { \\t\\t\\t\\t\\t\\t\\tSystem.out.println(\\"属性注入后的值：\\" + this.userName.getValue(null)); \\t\\t\\t\\t\\t\\t} \\t\\t\\t\\t\\t} \\t\\t \\t\\t流程监听器： \\t\\t\\t&lt;activiti:executionListener event=\\"XXXXX\\" \\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t \\t\\t\\t \\t\\t\\t&lt;process id=\\"process1\\" name=\\"process1\\" isExecutable=\\"true\\"&gt; \\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"end\\" \\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[流程结束]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\" \\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[流程开始]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;startEvent id=\\"startevent1\\" name=\\"Start\\"&gt;&lt;/startEvent&gt; \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Task 1\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"end\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[用户任务结束]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[用户任务开始]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/userTask&gt; \\t\\t\\t\\t&lt;exclusiveGateway id=\\"exclusivegateway1\\" name=\\"Exclusive Gateway\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[网关开始]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/exclusiveGateway&gt; \\t\\t\\t\\t&lt;intermediateThrowEvent id=\\"signalintermediatethrowevent1\\" \\t\\t\\t\\t\\tname=\\"SignalThrowEvent\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"end\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[中间事件结束]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[中间事件开始]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/intermediateThrowEvent&gt; \\t\\t\\t\\t&lt;endEvent id=\\"endevent1\\" name=\\"End\\"&gt;&lt;/endEvent&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow1\\" sourceRef=\\"startevent1\\" \\t\\t\\t\\t\\ttargetRef=\\"exclusivegateway1\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\" stringValue=\\"从开始事件到网关的顺序流\\"/&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt;\\t \\t\\t\\t\\t&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow3\\" sourceRef=\\"usertask1\\" \\t\\t\\t\\t\\ttargetRef=\\"signalintermediatethrowevent1\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow4\\" sourceRef=\\"signalintermediatethrowevent1\\" \\t\\t\\t\\t\\ttargetRef=\\"endevent1\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow5\\" sourceRef=\\"exclusivegateway1\\" \\t\\t\\t\\t\\ttargetRef=\\"usertask1\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t&lt;/process&gt; \\t\\t\\t\\t 第十三章 其他流程元素\\t \\t1.子流程： \\t\\t1.嵌入式子流程 \\t\\t\\t&lt;subProcess id=\\"subprocess1\\" name=\\"Sub Process\\"&gt; \\t\\t\\t\\t&lt;startEvent id=\\"startevent2\\" name=\\"Start\\"&gt;&lt;/startEvent&gt; \\t\\t\\t\\t&lt;serviceTask id=\\"usertask2\\" name=\\"Sub Task\\" \\t\\t\\t\\t\\tactiviti:class=\\"org.crazyit.activiti.EmbededJavaDelegate\\"&gt;&lt;/serviceTask&gt; \\t\\t\\t\\t&lt;endEvent id=\\"endevent1\\" name=\\"End\\"&gt;&lt;/endEvent&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow3\\" sourceRef=\\"startevent2\\" \\t\\t\\t\\t\\ttargetRef=\\"usertask2\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow4\\" sourceRef=\\"usertask2\\" \\t\\t\\t\\t\\ttargetRef=\\"endevent1\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t&lt;/subProcess&gt; \\t\\t \\t\\t \\t\\t \\t\\t2.调用式子流程 \\t\\t\\t&lt;callActivity id=\\"subprocess1\\" name=\\"人事、总监子流程\\" calledElement=\\"SubProcess\\"&gt; \\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t&lt;activiti:in source=\\"days\\" target=\\"newDays\\"&gt;&lt;/activiti:in&gt; \\t\\t\\t\\t\\t&lt;activiti:out source=\\"myDays\\" target=\\"resultDays\\"&gt;&lt;/activiti:out&gt; \\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t&lt;/callActivity&gt; \\t\\t\\t \\t\\t\\t// 部署流程文件 \\t\\t\\trepositoryService \\t\\t\\t\\t\\t.createDeployment() \\t\\t\\t\\t\\t.addClasspathResource( \\t\\t\\t\\t\\t\\t\\t\\"bpmn/CallActivityVariable.bpmn\\") \\t\\t\\t\\t\\t.addClasspathResource(\\"bpmn/SubProcess.bpmn\\") \\t\\t\\t\\t\\t.deploy();\\t\\t \\t\\t3.事件子流程 \\t\\t4.事务子流程 \\t\\t5.特别子流程 \\t\\t\\tbpmn不指定子流程的执行顺序,实际运行时指定运行顺序 \\t\\t\\t&lt;adHocSubProcess id=\\"adhocSubProcess\\" ordering=\\"Sequential\\"&gt; \\t\\t\\t\\t&lt;userTask id=\\"subProcessTask\\" name=\\"Task in subprocess\\" /&gt; \\t\\t\\t\\t&lt;userTask id=\\"subProcessTask2\\" name=\\"Task2 in subprocess\\" /&gt; \\t\\t\\t&lt;/adHocSubProcess&gt; \\t\\t\\t \\t\\t\\t// 查询子流程的执行流 \\t\\t\\tExecution exe = runtimeService.createExecutionQuery() \\t\\t\\t\\t\\t.processInstanceId(pi.getId()).activityId(\\"adhocSubProcess\\") \\t\\t\\t\\t\\t.singleResult(); \\t\\t\\t// 让执行流到达第二个任务 \\t\\t\\truntimeService.executeActivityInAdhocSubProcess(exe.getId(), \\t\\t\\t\\t\\t\\"subProcessTask2\\");\\t \\t\\t\\t \\t\\t\\t// 完成第二个任务 \\t\\t\\tTask subProcessTask2 = taskService.createTaskQuery() \\t\\t\\t\\t\\t.processInstanceId(pi.getId()) \\t\\t\\t\\t\\t.taskDefinitionKey(\\"subProcessTask2\\").singleResult(); \\t\\t\\ttaskService.complete(subProcessTask2.getId()); \\t\\t\\t// 完成特别子流程✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ \\t\\t\\t//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ \\t\\t\\truntimeService.completeAdhocSubProcess(exe.getId()); \\t\\t\\t//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ \\t\\t \\t2.顺序流与网关： \\t\\t顺序流： \\t\\t\\t条件顺序流 \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow4\\" name=\\"小于等于5天\\" sourceRef=\\"exclusivegateway1\\" \\t\\t\\t\\t\\ttargetRef=\\"usertask2\\"&gt; \\t\\t\\t\\t\\t&lt;conditionExpression xsi:type=\\"tFormalExpression\\"&gt; \\t\\t\\t\\t\\t&lt;![CDATA[ \\t\\t\\t\\t\\t${days &lt;= 5} \\t\\t\\t\\t\\t]]&gt; \\t\\t\\t\\t\\t&lt;/conditionExpression&gt; \\t\\t\\t\\t&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow5\\" name=\\"大于5天\\" sourceRef=\\"exclusivegateway1\\" \\t\\t\\t\\t\\ttargetRef=\\"usertask3\\"&gt; \\t\\t\\t\\t\\t&lt;conditionExpression xsi:type=\\"tFormalExpression\\"&gt; \\t\\t\\t\\t\\t&lt;![CDATA[ \\t\\t\\t\\t\\t${days &gt; 5} \\t\\t\\t\\t\\t]]&gt; \\t\\t\\t\\t\\t&lt;/conditionExpression&gt; \\t\\t\\t\\t&lt;/sequenceFlow&gt; \\t\\t\\t\\t执行示例： \\t\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\t\\tvars.put(\\"days\\", 6); \\t\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey( \\t\\t\\t\\t\\"process1\\", vars); \\t\\t\\t默认顺序流 \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"填写请假申请\\" default=\\"flow1\\"&gt;&lt;/userTask&gt; \\t\\t\\t\\t \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow1\\" sourceRef=\\"usertask1\\" targetRef=\\"usertask2\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow2\\" sourceRef=\\"usertask1\\" targetRef=\\"usertask3\\"&gt; \\t\\t\\t\\t\\t&lt;conditionExpression xsi:type=\\"tFormalExpression\\"&gt;&lt;![CDATA[ \\t\\t\\t\\t\\t${days &gt; 5} \\t\\t\\t\\t\\t]]&gt;&lt;/conditionExpression&gt; \\t\\t\\t\\t&lt;/sequenceFlow&gt; \\t\\t\\t\\t \\t\\t流程网关： \\t\\t\\t单向网关 \\t\\t\\t并行网关 \\t\\t\\t兼容网关 \\t\\t\\t事件网关 \\t\\t\\t组合网关（Activiti不支持） \\t\\t\\t单向网关 \\t\\t\\t并行网关： \\t\\t\\t\\t分叉 合并 \\t\\t\\t兼容网关： \\t\\t\\t\\t单向网关和并行网关结合 \\t\\t\\t事件网关： \\t\\t\\t\\t哪个事件先触发，就转向哪一个执行流 \\t\\t\\t\\t事件网关只会选择最先触发的事件所在的分支向前执行 \\t \\t3.流程活动的特性： \\t\\t1.多实例活动 \\t\\t\\t&lt;multiInstanceLoopCharacteristics \\t\\t\\t\\tisSequential=\\"true\\"&gt; \\t\\t\\t\\t&lt;loopCardinality&gt;2&lt;/loopCardinality&gt; \\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt; \\t\\t2.设置循环数据 \\t\\t\\t&lt;multiInstanceLoopCharacteristics \\t\\t\\t\\tisSequential=\\"false\\" activiti:collection=\\"datas1\\"&gt; \\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt; \\t\\t\\t \\t\\t\\tList&lt;String&gt; datas1 = new ArrayList&lt;String&gt;(); \\t\\t\\tdatas1.add(\\"a\\"); \\t\\t\\tdatas1.add(\\"b\\"); \\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\tvars.put(\\"datas1\\", datas1); \\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey( \\t\\t\\t\\t\\"process1\\", vars); \\t\\t3.获取循环元素 \\t\\t\\t&lt;multiInstanceLoopCharacteristics \\t\\t\\t\\tisSequential=\\"true\\" activiti:collection=\\"datas1\\" \\t\\t\\t\\tactiviti:elementVariable=\\"data\\"&gt; \\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt; \\t\\t\\tpublic class ServiceB implements JavaDelegate { \\t\\t\\t\\tpublic void execute(DelegateExecution execution) { \\t\\t\\t\\t \\t\\t\\t\\t\\tSystem.out.println(\\"获取循环参数：\\" + execution.getVariable(\\"data\\")); \\t\\t\\t\\t} \\t\\t\\t} \\t\\t4.循环的内置参数 \\t\\t\\tnrOfInstances:实例总数 \\t\\t\\tnrOfActiveInstances:当前正在执行的实例总数\\t \\t\\t\\tnrOfCompletedInstances:已经完成的实例总数 \\t\\t\\tloopCounter:当前循环的索引 \\t\\t5.循环结束条件 \\t\\t\\t&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt; \\t\\t\\t \\t\\t\\t&lt;multiInstanceLoopCharacteristics \\t\\t\\t\\tisSequential=\\"true\\" activiti:collection=\\"${datas}\\" \\t\\t\\t\\tactiviti:elementVariable=\\"data\\"&gt; \\t\\t\\t\\t&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt; \\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt; 第十四章 Activiti与规则引擎\\t\\t\\t \\t1.Drools介绍与运行 \\t\\t代码与业务规则分离 \\t2.规则语法 \\t\\t全局变量 \\t\\t函数 \\t\\t规则属性 \\t\\t\\tactivation-group 激活组，组内只有一个规则会被激活 \\t\\t\\tsalience 优先级 \\t\\t条件语法 \\t\\t\\twhen then \\t\\t行为语法 \\t\\t\\t修改事实对象 \\t\\t\\tinsert \\t\\t\\tupdate \\t3.Activiti整合Drools \\t\\t&lt;property name=\\"customPostDeployers\\"&gt; \\t\\t\\t&lt;list&gt; \\t\\t\\t\\t&lt;bean class=\\"org.activiti.engine.impl.rules.RulesDeployer\\" /&gt; \\t\\t\\t&lt;/list&gt; \\t\\t&lt;/property&gt;\\t \\t\\t \\t\\t&lt;businessRuleTask id=\\"businessruletask1\\" name=\\"匹配销售规则\\" \\t\\t\\tactiviti:ruleVariablesInput=\\"${member}\\" \\t\\t\\tactiviti:resultVariable=\\"members\\"&gt; &lt;/businessRuleTask&gt; 第十五章 基于DMN的Activiti规则引擎 \\t1.DMN规范 \\t2.规则引擎使用 \\t3.MVEL表达式 第十六章 整合第三方框架 \\t \\t引擎，各种服务，都可以直接注入 第十七章 Rest \\t 第十八章 \\t表单 \\t流程图与XML的转换 \\t回退 \\t会签","head":[["meta",{"property":"og:url","content":"https://alooc.github.io/blog/be/activiti/activiti6%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0.html"}],["meta",{"property":"og:site_name","content":"Alooc"}],["meta",{"property":"og:title","content":"activiti6笔记"}],["meta",{"property":"og:description","content":"first-demo： 步骤：设计流程，配置流程引擎，加载流程文件，启动流程。 数据库表的含义 url driver user password 配置文件 工作流引擎设计的一致原则是：强调流程服务的可嵌入性和可扩展性 jbpm3,jbpm5 activiti5: \\tjBPM3 是一个完整的工作流系统实现，面向开发人员， \\t\\t目的在于简化对组织核心流程进行支撑的软件创建，不支持标准。 \\tjBPM4 引入 PVM，使其拥有更强大的扩展性，同时增加 BPMS 特性， \\t\\t这些特性包括了对 BPMN 的支持、面向业务人员的 Web 建模器和简单统计分析功能的加入。 \\tjBPM5 基于原先的 Drools Flow，支持 BPMN，通过与 Drools 的合并支持 BAM， \\t\\t通过内容仓库增加对流程可视化的支持。由于放弃了 jBPM4 的 PVM，引擎的可扩展性受到损害，并且不再支持 jPDL。 \\tActiviti5 基于 jBPM4，与 Alfresco 的集成增加了其流程可视化与管理能力， \\t\\t同时通过创新的 Activiti Cycle 协作组件支持流程相关人员之间的协调，最后，它加强了集成能力。 ****************************************************************** 第一章 Activiti介绍 \\tBPMN Business Process Modeling Notation 业务流程模型和符号 \\tBPMN 2.0 定义了5个基础的元素类别： \\t\\t流对象 Flow Object :在一个业务流程中，流对象是用于定义行为的图形元素，主要有事件Events、活动Activities、和网关 Gateways 三种流对象 \\t\\t数据 Data :主要有数据对象 Data Objects、数据输入 Data Inputs 、数据输出 Data Outputs 和数据存储 Data Stores 四种元素 \\t\\t连接对象 Connecting Objects :用于连接流对象，顺序流 Sequence Flows、消息流 Message Flows、关联 Associations 和数据关联 Data Associations 四种连接流对象的方式 \\t\\t泳道 Swimlanes :泳道提供了两种途径用于组织基础的模型元素，分别是池 Pools 和道 Lanes \\t\\t制品 Artifacts :制品主要用于为流程提供附加信息，当前制品包括组 Group 和 注释 Text Annotation 第二章 安装运行Activiti \\t开发第一个应用： \\t\\t1.引入jar包 \\t\\t2.写配置文件 activiti的配置文件默认是resource中的activiti.cgf.xml \\t\\t\\t示例： \\t\\t\\t\\t&lt;?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?&gt; \\t\\t\\t\\t&lt;beans xmlns=\\"http://www.springframework.org/schema/beans\\" \\t\\t\\t\\t xmlns:xsi=\\"http://www.w3.org/2001/XMLSchema-instance\\" \\t\\t\\t\\t xsi:schemaLocation=\\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\\"&gt; \\t\\t\\t\\t\\t&lt;!-- 流程引擎配置的bean --&gt; \\t\\t\\t\\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\t\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act?useUnicode=true&amp;amp; characterEncoding=utf8&amp;amp; useSSL=false&amp;amp; serverTimezone=UTC&amp;amp; rewriteBatchedStatements=true\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.cj.jdbc.Driver\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"root\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"true\\" /&gt; \\t\\t\\t\\t\\t&lt;/bean&gt; \\t\\t\\t\\t&lt;/beans&gt; \\t\\t3.创建bpmn文件 \\t\\t4.类文件启动示例： \\t\\t\\t// 创建流程引擎 \\t\\t\\tProcessEngine engine = ProcessEngines.getDefaultProcessEngine(); \\t\\t★//部署层面 \\t\\t\\t// 得到流程存储服务组件，相当于流程仓库，可部署流程，kickstart App \\t\\t\\tRepositoryService repositoryService = engine.getRepositoryService(); \\t\\t\\t \\t\\t★//启动层面 \\t\\t\\t// 得到运行时服务组件，运行服务，启动流程 启动流程 \\t\\t\\tRuntimeService runtimeService = engine.getRuntimeService(); \\t\\t\\t \\t\\t★//流程处理层面 \\t\\t\\t// 获取流程任务组件 流程启动后，使用 \\t\\t\\tTaskService taskService = engine.getTaskService(); \\t\\t\\t// 部署流程文件 \\t\\t\\trepositoryService.createDeployment() \\t\\t\\t\\t\\t.addClasspathResource(\\"bpmn/First.bpmn\\").deploy(); \\t\\t\\t// 启动流程 \\t\\t\\truntimeService.startProcessInstanceByKey(\\"process1\\"); \\t\\t\\t// 查询第一个任务 \\t\\t\\tTask task = taskService.createTaskQuery().singleResult(); \\t\\t\\tSystem.out.println(\\"第一个任务完成前，当前任务名称：\\" + task.getName()); \\t\\t\\t// 完成第一个任务 \\t\\t\\ttaskService.complete(task.getId()); \\t\\t\\t// 查询第二个任务 \\t\\t\\ttask = taskService.createTaskQuery().singleResult(); \\t\\t\\tSystem.out.println(\\"第二个任务完成前，当前任务名称：\\" + task.getName()); \\t\\t\\t// 完成第二个任务（流程结束） \\t\\t\\ttaskService.complete(task.getId()); \\t\\t\\ttask = taskService.createTaskQuery().singleResult(); \\t\\t\\tSystem.out.println(\\"流程结束后，查找任务：\\" + task); \\t\\t\\t// 退出 \\t 第三章 Activiti数据库设计 \\tactiviti流程引擎的数据表分为5大类，各类职责不同，有统一的命名规范 \\t \\t1.通用数据表：只存放通用资源， ACT_GE \\t\\t资源表 ACT_GE_BYTEARRAY \\t\\t\\t保存与流程引擎相关的资源 \\t\\t\\t一般用来保存字符串、流程文件的内容、流程图片内容 \\t\\t属性表 ACT_GE_PROPERTY \\t\\t\\t属性的键值对 \\t2.流程存储表：保存流程定义和部署信息 ACT_RE \\t\\t部署数据表 ACT_RE_DEPLOYMENT \\t\\t\\t保存部署信息 \\t\\t流程定义表 ACT_RE_PROCDEF \\t\\t\\t保存流程文件 .bpmn \\t3.身份数据表：有关身份数据的几张表 ACT_ID \\t\\t用户表 ACT_ID_USER \\t\\t\\t保存用户信息 \\t\\t用户账号（信息）表 ACT_ID_INFO \\t\\t\\tactiviti将用户、用户账号和用户信息分三种数据，用户表保存用户的数据， \\t\\t\\t而其他两个被保存在这个表中 \\t\\t用户组表 ACT_ID_GROUP \\t\\t\\t用户组数据（组名称，组类型） \\t\\t关系表 ACT_ID_MEMBERSHIP \\t\\t\\t保存用户属于哪个组 \\t4.运行时数据表：保存流程在运行过程中所产生的数据，例如流程实例、执行流、任务等 ACT_RU \\t\\t流程实例（执行流）表 ACT_RU_EXECUTION \\t\\t流程任务表 ACT_RU_TASK \\t\\t流程参数表 ACT_RU_VARIABLE \\t\\t流程与身份关系表 ACT_RU_IDENTITYLINK \\t\\t工作数据表 \\t\\t\\tACT_RU_JOB \\t\\t\\tACT_RU_DEADLEFTER_JOB \\t\\t\\tACT_RU_SUSPENDED_JOB \\t\\t\\tACT_RU_TIMER_JOB \\t\\t事件描述表 ACT_RU_EVENT_SUBSCR \\t5.历史数据表：流程引擎的日志表，操作过的流程元素将会被记录到历史表中 ACT_HI \\t\\t流程实例表 ACT_HI_PROCINST \\t\\t流程明细表 ACT_HI_DETAIL \\t\\t历史任务表和历史行为表 ACT_HI_TASKINST \\t\\t附件表和评论表 ACT_HI_ATTACHMENT \\t6.DMN 规则引擎表 \\t\\tactiviti6加入了DMN规范的规则引擎模块 \\t\\t\\t1.决策部署表 ACT_DMN_DEPLOYMENT \\t\\t\\t\\t类似于流程定义部署，每次部署，向部署表中写入部署数据 \\t\\t\\t2.决策表 ACT_DMN_DECISION_TABLE \\t\\t\\t\\t决策类似于流程定义，保存决策模型 \\t\\t\\t3.部署资源表 ACT_DMN_DEPLOYMENT_RESOURCE \\t\\t\\t\\t规则引擎相关的资源，例如决策文件、图片 第四章 Activiti流程引擎配置 \\t1.流程引擎对象 \\t\\tProcessEngineConfiguration对象代表一个Activiti流程引擎的全部配置 \\t\\t\\t该对象的静态方法读取配置文件，生成实例 \\t\\t1. \\t\\t/** \\t\\t * 使用createProcessEngineConfigurationFromResourceDefault方法 \\t\\t * 创建ProcessEngineConfiguration实例 \\t\\t * @author Administrator \\t\\t * \\t\\t */ \\t\\t//使用Activiti默认的方式创建ProcessEngineConfiguration \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResourceDefault();\\t \\t\\t2. \\t\\t/** \\t\\t * 使用CreateProcessEngineConfigurationFromResource方法创建ProcessEngineConfiguration实例 \\t\\t * \\t\\t * @author Administrator \\t\\t * \\t\\t */ \\t\\t// 指定配置文件创建ProcessEngineConfiguration \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"my-activiti1.xml\\"); \\t\\t3. \\t\\t/** \\t\\t * 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration \\t\\t * \\t\\t * @author yangenxiong \\t\\t * \\t\\t */ \\t\\tFile file = new File(\\"resource/input-stream.xml\\"); \\t\\t// 得到文件输入流 \\t\\tInputStream fis = new FileInputStream(file); \\t\\t// 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromInputStream(fis); \\t\\t4. \\t\\t/** \\t\\t * 使用createStandaloneInMemProcessEngineConfiguration创建ProcessEngineConfiguration \\t\\t * \\t\\t * @author yangenxiong \\t\\t * \\t\\t */ \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createStandaloneInMemProcessEngineConfiguration(); \\t\\t// 值为create-drop \\t\\tSystem.out.println(config.getDatabaseSchemaUpdate()); \\t\\t// 值为jdbc:h2:mem:activiti \\t\\tSystem.out.println(config.getJdbcUrl()); \\t\\t5. \\t\\t/** \\t\\t * 使用CreateStandaloneProcessEngineConfiguration方法创建ProcessEngineConfiguration \\t\\t * \\t\\t * @author yangenxiong \\t\\t * \\t\\t */ \\t\\t ProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createStandaloneProcessEngineConfiguration(); \\t\\t// 默认值为 false \\t\\tSystem.out.println(config.getDatabaseSchemaUpdate()); \\t\\t// 默认值为 jdbc:h2:tcp://localhost/~/activiti \\t\\tSystem.out.println(config.getJdbcUrl()); \\t2.数据源配置 \\t3.其他属性配置 \\t\\thistory配置 \\t\\tasyncExecutorActivate配置 \\t\\t邮件服务器配置 \\t示例： \\t\\t************************************************************************************ \\t\\t&lt;!-- 将databaseType设置为oracle --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"create-drop\\"/&gt; \\t\\t\\t&lt;property name=\\"databaseType\\" value=\\"oracle\\"/&gt; \\t\\t&lt;/bean&gt; \\t\\t// 读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"database-type.xml\\"); \\t\\t// 启动Activiti \\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t// 关闭流程引擎 \\t\\tengine.close(); \\t\\t************************************************************************************ \\t\\t&lt;!-- 使用C3P0数据源 --&gt; \\t\\t&lt;bean id=\\"dataSource\\" class=\\"com.mchange.v2.c3p0.ComboPooledDataSource\\"&gt; \\t\\t\\t&lt;property name=\\"driverClass\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"user\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"password\\" value=\\"123456\\" /&gt; \\t\\t&lt;/bean&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"dataSource\\" ref=\\"dataSource\\" /&gt; \\t\\t&lt;/bean&gt; \\t\\t// 读取c3p0-config.xml配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"config/c3p0-config.xml\\"); \\t\\t// 能正常输出，即完成配置 \\t\\tDataSource ds = config.getDataSource(); \\t\\t// 查询数据库元信息，如果能查询则表示连接成功 \\t\\tds.getConnection().getMetaData(); \\t\\t// 结果为 com.mchange.v2.c3p0.ComboPooledDataSource \\t\\tSystem.out.println(config.getDataSource().getClass().getName()); \\t\\t \\t\\t或者 \\t\\t&lt;!-- 不初始化任何属性 --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t&lt;/bean&gt; \\t\\t// 创建C3P0数据源 \\t\\tComboPooledDataSource ds = new ComboPooledDataSource(); \\t\\t// 设置JDBC连接的各个属性 \\t\\tds.setUser(\\"root\\"); \\t\\tds.setPassword(\\"123456\\"); \\t\\tds.setJdbcUrl(\\"jdbc:mysql://localhost:3306/act\\"); \\t\\tds.setDriverClass(\\"com.mysql.jdbc.Driver\\"); \\t\\t// 验证是否连接成功 \\t\\tds.getConnection().getMetaData(); \\t\\t// 读取Activiti配置文件 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"config/c3p0-coding.xml\\"); \\t\\t// 为ProcessEngineConfiguration设置dataSource属性 \\t\\tconfig.setDataSource(ds); \\t\\tSystem.out.println(config.getDataSource()); \\t\\t************************************************************************************ \\t\\t&lt;!-- 将databaseSchemaUpdate设置为false --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"false\\"/&gt; \\t\\t&lt;/bean&gt; \\t\\t//读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"schemaUpdate-false.xml\\"); \\t\\t//启动Activiti \\t\\tconfig.buildProcessEngine(); \\t\\t************************************************************************************ \\t\\t&lt;!-- 将databaseSchemaUpdate设置为true --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"true\\"/&gt; \\t\\t&lt;/bean&gt; \\t\\t//读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"schemaUpdate-true.xml\\"); \\t\\tSystem.out.println(config.getClass().getName()); \\t\\t//启动Activiti \\t\\tconfig.buildProcessEngine(); \\t\\t************************************************************************************ \\t\\t&lt;!-- 将databaseSchemaUpdate设置为create-drop --&gt; \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"create-drop\\"/&gt; \\t\\t&lt;/bean&gt; \\t\\t// 读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"schemaUpdate-create-drop.xml\\"); \\t\\t// 启动Activiti \\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t// 关闭流程引擎 \\t\\tengine.close(); \\t\\t************************************************************************************ \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"true\\"/&gt; \\t\\t\\t&lt;property name=\\"history\\" value=\\"activity\\"/&gt; activiti/audit/full/none/ \\t\\t&lt;/bean&gt; \\t\\t// 读取Activiti配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"history-activity.xml\\");\\t\\t \\t\\t//初始化流程引擎 \\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t//得到流程存储对象 \\t\\tRepositoryService repositoryService = engine.getRepositoryService(); \\t\\t//部署流程文件 \\t\\trepositoryService.createDeployment().addClasspathResource(\\"bpmn/history.bpmn20.xml\\").deploy(); \\t\\t//得到运行服务对象 \\t\\tRuntimeService runtimeService = engine.getRuntimeService(); \\t\\t//创建参数 \\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\tvars.put(\\"day\\", 10); \\t\\t//开始流程 \\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\"vacationProcess\\", vars); \\t\\tSystem.exit(0); \\t\\t************************************************************************************ \\t\\t&lt;bean id=\\"processEngineConfiguration\\" \\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt; \\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt; \\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt; \\t\\t\\t&lt;property name=\\"mailServerHost\\" value=\\"smtp.163.com\\"&gt;&lt;/property&gt; \\t\\t\\t&lt;property name=\\"mailServerPort\\" value=\\"25\\"&gt;&lt;/property&gt; \\t\\t\\t&lt;property name=\\"mailServerDefaultFrom\\" value=\\"yangenxiong@163.com\\"&gt;&lt;/property&gt; \\t\\t\\t&lt;property name=\\"mailServerUsername\\" value=\\"yangenxiong@163.com\\"&gt;&lt;/property&gt; \\t\\t\\t&lt;property name=\\"mailServerPassword\\" value=\\"123456\\"&gt;&lt;/property&gt; \\t\\t&lt;/bean&gt; \\t\\t************************************************************************************ \\t\\t************************************************************************************ \\t4.ProcessEngineCofiguration bean \\t\\t继承接口ProcessEngineCofiguration或ProcessEngineCofigurationImpl， \\t\\t自定义引擎启动类。 \\t5.Activiti的命令拦截器 \\t\\t未学习 第五章 流程引擎的创建 \\t和汽车发动机启动很像 \\t1.ProcessEngineConfiguration的buildProcessEngine方法创建 \\t先读后配，相当于配置检查 \\t\\t// 读取配置 \\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration \\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"build_engine.xml\\"); \\t\\t// 创建ProcessEngine \\t\\tProcessEngine engine = config.buildProcessEngine(); \\t2.ProcessEngines对象 \\t\\t调用ProcessEngines的init方法 \\t\\t\\t// 初始化ProcessEngines的Map, \\t\\t\\t// 再加载Activiti默认的配置文件（classpath下的activiti.cfg.xml文件） \\t\\t\\t// 如果与Spring整合，则读取classpath下的activiti-context.xml文件 \\t\\t\\tProcessEngines.init(); \\t\\t\\t// 得到ProcessEngines的Map \\t\\t\\tMap&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); \\t\\t\\tSystem.out.println(engines.size()); \\t\\t\\tSystem.out.println(engines.get(\\"default\\")); \\t\\t注册与注销ProcessEngine实例 \\t\\t\\t//读取自定义配置 \\t\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration. \\t\\t\\t\\t\\tcreateProcessEngineConfigurationFromResource(\\"register.xml\\"); \\t\\t\\t//创建ProcessEngine实例 \\t\\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t\\t//获取ProcessEngine的Map \\t\\t\\tMap&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); \\t\\t\\tSystem.out.println(\\"注册后引擎数：\\" + engines.size()); \\t\\t\\t//注销ProcessEngine实例 \\t\\t\\tProcessEngines.unregister( engine); \\t\\t\\tSystem.out.println(\\"调用unregister后引擎数：\\" + engines.size()); \\t\\t使用ProcessEngines的retry方法 \\t\\t\\t//得到资源文件的URL实例 \\t\\t\\tClassLoader cl = Retry.class.getClassLoader(); \\t\\t\\tURL url = cl.getResource(\\"retry.xml\\"); \\t\\t\\t//调用retry方法创建ProcessEngine实例 \\t\\t\\tProcessEngineInfo info = ProcessEngines.retry(url.toString()); \\t\\t\\t//得到流程实例保存对象 \\t\\t\\tMap&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); \\t\\t\\tSystem.out.println(\\"调用retry方法后引擎数：\\" + engines.size());\\t \\t\\t使用ProcessEngines的destroy方法 \\t\\t\\t// 进行初始化并且返回默认的ProcessEngine实例 \\t\\t\\tProcessEngine engine = ProcessEngines.getDefaultProcessEngine(); \\t\\t\\tSystem.out.println(\\"调用getDefaultProcessEngine方法后引擎数量：\\" \\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size()); \\t\\t\\t// 调用销毁方法 \\t\\t\\tProcessEngines.destroy(); \\t\\t\\t// 最终结果为0 \\t\\t\\tSystem.out.println(\\"调用destroy方法后引擎数量：\\" \\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size()); \\t\\t\\t// 得到资源文件的URL实例 \\t\\t\\tClassLoader cl = Destroy.class.getClassLoader(); \\t\\t\\tURL url = cl.getResource(\\"activiti.cfg.xml\\"); \\t\\t\\t// 调用retry方法创建ProcessEngine实例 \\t\\t\\tProcessEngines.retry(url.toString()); \\t\\t\\tSystem.out.println(\\"只调用 retry方法后引擎数量：\\" \\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size()); \\t\\t\\t// 调用销毁方法，没有效果 \\t\\t\\tProcessEngines.destroy(); \\t\\t\\tSystem.out.println(\\"调用destory无效果，引擎数量：\\" \\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size()); \\t3.ProcessEngine对象 \\t\\t一个ProcessEngine实例代表一个流程引擎，实例中保存着各个服务组件的实例，根据这些服务组件，可以操作流程实例 \\t\\t、任务、系统角色等数据。 \\t\\t1.服务组件： \\t\\t\\t好像J2EE的Service层，通过getXXXService方法得到实例 \\t\\t\\t包含的实例： \\t\\t\\t\\tRespositoryService:提供一系列管理流程定义和流程部署的API \\t\\t\\t\\tRuntimeService:在流程运行时对流程实例进行管理与控制 \\t\\t\\t\\tTaskService:对流程任务进行管理，例如任务提醒、任务完成和创建任务等 \\t\\t\\t\\tIdentityService:提供对流程角色数据进行管理的API，这些角色数据包括用户组、用户及它们之间的关系 \\t\\t\\t\\tManagementService:提供对流程引擎进行管理和维护的服务 \\t\\t\\t\\tHistoryService:对流程的历史数据进行操作，包括查询、删除这些历史数据 \\t\\t\\t\\tDynamicBpmnService:使用该服务，可以不需要重新部署流程模型，就可以实现对流程模型的修改 \\t\\t2.关闭流程引擎： \\t\\t\\tengine.close(); \\t\\t\\t根据配置中databaseSchemeUpdate属性判断是否删除数据库\\t \\t\\t3.流程引擎名称: \\t\\t\\t默认名称时default \\t\\t\\t使用config.setProcessEngineName(\\"test\\"); \\t\\t\\t示例： \\t\\t\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration. \\t\\t\\t\\tcreateProcessEngineConfigurationFromResource(\\"name.xml\\"); \\t\\t\\t\\t//设置流程引擎名称 \\t\\t\\t\\tconfig.setProcessEngineName(\\"test\\"); \\t\\t\\t\\tProcessEngine engine = config.buildProcessEngine(); \\t\\t\\t\\t//根据名称查询流程引擎 \\t\\t\\t\\tProcessEngine engineTest = ProcessEngines.getProcessEngine(\\"test\\"); \\t\\t\\t\\tSystem.out.println(\\"创建的引擎实例：\\" + engine); \\t\\t\\t\\tSystem.out.println(\\"查询的引擎实例：\\" + engineTest); \\t 第六章 用户组与用户 \\t1.用户组管理： \\t\\t1.Group对象： \\t\\t\\t通过业务层组件去创建 \\t\\t\\tIdentityService \\t\\t2.创建用户组： \\t\\t\\tid,name,type 然后保存， \\t\\t\\t\\t技巧：group.setId(null) 可以让数据库自动生成主键id \\t\\t3.修改用户组： \\t\\t\\tsetter \\t\\t4.删除用户组： \\t\\t\\tdeleteGroup(id) \\t2.Activiti数据查询： \\t\\tActiviti提供了一套数据查询API供开发者使用，可以使用各个服务组件的createXXXQuery方法来获取这些查询对象。 \\t\\t \\t\\t1.查询对象： \\t\\t\\tQuery是多有查询对象的父接口，提供了很多基础的方法： \\t\\t\\t\\tasc\\t设置查询结果的排序方式为升序 \\t\\t\\t\\tcount\\t计算查询结果的数据量 \\t\\t\\t\\tdesc\\t降序 \\t\\t\\t\\tlist\\t封装查询结果，返回相应类型的集合 \\t\\t\\t\\tlistPage\\t分页返回查询结果 \\t\\t\\t\\tsingleResult\\t查询单条符合条件的数据，没有返回null,多条抛出异常 \\t\\t2.list方法： \\t\\t\\t// 使用list方法查询全部的部署数据 \\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery().list(); \\t\\t3.listPage方法： \\t\\t\\t//调用listPage方法，从索引为2的记录开始，查询3条记录 \\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery().listPage(2, 3); \\t\\t4.count方法： \\t\\t\\t// 使用list方法查询全部的部署数据 \\t\\t\\tlong size = identityService.createGroupQuery().count(); \\t\\t5.排序方法： \\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery().orderByGroupName().asc().list(); \\t\\t6.ID排序问题： \\t\\t\\t主键均是字符型，排序要额外处理 \\t\\t7.多字段排序： \\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery() \\t\\t\\t\\t.orderByGroupId().desc() \\t\\t\\t\\t.orderByGroupName().asc().list(); \\t\\t8.singleResult方法 \\t\\t9.用户组数据查询： \\t\\t\\t相应的数据查询对象除了拥有基类的方法，还有自己的方法： \\t\\t\\t// groupId方法 \\t\\t\\tGroup groupA = identityService.createGroupQuery().groupId(aId).singleResult(); \\t\\t\\t \\t\\t\\t// groupName方法 \\t\\t\\tGroup groupB = identityService.createGroupQuery().groupName(\\"GroupB\\").singleResult(); \\t\\t\\t \\t\\t\\t// groupType方法 \\t\\t\\tGroup groupC = identityService.createGroupQuery().groupType(\\"typeC\\").singleResult(); \\t\\t\\t \\t\\t\\t// groupNameLike方法 \\t\\t\\tList&lt;Group&gt; groups = identityService.createGroupQuery().groupNameLike(\\"%group%\\").list(); \\t\\t10.原生SQL查询： \\t\\t\\tcreateNativeGroupQuery() \\t\\t\\tgroups = identityService.createNativeGroupQuery() \\t\\t\\t\\t.sql(\\"select * from ACT_ID_GROUP where NAME_ = #{name}\\") \\t\\t\\t\\t.parameter(\\"name\\", \\"GroupD\\").list(); \\t \\t3.用户管理： \\t\\tUser对象 \\t\\t添加用户 newUser saveUser \\t\\t修改用户 \\t\\t删除用户 \\t\\t验证用户密码 checkPassWord 是用户密码，不是用户的账号密码 \\t\\t用户数据查询 UserQuery对象 \\t\\t设置认证用户 setAuthenticatedUserId 多线程中使用 \\t4.用户信息管理： \\t\\t添加和删除用户信息： \\t\\t\\t用为ACT_ID_INFO数据结构是key-value，没有查询对象,通过id+key可以查到记录 \\t\\t\\tsetUserInfo(String userId,String key,String value) \\t\\t\\tdeleteUserInfo(String userId,String key) \\t\\t\\t示例： \\t\\t\\t\\t// 创建用户 \\t\\t\\t\\tcreatUser(identityService, id, \\"angus\\", \\"young\\", \\"yangenxiong@163.com\\", \\"abc\\"); \\t\\t\\t\\t// 创建一个用户信息 \\t\\t\\t\\tidentityService.setUserInfo(id, \\"age\\", \\"30\\"); \\t\\t\\t\\t// 创建第二个用户信息 \\t\\t\\t\\tidentityService.setUserInfo(id, \\"weight\\", \\"60KG\\"); \\t\\t\\t\\t// 删除用户年龄信息 \\t\\t\\t\\tidentityService.deleteUserInfo(id, \\"age\\"); \\t\\t查询用户信息： \\t\\t\\tgetUserInfo(String userId,String key) \\t\\t设置用户图片： \\t\\t\\tsetUserPicture \\t\\t\\tgetUserPicture \\t\\t\\t先转为byte array，再存储，图片存放再资源表中，用户信息表存的是图片在的资源表的id \\t\\t\\t\\t// 读取图片并转换为byte数组 \\t\\t\\t\\tFileInputStream fis = new FileInputStream(new File(\\"resource/artifact/picture.png\\"));\\t\\t \\t\\t\\t\\tBufferedImage img = ImageIO.read(fis); \\t\\t\\t\\tByteArrayOutputStream output = new ByteArrayOutputStream(); \\t\\t\\t\\tImageIO.write(img, \\"png\\", output); \\t\\t\\t\\t//获取图片的byte数组 \\t\\t\\t\\tbyte[] picArray = output.toByteArray();\\t\\t \\t\\t\\t\\t// 创建Picture实例 \\t\\t\\t\\tPicture picture = new Picture(picArray, \\"angus image\\"); \\t\\t\\t\\t// 为用户设置图片 \\t\\t\\t\\tidentityService.setUserPicture(id, picture);\\t \\t5.用户组和用户的关系： \\t\\t多对多，中间表ACT_ID_MEMBERSHIP \\t\\t绑定关系： \\t\\t\\t// 绑定关系 \\t\\t\\tidentityService.createMembership(user.getId(), group.getId()); \\t\\t接触绑定： \\t\\t\\t// 删除绑定关系 \\t\\t\\tidentityService.deleteMembership(user.getId(), group.getId()); \\t\\t查询用户组下的用户： \\t\\t\\t使用用户的查询对象 memberOfGroup(group.getId()) \\t\\t\\t\\tList&lt;User&gt; users = identityService.createUserQuery() \\t\\t\\t\\t.memberOfGroup(group.getId()).list(); \\t\\t查询用户所属的用户组： \\t\\t\\t使用用户组的查询对象 groupMenber(user.getId()) \\t\\t\\t\\tList&lt;Group&gt; groups = identityService.createGroupQuery() \\t\\t\\t\\t\\t\\t.groupMember(user.getId()).list(); \\t 第七章 流程存储 \\tRepositoryService 主要对Activiti中的流程存储的相关数据进行操作，这些操作包括对流程存储数据的管理、 \\t\\t流程部署以及对流程的基本操作等。 \\t1.流程文件部署： \\t\\tRepositoryService负责对流程文件的部署以及流程定义的管理 \\t\\t \\t\\t1.Deployment对象： \\t\\t\\t只提供getter方法 \\t\\t2.DeploymentBuilder对象： \\t\\t\\tDeploymentBuilder builder = repositoryService.createDeployment(); \\t\\t3.添加输入流资源： \\t\\t\\tbuilder.addInputStream(\\"inputa\\",a) \\t\\t\\t\\t// 第一个资源输入流 \\t\\t\\t\\tInputStream is1 = new FileInputStream(new File( \\t\\t\\t\\t\\t\\t\\"resource/artifact/flow_inputstream1.png\\")); \\t\\t\\t\\t// 第二个资源输入流 \\t\\t\\t\\tInputStream is2 = new FileInputStream(new File( \\t\\t\\t\\t\\t\\t\\"resource/artifact/flow_inputstream1.png\\")); \\t\\t\\t\\t// 创建DeploymentBuilder实例 \\t\\t\\t\\tDeploymentBuilder builder = repositoryService.createDeployment(); \\t\\t\\t\\t// 为DeploymentBuilder添加资源输入流 \\t\\t\\t\\tbuilder.addInputStream(\\"inputA\\", is1); \\t\\t\\t\\tbuilder.addInputStream(\\"inputB\\", is2); \\t\\t\\t\\t// 执行部署方法 \\t\\t\\t\\tbuilder.deploy(); \\t\\t4.添加classpath资源： \\t\\t\\tbuilder.addClasspathResource(\\"artifact/classpath.png\\") \\t\\t\\t\\t//添加classpath下的资源 \\t\\t\\t\\tbuilder.addClasspathResource(\\"artifact/classpath.png\\"); \\t\\t\\t\\t//执行部署（写入到数据库中） \\t\\t\\t\\tbuilder.deploy(); \\t\\t5.添加字符串资源： \\t\\t\\t//添加String资源 \\t\\t\\tbuilder.addString(\\"test\\", \\"this is string method\\"); \\t\\t\\t//执行部署（写入到数据库中） \\t\\t\\tbuilder.deploy(); \\t\\t6.添加压缩包资源： \\t\\t\\t//获取zip文件的输入流 \\t\\t\\tFileInputStream fis = new FileInputStream(new File(\\"resource/artifact/ZipInputStream.zip\\")); \\t\\t\\t//读取zip文件，创建ZipInputStream对象 \\t\\t\\tZipInputStream zi = new ZipInputStream(fis); \\t\\t\\t//添加Zip压缩包资源 \\t\\t\\tbuilder.addZipInputStream(zi); \\t\\t\\t//执行部署（写入到数据库中） \\t\\t\\tbuilder.deploy(); \\t\\t7.添加BPMN模型资源： \\t\\t\\taddBpmnModel \\t\\t\\taddBytes \\t\\t8.修改部署信息： \\t\\t\\t//设置各个属性 \\t\\t\\tbuilder.name(\\"crazyit\\").tenantId(\\"tenanId\\").key(\\"myKey\\").category(\\"myCategory\\"); \\t\\t9.过滤重复部署： \\t\\t\\t重复部署不再写入数据库，若不同，添加方法后，仍会修改数据库 \\t\\t\\tbuilderB.enableDuplicateFiltering(); \\t\\t10.取消部署时的验证： \\t\\t\\t默认情况下，在部署时会对流程的XML文件进行验证，包括验证是否符合BPMN规范、定义的流程是否可执行。 \\t\\t\\t\\tbuilderB.addClasspathResource(\\"bpmn/bpmnError.bpmn\\") \\t\\t\\t\\t.disableBpmnValidation().deploy(); \\t2.流程定义的管理： \\t\\t中止流程定义、激活流程定义和设置流程权限 \\t\\t \\t\\t1.ProcessDefinition对象： \\t\\t\\t有很多getter方法 \\t\\t2.流程部署： \\t\\t\\t将流程的描述文件写入数据库 \\t\\t3.流程图部署： \\t\\t4.流程图自动生成： \\t\\t\\t不自动生成 ，在配置文件中加&lt;property name=\\"createDiagramOnDeploy\\" value=\\"false\\" /&gt; \\t\\t5.中止与激活流程定义： \\t\\t6.流程定义缓存配置： \\t\\t7.自定义缓存 \\t\\t\\t自定义Java类，维护map \\t3.流程定义的权限： \\t\\tactiviti没有拦截检查，完全由开发者定义用户权限，然后根据表来查询 \\t\\t1.设置流程定义的用户权限： \\t\\t\\trepositoryService.addCandidateStarterUser(def.getId(), \\"user1\\"); \\t\\t2.设置流程定义的用户权限： \\t\\t\\trepositoryService.addCandidateStarterGroup(def.getId(), \\"group1\\"); \\t\\t3.IdentityLink对象： \\t\\t\\t对应表 ACT_RU_IDENTITYLINK \\t\\t4.查询权限数据： \\t\\t\\t// 根据用户查询用权限的流程定义 \\t\\t\\tList&lt;ProcessDefinition&gt; defs = repositoryService \\t\\t\\t\\t\\t.createProcessDefinitionQuery().startableByUser(\\"user1\\").list(); \\t\\t\\t// 根据流程定义查询用户组数据 \\t\\t\\tList&lt;Group&gt; groups = identityService.createGroupQuery() \\t\\t\\t\\t\\t.potentialStarter(def.getId()).list(); \\t\\t\\t \\t\\t\\t// 根据流程定义查询用户数据 \\t\\t\\tList&lt;User&gt; users = identityService.createUserQuery() \\t\\t\\t\\t\\t.potentialStarter(def.getId()).list(); \\t\\t\\t \\t\\t\\t// 根据流程定义查询全部的 IdentityLink（ACT_RU_IDENTITYLINK表） 数据 \\t\\t\\tList&lt;IdentityLink&gt; links = repositoryService \\t\\t\\t\\t\\t.getIdentityLinksForProcessDefinition(def.getId());\\t \\t4.RepositoryService数据查询与删除： \\t\\t1.查询部署资源 \\t\\t\\t// 查询资源文件 \\t\\t\\tInputStream is = repositoryService.getResourceAsStream(dep.getId(), \\t\\t\\t\\t\\"artifact/GetResource.txt\\"); \\t\\t\\t// 读取输入流 \\t\\t\\tint count = is.available(); \\t\\t\\tbyte[] contents = new byte[count]; \\t\\t\\tis.read(contents); \\t\\t\\tString result = new String(contents); \\t\\t2.查询流程文件 \\t\\t3.查询流程图 \\t\\t4.查询部署的资源名称 \\t\\t5.删除部署资源 \\t\\t6.DeploymentQuery对象 \\t\\t7.ProcessDefinitionQuery对象 第八章 流程任务管理 \\t1.任务的创建和删除： \\t\\t1.Task接口： \\t\\t\\tACT_RU_TASK \\t\\t2.创建与保存Task实例： \\t\\t\\tnewTask \\t\\t\\tsaveTask \\t\\t3.删除任务： \\t\\t\\t多个删除方法 \\t2.任务权限： \\t\\t1.设置候选用户组 \\t\\t2.设置候选用户 \\t\\t3.权限数据查询 \\t\\t\\t用户组和用户的Query对象没有提供根据任务ID查询用户组和用户的方法 \\t\\t4.设置任务持有人： \\t\\t\\tsetOwner \\t\\t5.设置任务代理人 \\t\\t\\tsetAssignee \\t\\t6.添加任务权限数据 \\t\\t7.删除用户组权限 \\t\\t8.删除用户权限 \\t3.任务参数： \\t\\t参数类型分为流程参数和任务参数 \\t\\t1.基本类型参数设置： \\t\\t\\tsetVariable \\t\\t2.序列化参数： \\t\\t\\t对象必须实现序列化接口 \\t\\t3.获取参数 \\t\\t\\tgetVariable(taskId,argName) \\t\\t4.参数作用域： \\t\\t\\tsetVariableLocal 局部参数 \\t\\t\\tgetVariableLocal \\t\\t5.设置多个参数： \\t\\t\\tsetVariables \\t\\t\\tsetVariablesLocal\\t \\t\\t\\t\\t//初始化参数 \\t\\t\\t\\tMap&lt;String,Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\t\\tvars.put(\\"days\\", 10); \\t\\t\\t\\tvars.put(\\"target\\", \\"欧洲\\"); \\t\\t\\t\\ttaskService.setVariables(task1.getId(), vars); \\t\\t\\t或使用序列化对象 \\t\\t6.数据对象： \\t\\t\\tBPMN文件中的dataObject元素 \\t\\t\\t\\tMap&lt;String, DataObject&gt; objs = taskService.getDataObjects(task.getId()); \\t \\t4.任务附件管理： \\t\\t1.Attachment对象： \\t\\t2.创建任务附件： \\t\\t\\t// 设置任务附件 \\t\\t\\ttaskService.createAttachment(\\"web url\\", task.getId(), pi.getId(), \\"163.com\\", \\t\\t\\t\\t\\t\\"163 web page\\", \\"http://www.163.com\\"); \\t\\t\\t// 创建图片输入流 \\t\\t\\tInputStream is = new FileInputStream(new File(\\"resource/artifact/result.png\\")); \\t\\t\\t// 设置输入流为任务附件 \\t\\t\\ttaskService.createAttachment(\\"web url\\", task.getId(), pi.getId(), \\"163.com\\", \\t\\t\\t\\t\\t\\"163 web page\\", is); \\t\\t3.附件查询： \\t\\t4.删除附件 \\t5.任务评论和事件记录： \\t\\t1.Comment对象: \\t\\t2.新增任务评论 \\t\\t\\taddComment \\t\\t3.事件的记录 \\t\\t4.数据查询 \\t6.任务声明与完成： \\t\\t1.任务声明： \\t\\t\\tclaim \\t\\t2.任务完成： \\t\\t\\tcomplete 第九章 流程控制 \\tTaskService主要用于任务管理，包括任务操作、任务数据管理等 \\tIdentityService主要用于管理流程的身份数据 \\tRepositoryService主要管理流程部署的数据 \\tRuntimeService主要用于管理流程在运行时产生的数据，以及对流程进行操作的API \\t流程运行时产生的数据包括流程参数、事件、流程 实例及执行流等 \\t流程的操作包括启动流程，流程前进等 \\t1.流程实例与执行流： \\t\\t1.流程实例与执行流的概念： \\t\\t\\t启动一个流程时，会创建一个流程实例，每个流程实例至少有一个执行流 \\t\\t2.流程实例和执行流对象 ProcessInstance Execution \\t2.启动流程: \\t\\tRuntimeService提供流程启动的多个方法，命名均为startProcessInstanceByXXX \\t\\t\\tXXX可以是流程定义的ID、Key【流程描述文件中process的id属性】和message \\t\\t1.startProcessInstanceById方法： \\t\\t2.startProcessInstanceByKey方法 \\t\\t3.startProcessInstanceByMessage方法 \\t\\t\\t消息事件 \\t3.流程参数： \\t\\t1.设置与查询流程参数： \\t\\t\\t设置需要传入执行流的ID \\t\\t\\t查询需要传入执行流的ID和参数名称 \\t\\t\\tsetViriable \\t\\t2.流程参数的作用域： \\t\\t\\t局部只作用域执行流 \\t\\t\\tsetViriableLocal \\t\\t3.其他设置参数的方法： \\t\\t\\tsetViriables \\t\\t\\tsetViriablesLocal \\t4.流程操作： \\t\\t启动流程、发送信号、中断流程、激活流程 \\t\\t1.流程触发： \\t\\t\\t对于receiveTask等流程节点，使用trigger方法进行触发，使流程往前进行 \\t\\t2.触发信号事件： \\t\\t\\t事件节点是在流程中记录事件发生的流程元素，BPMN2 规范中主要有两种类型的事件： \\t\\t\\t\\t捕获事件Catching 需要信号才能前进 \\t\\t\\t\\t\\t// 发送信号给事件，流程结束 \\t\\t\\t\\t\\truntimeService.signalEventReceived(\\"testSignal\\"); \\t\\t\\t\\t抛出事件Throwing \\t\\t3.触发消息事件： \\t\\t\\t消息事件节点 \\t\\t\\t\\t// 触发消息事件 \\t\\t\\t\\truntimeService.messageEventReceived(\\"testMsg\\", exe.getId()); \\t\\t4.中断和激活流程： \\t\\t\\tSUSPENSION_STATE_字段保存中断状态，1为活跃，2为中断 \\t\\t\\t\\truntimeService.suspendProcessInstanceById(pi.getId()); \\t\\t\\t\\truntimeService.activateProcessInstanceById(pi.getId()); \\t\\t5.删除流程： \\t\\t\\truntimeService.deleteProcessInstance(pi.getId(), \\"abc\\"); \\t5.流程数据查询： \\t\\t1.执行流查询： \\t\\t2.流程实例查询 \\t\\t\\t 第十章 历史数据管理和流程引擎管理 \\t历史数据： \\t\\tactiviti删除的流程定义、流程任务和流程实例的数据 \\t\\t已经完成的流程实例以及相关数据 \\tManagementService可以查询引擎数据库信息、工作信息，直接对数据库操作 \\t \\t1.历史数据管理： \\t\\t1.历史流程实例查询： \\t\\t\\thistoryService.createHistoricProcessInstanceQuery() \\t\\t2.历史任务查询： \\t\\t\\thistoryService.createHistoricTaskInstanceQuery() \\t\\t3.历史行为查询： \\t\\t\\thistoryService.createHistoricActivityInstanceQuery() \\t\\t4.历史流程明细查询： \\t\\t\\t流程的明细信息包括流程参数和流程表单属性 \\t\\t\\t\\t默认情况下，Activiti不会记录明细，当history配置为full级别时，才会记录 \\t\\t5.删除历史流程实例和历史任务： \\t\\t\\thistoryService.deleteHistoricProcessInstance(pi1.getId()); \\t\\t\\t级联删除实例 \\t2.工作的产生： \\t\\t异步工作时，用工作表保存任务 \\t\\t\\t一般的工作 ACT_RU_JOB \\t\\t\\t定时中断任务 ACT_RU_SUSPENDED_JOB \\t\\t\\t定时任务 ACT_RU_TIMER_JOB \\t\\t1.异步任务产生的工作： \\t\\t\\tJava Service Task主要用于在任务中调用外部的Java 类 \\t\\t2.定义中间事件产生的工作： \\t\\t\\t定义了定时器相关的节点，会在某个定义的时间点上执行。 \\t\\t\\t可以加入定时器的节点： \\t\\t\\t\\t中间事件节点、流程开始事件节点和边界事件节点 \\t\\t3.定义边界事件产生的工作： \\t\\t4.定时开始事件产生的工作 \\t\\t5.流程抛出事件产生的工作 \\t\\t6.暂停工作的产生 \\t\\t7.无法执行的工作 \\t3.工作管理： \\t\\tManagementService提供工作查询对象（对象返回job实例） \\t\\t1.工作查询对象：\\t \\t\\t\\t4个： \\t\\t\\t\\tJobQuery \\t\\t\\t\\tTimerJobQuery \\t\\t\\t\\tSuspendedJobQuery \\t\\t\\t\\tDeadLetterJobQuery \\t\\t2.获取工作异常信息： \\t\\t\\tgetXXXJobExceptionStacktrace \\t\\t3.转移与删除工作： \\t\\t\\tmove \\t\\t\\tdelete \\t4.数据库管理： \\t\\t1.查询引擎属性 \\t\\t2.数据表信息查询 \\t\\t3.数据库操作 \\t\\t4.数据表查询 \\t 第十一章 流程事件 \\t要点： \\t\\tBPMN的事件分类 \\t\\t各种流程的事件定义 \\t\\t开始事件的应用 \\t\\t结束事件的应用 \\t\\t边界事件的应用 \\t\\t中间事件的应用 \\t \\t1.事件分类： \\t\\t1.按照事件的位置分类： \\t\\t\\t开始事件：表示流程开始的事件 \\t\\t\\t结束事件：表示流程结束的事件 \\t\\t\\t中间事件：出现在流程中，单独作为流程节点的事件 \\t\\t\\t边界事件：附属于某个流程节点（如子流程，流程任务）的事件 \\t\\t2.按照事件的特性分类： \\t\\t\\tCatching事件 \\t\\t\\tThrowing事件 \\t\\t\\t\\t开始事件是Catching \\t\\t\\t\\t结束事件是throwing \\t\\t\\t\\t边界时catching \\t\\t\\t\\t中间 都有 \\t2.事件定义： \\t\\t与事件结合 \\t3.开始事件： \\t\\t无指定开始事件 \\t\\t定时器开始事件 \\t\\t消息开始事件 \\t\\t错误开始事件 \\t4.结束事件： \\t\\t无指定结束事件 \\t\\t错误结束事件 \\t\\t取消结束事件 \\t\\t中止结束事件 \\t5.边界事件 \\t\\t定时器 \\t\\t信号 \\t\\t错误 \\t\\t取消 \\t6.中间事件 \\t\\t定时器 捕获 \\t\\t信号 捕获 抛出 \\t\\t消息 抛出\\t \\t7.补偿事件 \\t\\t补偿边界 \\t\\t\\t事务子流程取消触发 \\t\\t\\t补偿中间触发 \\t\\t补偿中间 第十二章 流程任务 \\tBPMN任务概述 \\t用户任务的应用 \\t指定服务任务的行为 \\tWebService任务的应用 \\t脚本任务的应用 \\t任务监听器的使用 \\t流程监听器的使用 \\t1.用户任务： \\t\\t1.分配任务候选人 \\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Task1\\"&gt; \\t\\t\\t\\t&lt;potentialOwner&gt; \\t\\t\\t\\t\\t&lt;resourceAssignmentExpression&gt; \\t\\t\\t\\t\\t\\t&lt;formalExpression&gt;user(angus), group(management), boss \\t\\t\\t\\t\\t\\t&lt;/formalExpression&gt; \\t\\t\\t\\t\\t&lt;/resourceAssignmentExpression&gt; \\t\\t\\t\\t&lt;/potentialOwner&gt; \\t\\t\\t&lt;/userTask&gt; \\t\\t2.分配任务代理人 \\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Task 1\\"&gt; \\t\\t\\t\\t&lt;humanPerformer&gt; \\t\\t\\t\\t\\t&lt;resourceAssignmentExpression&gt; \\t\\t\\t\\t\\t\\t&lt;formalExpression&gt;user1&lt;/formalExpression&gt; \\t\\t\\t\\t\\t&lt;/resourceAssignmentExpression&gt; \\t\\t\\t\\t&lt;/humanPerformer&gt; \\t\\t\\t&lt;/userTask&gt; \\t\\t3.权限分配扩展 \\t\\t\\t使用activiti扩展来分配任务的候选人和代理人 \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Assignee\\" activiti:assignee=\\"user1\\"&gt;&lt;/userTask&gt; \\t\\t\\t\\t&lt;userTask id=\\"usertask2\\" name=\\"Candidate User\\" \\t\\t\\t\\t\\tactiviti:candidateUsers=\\"user1, user2\\"&gt;&lt;/userTask&gt; \\t\\t\\t\\t&lt;userTask id=\\"usertask3\\" name=\\"Candidate Group\\" \\t\\t\\t\\t\\tactiviti:candidateGroups=\\"group1,group2\\"&gt;&lt;/userTask&gt; \\t\\t4.使用任务监听器进行权限分配 \\t\\t\\t设置监听类 \\t\\t\\t\\tpublic class UserTaskListener implements TaskListener { \\t\\t\\t\\t\\tpublic void notify(DelegateTask delegateTask) { \\t\\t\\t\\t\\t\\tSystem.out.println(\\"使用任务监听器设置任务权限\\"); \\t\\t\\t\\t\\t\\tdelegateTask.setAssignee(\\"user1\\"); \\t\\t\\t\\t\\t\\tdelegateTask.addCandidateGroup(\\"group1\\"); \\t\\t\\t\\t\\t\\tdelegateTask.addCandidateUser(\\"user1\\");\\t\\t \\t\\t\\t\\t\\t} \\t\\t\\t\\t} \\t\\t\\t配置监听器 \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Assignee\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:taskListener event=\\"create\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.UserTaskListener\\"&gt;&lt;/activiti:taskListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/userTask&gt; \\t\\t5.使用JUEL分配权限 \\t\\t\\t \\t\\t\\t&lt;userTask id=\\"usertask2\\" name=\\"Task 1\\" activiti:assignee=\\"${authService.getUserAssignee()}\\"&gt;&lt;/userTask&gt; \\t\\t\\t&lt;userTask id=\\"usertask3\\" name=\\"Task 2\\" activiti:candidateUsers=\\"${authService.getCandidateUsers()}\\"&gt;&lt;/userTask&gt; \\t\\t\\t&lt;userTask id=\\"usertask4\\" name=\\"Task 3\\" activiti:candidateGroups=\\"${authService.getCandidateGroups()}\\"&gt;&lt;/userTask&gt; \\t\\t\\t&lt;userTask id=\\"usertask5\\" name=\\"Task 4\\" activiti:assignee=\\"${authService.lastUser}\\"&gt;&lt;/userTask&gt; \\t\\t \\t\\t\\t服务Bean \\t\\t\\tpublic class AuthService implements Serializable { \\t \\t\\t\\t\\tprivate String lastUser = \\"angus\\"; \\t\\t\\t\\t \\t\\t\\t\\tpublic String getLastUser() { \\t\\t\\t\\t\\treturn this.lastUser; \\t\\t\\t\\t} \\t\\t\\t\\t \\t\\t\\t\\tpublic AuthService() { \\t\\t\\t\\t\\tSystem.out.println(\\"create AuthService\\"); \\t\\t\\t\\t} \\t\\t\\t\\t//使用方法为任务指定代理人 \\t\\t\\t\\tpublic String getUserAssignee() { \\t\\t\\t\\t\\treturn \\"crazyit\\"; \\t\\t\\t\\t} \\t\\t\\t\\t \\t\\t\\t\\t//使用方法为任务指定候选人 \\t\\t\\t\\tpublic List&lt;String&gt; getCandidateUsers() { \\t\\t\\t\\t\\tList&lt;String&gt; result = new ArrayList&lt;String&gt;(); \\t\\t\\t\\t\\tresult.add(\\"user1\\"); \\t\\t\\t\\t\\tresult.add(\\"user2\\"); \\t\\t\\t\\t\\treturn result; \\t\\t\\t\\t} \\t\\t\\t\\t \\t\\t\\t\\t//使用方法为任务指定候选用户组 \\t\\t\\t\\tpublic List&lt;String&gt; getCandidateGroups() { \\t\\t\\t\\t\\tList&lt;String&gt; result = new ArrayList&lt;String&gt;(); \\t\\t\\t\\t\\tresult.add(\\"group1\\"); \\t\\t\\t\\t\\tresult.add(\\"group2\\"); \\t\\t\\t\\t\\treturn result; \\t\\t\\t\\t} \\t\\t\\t} \\t\\t\\t添加流程变量 \\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\tvars.put(\\"authService\\", new AuthService()); \\t\\t\\t// 启动流程 \\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\"process1\\", vars); \\t\\t\\t\\t\\t \\t2.服务任务： \\t\\tactiviti:class: JavaDelegate或ActivitiBehavior的实现类 \\t\\tactiviti:delegateExpression \\t\\tactiviti:expression 直接调用bean \\t\\t \\t\\t1.实现JavaDelegate \\t\\t\\t \\t\\t\\tpublic class MyJavaDelegate implements JavaDelegate, Serializable { \\t\\t\\t\\tpublic void execute(DelegateExecution execution) { \\t\\t\\t\\t\\tSystem.out.println(\\" 实现 JavaDelegate 的 JavaSeviceTask: \\" + this); \\t\\t\\t\\t} \\t\\t\\t} \\t\\t\\tactiviti:class方式： \\t\\t\\t\\t&lt;serviceTask id=\\"servicetask1\\" name=\\"Service Task 1\\" \\t\\t\\t\\t\\tactiviti:class=\\"org.crazyit.activiti.MyJavaDelegate\\"&gt;&lt;/serviceTask&gt; \\t\\t\\tactiviti:delegateExpression 方式： \\t\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\t\\tvars.put(\\"myDelegate\\", new MyJavaDelegate()); \\t\\t\\t\\t// 启动流程 \\t\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\"process1\\", vars); \\t\\t\\t\\t&lt;serviceTask id=\\"servicetask1\\" name=\\"Service Task\\" \\t\\t\\t\\t\\tactiviti:delegateExpression=\\"${myDelegate}\\"&gt;&lt;/serviceTask&gt; \\t\\t\\t \\t\\t2.使用普通的JavaBean \\t\\t\\t调用Bean方法和属性 \\t\\t\\tBean类： \\t\\t\\t\\tpublic class MyJavaBean implements Serializable { \\t\\t\\t\\t\\tprivate String name = \\"crazyit\\"; \\t\\t\\t\\t\\t \\t\\t\\t\\t\\tpublic String getName() { \\t\\t\\t\\t\\t\\treturn this.name; \\t\\t\\t\\t\\t} \\t\\t\\t\\t\\t \\t\\t\\t\\t\\tpublic void print(Execution exe) { \\t\\t\\t\\t\\t\\tSystem.out.println(\\"使用Java Bean的print方法：\\" + exe.getId()); \\t\\t\\t\\t\\t} \\t\\t\\t\\t} \\t\\t\\t \\t\\t\\tBPMN： \\t\\t\\t\\t&lt;serviceTask id=\\"servicetask1\\" name=\\"Service Task\\" \\t\\t\\t\\t\\tactiviti:expression=\\"${myBean.print(execution)}\\"&gt;&lt;/serviceTask&gt; \\t\\t\\t\\t&lt;serviceTask id=\\"servicetask2\\" name=\\"Service Task\\" \\t\\t\\t\\t\\tactiviti:expression=\\"${execution.setVariable(\'myName\', myBean.name)}\\"&gt;&lt;/serviceTask&gt; \\t\\t\\t设置参数： \\t\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\t\\tvars.put(\\"myBean\\", new MyJavaBean()); \\t\\t\\t\\t// 启动流程 \\t\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey( \\t\\t\\t\\t\\t\\t\\"process1\\", vars); \\t\\t3.Shell任务： \\t\\t\\t执行cmd命令 \\t \\t3.流程与任务监听器： \\t\\t \\t\\t任务监听器taskListener 设置event =\\"create/complete/assignment\\"表示用户任务创建时调用监听器 \\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"User Task\\"&gt; \\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t&lt;activiti:taskListener event=\\"create\\" \\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.PropertyConfigListener\\" /&gt; \\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t&lt;/userTask&gt; \\t\\t\\t属性注入，往任务监听器中注入属性 \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"User Task\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:taskListener event=\\"create\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.PropertyInjection\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"userName\\" stringValue=\\"crazyit\\" /&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:taskListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/userTask&gt; \\t\\t\\t\\t监听器类： \\t\\t\\t\\t\\tpublic class PropertyInjection implements TaskListener { \\t\\t\\t\\t\\t\\tprivate Expression userName; \\t\\t\\t\\t\\t\\t \\t\\t\\t\\t\\t\\tpublic void setUserName(Expression userName) { \\t\\t\\t\\t\\t\\t\\tthis.userName = userName; \\t\\t\\t\\t\\t\\t} \\t\\t\\t\\t\\t\\t \\t\\t\\t\\t\\t\\tpublic void notify(DelegateTask delegateTask) { \\t\\t\\t\\t\\t\\t\\tSystem.out.println(\\"属性注入后的值：\\" + this.userName.getValue(null)); \\t\\t\\t\\t\\t\\t} \\t\\t\\t\\t\\t} \\t\\t \\t\\t流程监听器： \\t\\t\\t&lt;activiti:executionListener event=\\"XXXXX\\" \\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t \\t\\t\\t \\t\\t\\t&lt;process id=\\"process1\\" name=\\"process1\\" isExecutable=\\"true\\"&gt; \\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"end\\" \\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[流程结束]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\" \\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[流程开始]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;startEvent id=\\"startevent1\\" name=\\"Start\\"&gt;&lt;/startEvent&gt; \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Task 1\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"end\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[用户任务结束]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[用户任务开始]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/userTask&gt; \\t\\t\\t\\t&lt;exclusiveGateway id=\\"exclusivegateway1\\" name=\\"Exclusive Gateway\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[网关开始]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/exclusiveGateway&gt; \\t\\t\\t\\t&lt;intermediateThrowEvent id=\\"signalintermediatethrowevent1\\" \\t\\t\\t\\t\\tname=\\"SignalThrowEvent\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"end\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[中间事件结束]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\" \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt; \\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[中间事件开始]]&gt;&lt;/activiti:string&gt; \\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t\\t&lt;/intermediateThrowEvent&gt; \\t\\t\\t\\t&lt;endEvent id=\\"endevent1\\" name=\\"End\\"&gt;&lt;/endEvent&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow1\\" sourceRef=\\"startevent1\\" \\t\\t\\t\\t\\ttargetRef=\\"exclusivegateway1\\"&gt; \\t\\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t\\t&lt;activiti:executionListener \\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt; \\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\" stringValue=\\"从开始事件到网关的顺序流\\"/&gt; \\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt; \\t\\t\\t\\t\\t&lt;/extensionElements&gt;\\t \\t\\t\\t\\t&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow3\\" sourceRef=\\"usertask1\\" \\t\\t\\t\\t\\ttargetRef=\\"signalintermediatethrowevent1\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow4\\" sourceRef=\\"signalintermediatethrowevent1\\" \\t\\t\\t\\t\\ttargetRef=\\"endevent1\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow5\\" sourceRef=\\"exclusivegateway1\\" \\t\\t\\t\\t\\ttargetRef=\\"usertask1\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t&lt;/process&gt; \\t\\t\\t\\t 第十三章 其他流程元素\\t \\t1.子流程： \\t\\t1.嵌入式子流程 \\t\\t\\t&lt;subProcess id=\\"subprocess1\\" name=\\"Sub Process\\"&gt; \\t\\t\\t\\t&lt;startEvent id=\\"startevent2\\" name=\\"Start\\"&gt;&lt;/startEvent&gt; \\t\\t\\t\\t&lt;serviceTask id=\\"usertask2\\" name=\\"Sub Task\\" \\t\\t\\t\\t\\tactiviti:class=\\"org.crazyit.activiti.EmbededJavaDelegate\\"&gt;&lt;/serviceTask&gt; \\t\\t\\t\\t&lt;endEvent id=\\"endevent1\\" name=\\"End\\"&gt;&lt;/endEvent&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow3\\" sourceRef=\\"startevent2\\" \\t\\t\\t\\t\\ttargetRef=\\"usertask2\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow4\\" sourceRef=\\"usertask2\\" \\t\\t\\t\\t\\ttargetRef=\\"endevent1\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t&lt;/subProcess&gt; \\t\\t \\t\\t \\t\\t \\t\\t2.调用式子流程 \\t\\t\\t&lt;callActivity id=\\"subprocess1\\" name=\\"人事、总监子流程\\" calledElement=\\"SubProcess\\"&gt; \\t\\t\\t\\t&lt;extensionElements&gt; \\t\\t\\t\\t\\t&lt;activiti:in source=\\"days\\" target=\\"newDays\\"&gt;&lt;/activiti:in&gt; \\t\\t\\t\\t\\t&lt;activiti:out source=\\"myDays\\" target=\\"resultDays\\"&gt;&lt;/activiti:out&gt; \\t\\t\\t\\t&lt;/extensionElements&gt; \\t\\t\\t&lt;/callActivity&gt; \\t\\t\\t \\t\\t\\t// 部署流程文件 \\t\\t\\trepositoryService \\t\\t\\t\\t\\t.createDeployment() \\t\\t\\t\\t\\t.addClasspathResource( \\t\\t\\t\\t\\t\\t\\t\\"bpmn/CallActivityVariable.bpmn\\") \\t\\t\\t\\t\\t.addClasspathResource(\\"bpmn/SubProcess.bpmn\\") \\t\\t\\t\\t\\t.deploy();\\t\\t \\t\\t3.事件子流程 \\t\\t4.事务子流程 \\t\\t5.特别子流程 \\t\\t\\tbpmn不指定子流程的执行顺序,实际运行时指定运行顺序 \\t\\t\\t&lt;adHocSubProcess id=\\"adhocSubProcess\\" ordering=\\"Sequential\\"&gt; \\t\\t\\t\\t&lt;userTask id=\\"subProcessTask\\" name=\\"Task in subprocess\\" /&gt; \\t\\t\\t\\t&lt;userTask id=\\"subProcessTask2\\" name=\\"Task2 in subprocess\\" /&gt; \\t\\t\\t&lt;/adHocSubProcess&gt; \\t\\t\\t \\t\\t\\t// 查询子流程的执行流 \\t\\t\\tExecution exe = runtimeService.createExecutionQuery() \\t\\t\\t\\t\\t.processInstanceId(pi.getId()).activityId(\\"adhocSubProcess\\") \\t\\t\\t\\t\\t.singleResult(); \\t\\t\\t// 让执行流到达第二个任务 \\t\\t\\truntimeService.executeActivityInAdhocSubProcess(exe.getId(), \\t\\t\\t\\t\\t\\"subProcessTask2\\");\\t \\t\\t\\t \\t\\t\\t// 完成第二个任务 \\t\\t\\tTask subProcessTask2 = taskService.createTaskQuery() \\t\\t\\t\\t\\t.processInstanceId(pi.getId()) \\t\\t\\t\\t\\t.taskDefinitionKey(\\"subProcessTask2\\").singleResult(); \\t\\t\\ttaskService.complete(subProcessTask2.getId()); \\t\\t\\t// 完成特别子流程✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ \\t\\t\\t//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ \\t\\t\\truntimeService.completeAdhocSubProcess(exe.getId()); \\t\\t\\t//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ \\t\\t \\t2.顺序流与网关： \\t\\t顺序流： \\t\\t\\t条件顺序流 \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow4\\" name=\\"小于等于5天\\" sourceRef=\\"exclusivegateway1\\" \\t\\t\\t\\t\\ttargetRef=\\"usertask2\\"&gt; \\t\\t\\t\\t\\t&lt;conditionExpression xsi:type=\\"tFormalExpression\\"&gt; \\t\\t\\t\\t\\t&lt;![CDATA[ \\t\\t\\t\\t\\t${days &lt;= 5} \\t\\t\\t\\t\\t]]&gt; \\t\\t\\t\\t\\t&lt;/conditionExpression&gt; \\t\\t\\t\\t&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow5\\" name=\\"大于5天\\" sourceRef=\\"exclusivegateway1\\" \\t\\t\\t\\t\\ttargetRef=\\"usertask3\\"&gt; \\t\\t\\t\\t\\t&lt;conditionExpression xsi:type=\\"tFormalExpression\\"&gt; \\t\\t\\t\\t\\t&lt;![CDATA[ \\t\\t\\t\\t\\t${days &gt; 5} \\t\\t\\t\\t\\t]]&gt; \\t\\t\\t\\t\\t&lt;/conditionExpression&gt; \\t\\t\\t\\t&lt;/sequenceFlow&gt; \\t\\t\\t\\t执行示例： \\t\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\t\\tvars.put(\\"days\\", 6); \\t\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey( \\t\\t\\t\\t\\"process1\\", vars); \\t\\t\\t默认顺序流 \\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"填写请假申请\\" default=\\"flow1\\"&gt;&lt;/userTask&gt; \\t\\t\\t\\t \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow1\\" sourceRef=\\"usertask1\\" targetRef=\\"usertask2\\"&gt;&lt;/sequenceFlow&gt; \\t\\t\\t\\t&lt;sequenceFlow id=\\"flow2\\" sourceRef=\\"usertask1\\" targetRef=\\"usertask3\\"&gt; \\t\\t\\t\\t\\t&lt;conditionExpression xsi:type=\\"tFormalExpression\\"&gt;&lt;![CDATA[ \\t\\t\\t\\t\\t${days &gt; 5} \\t\\t\\t\\t\\t]]&gt;&lt;/conditionExpression&gt; \\t\\t\\t\\t&lt;/sequenceFlow&gt; \\t\\t\\t\\t \\t\\t流程网关： \\t\\t\\t单向网关 \\t\\t\\t并行网关 \\t\\t\\t兼容网关 \\t\\t\\t事件网关 \\t\\t\\t组合网关（Activiti不支持） \\t\\t\\t单向网关 \\t\\t\\t并行网关： \\t\\t\\t\\t分叉 合并 \\t\\t\\t兼容网关： \\t\\t\\t\\t单向网关和并行网关结合 \\t\\t\\t事件网关： \\t\\t\\t\\t哪个事件先触发，就转向哪一个执行流 \\t\\t\\t\\t事件网关只会选择最先触发的事件所在的分支向前执行 \\t \\t3.流程活动的特性： \\t\\t1.多实例活动 \\t\\t\\t&lt;multiInstanceLoopCharacteristics \\t\\t\\t\\tisSequential=\\"true\\"&gt; \\t\\t\\t\\t&lt;loopCardinality&gt;2&lt;/loopCardinality&gt; \\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt; \\t\\t2.设置循环数据 \\t\\t\\t&lt;multiInstanceLoopCharacteristics \\t\\t\\t\\tisSequential=\\"false\\" activiti:collection=\\"datas1\\"&gt; \\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt; \\t\\t\\t \\t\\t\\tList&lt;String&gt; datas1 = new ArrayList&lt;String&gt;(); \\t\\t\\tdatas1.add(\\"a\\"); \\t\\t\\tdatas1.add(\\"b\\"); \\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); \\t\\t\\tvars.put(\\"datas1\\", datas1); \\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey( \\t\\t\\t\\t\\"process1\\", vars); \\t\\t3.获取循环元素 \\t\\t\\t&lt;multiInstanceLoopCharacteristics \\t\\t\\t\\tisSequential=\\"true\\" activiti:collection=\\"datas1\\" \\t\\t\\t\\tactiviti:elementVariable=\\"data\\"&gt; \\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt; \\t\\t\\tpublic class ServiceB implements JavaDelegate { \\t\\t\\t\\tpublic void execute(DelegateExecution execution) { \\t\\t\\t\\t \\t\\t\\t\\t\\tSystem.out.println(\\"获取循环参数：\\" + execution.getVariable(\\"data\\")); \\t\\t\\t\\t} \\t\\t\\t} \\t\\t4.循环的内置参数 \\t\\t\\tnrOfInstances:实例总数 \\t\\t\\tnrOfActiveInstances:当前正在执行的实例总数\\t \\t\\t\\tnrOfCompletedInstances:已经完成的实例总数 \\t\\t\\tloopCounter:当前循环的索引 \\t\\t5.循环结束条件 \\t\\t\\t&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt; \\t\\t\\t \\t\\t\\t&lt;multiInstanceLoopCharacteristics \\t\\t\\t\\tisSequential=\\"true\\" activiti:collection=\\"${datas}\\" \\t\\t\\t\\tactiviti:elementVariable=\\"data\\"&gt; \\t\\t\\t\\t&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt; \\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt; 第十四章 Activiti与规则引擎\\t\\t\\t \\t1.Drools介绍与运行 \\t\\t代码与业务规则分离 \\t2.规则语法 \\t\\t全局变量 \\t\\t函数 \\t\\t规则属性 \\t\\t\\tactivation-group 激活组，组内只有一个规则会被激活 \\t\\t\\tsalience 优先级 \\t\\t条件语法 \\t\\t\\twhen then \\t\\t行为语法 \\t\\t\\t修改事实对象 \\t\\t\\tinsert \\t\\t\\tupdate \\t3.Activiti整合Drools \\t\\t&lt;property name=\\"customPostDeployers\\"&gt; \\t\\t\\t&lt;list&gt; \\t\\t\\t\\t&lt;bean class=\\"org.activiti.engine.impl.rules.RulesDeployer\\" /&gt; \\t\\t\\t&lt;/list&gt; \\t\\t&lt;/property&gt;\\t \\t\\t \\t\\t&lt;businessRuleTask id=\\"businessruletask1\\" name=\\"匹配销售规则\\" \\t\\t\\tactiviti:ruleVariablesInput=\\"${member}\\" \\t\\t\\tactiviti:resultVariable=\\"members\\"&gt; &lt;/businessRuleTask&gt; 第十五章 基于DMN的Activiti规则引擎 \\t1.DMN规范 \\t2.规则引擎使用 \\t3.MVEL表达式 第十六章 整合第三方框架 \\t \\t引擎，各种服务，都可以直接注入 第十七章 Rest \\t 第十八章 \\t表单 \\t流程图与XML的转换 \\t回退 \\t会签"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-10T06:35:27.000Z"}],["meta",{"property":"article:author","content":"Alooc"}],["meta",{"property":"article:tag","content":"activiti"}],["meta",{"property":"article:tag","content":"工作流"}],["meta",{"property":"article:published_time","content":"2020-01-01T09:02:55.000Z"}],["meta",{"property":"article:modified_time","content":"2023-07-10T06:35:27.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"activiti6笔记\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-01-01T09:02:55.000Z\\",\\"dateModified\\":\\"2023-07-10T06:35:27.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Alooc\\",\\"url\\":\\"https://alooc.github.io\\"}]}"]]},"headers":[],"git":{"createdTime":1688970927000,"updatedTime":1688970927000,"contributors":[{"name":"dongzhaohe","email":"dongzhaohe@inspur.com","commits":1}]},"readingTime":{"minutes":27.52,"words":8255},"filePathRelative":"blog/be/activiti/activiti6基础笔记.md","localizedDate":"2020年1月1日","excerpt":"<div class=\\"language-text line-numbers-mode\\" data-ext=\\"text\\"><pre class=\\"language-text\\"><code>first-demo：\\n步骤：设计流程，配置流程引擎，加载流程文件，启动流程。\\n\\n数据库表的含义\\nurl driver user password\\n\\n配置文件\\n\\n工作流引擎设计的一致原则是：强调流程服务的可嵌入性和可扩展性\\n\\njbpm3,jbpm5 activiti5:\\n\\tjBPM3 是一个完整的工作流系统实现，面向开发人员，\\n\\t\\t目的在于简化对组织核心流程进行支撑的软件创建，不支持标准。\\n\\n\\tjBPM4 引入 PVM，使其拥有更强大的扩展性，同时增加 BPMS 特性，\\n\\t\\t这些特性包括了对 BPMN 的支持、面向业务人员的 Web 建模器和简单统计分析功能的加入。\\n\\n\\tjBPM5 基于原先的 Drools Flow，支持 BPMN，通过与 Drools 的合并支持 BAM，\\n\\t\\t通过内容仓库增加对流程可视化的支持。由于放弃了 jBPM4 的 PVM，引擎的可扩展性受到损害，并且不再支持 jPDL。\\n\\n\\tActiviti5 基于 jBPM4，与 Alfresco 的集成增加了其流程可视化与管理能力，\\n\\t\\t同时通过创新的 Activiti Cycle 协作组件支持流程相关人员之间的协调，最后，它加强了集成能力。\\n\\n******************************************************************\\n第一章 Activiti介绍\\n\\tBPMN   Business Process Modeling Notation  业务流程模型和符号\\n\\tBPMN 2.0 定义了5个基础的元素类别：\\n\\t\\t流对象 Flow Object :在一个业务流程中，流对象是用于定义行为的图形元素，主要有事件Events、活动Activities、和网关 Gateways 三种流对象 \\n\\t\\t数据 Data :主要有数据对象 Data Objects、数据输入 Data Inputs 、数据输出 Data Outputs 和数据存储 Data Stores 四种元素\\n\\t\\t连接对象 Connecting Objects :用于连接流对象，顺序流 Sequence Flows、消息流 Message Flows、关联 Associations 和数据关联 Data Associations 四种连接流对象的方式\\n\\t\\t泳道 Swimlanes :泳道提供了两种途径用于组织基础的模型元素，分别是池 Pools 和道 Lanes\\n\\t\\t制品 Artifacts :制品主要用于为流程提供附加信息，当前制品包括组 Group 和 注释 Text Annotation\\n\\n第二章 安装运行Activiti\\n\\t开发第一个应用：\\n\\t\\t1.引入jar包\\n\\t\\t2.写配置文件 activiti的配置文件默认是resource中的activiti.cgf.xml\\n\\t\\t\\t示例：\\n\\t\\t\\t\\t&lt;?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?&gt;\\n\\t\\t\\t\\t&lt;beans xmlns=\\"http://www.springframework.org/schema/beans\\"\\n\\t\\t\\t\\t       xmlns:xsi=\\"http://www.w3.org/2001/XMLSchema-instance\\"\\n\\t\\t\\t\\t       xsi:schemaLocation=\\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\\"&gt;\\n\\t\\t\\t\\t\\t&lt;!-- 流程引擎配置的bean --&gt;\\n\\t\\t\\t\\t\\t&lt;bean id=\\"processEngineConfiguration\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt;\\n\\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act?useUnicode=true&amp;amp; characterEncoding=utf8&amp;amp; useSSL=false&amp;amp; serverTimezone=UTC&amp;amp; rewriteBatchedStatements=true\\" /&gt;\\n\\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.cj.jdbc.Driver\\" /&gt;\\n\\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt;\\n\\t\\t\\t\\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"root\\" /&gt;\\n\\t\\t\\t\\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"true\\" /&gt;\\n\\t\\t\\t\\t\\t&lt;/bean&gt;\\n\\t\\t\\t\\t&lt;/beans&gt;\\n\\n\\t\\t3.创建bpmn文件 \\n\\t\\t4.类文件启动示例：\\n\\n\\t\\t\\t// 创建流程引擎\\n\\t\\t\\tProcessEngine engine = ProcessEngines.getDefaultProcessEngine();\\n\\n\\t\\t★//部署层面\\n\\t\\t\\t// 得到流程存储服务组件，相当于流程仓库，可部署流程，kickstart App\\n\\t\\t\\tRepositoryService repositoryService = engine.getRepositoryService();\\n\\t\\t\\t\\n\\t\\t★//启动层面\\n\\t\\t\\t// 得到运行时服务组件，运行服务，启动流程  启动流程\\n\\t\\t\\tRuntimeService runtimeService = engine.getRuntimeService();\\n\\t\\t\\t\\n\\t\\t★//流程处理层面\\n\\t\\t\\t// 获取流程任务组件    流程启动后，使用\\n\\t\\t\\tTaskService taskService = engine.getTaskService();\\n\\t\\t\\t// 部署流程文件\\n\\t\\t\\trepositoryService.createDeployment()\\n\\t\\t\\t\\t\\t.addClasspathResource(\\"bpmn/First.bpmn\\").deploy();\\n\\t\\t\\t// 启动流程\\n\\t\\t\\truntimeService.startProcessInstanceByKey(\\"process1\\");\\n\\t\\t\\t// 查询第一个任务\\n\\t\\t\\tTask task = taskService.createTaskQuery().singleResult();\\n\\t\\t\\tSystem.out.println(\\"第一个任务完成前，当前任务名称：\\" + task.getName());\\n\\t\\t\\t// 完成第一个任务\\n\\t\\t\\ttaskService.complete(task.getId());\\n\\t\\t\\t// 查询第二个任务\\n\\t\\t\\ttask = taskService.createTaskQuery().singleResult();\\n\\t\\t\\tSystem.out.println(\\"第二个任务完成前，当前任务名称：\\" + task.getName());\\n\\t\\t\\t// 完成第二个任务（流程结束）\\n\\t\\t\\ttaskService.complete(task.getId());\\n\\t\\t\\ttask = taskService.createTaskQuery().singleResult();\\n\\t\\t\\tSystem.out.println(\\"流程结束后，查找任务：\\" + task);\\n\\t\\t\\t// 退出\\n\\t\\n第三章 Activiti数据库设计\\n\\tactiviti流程引擎的数据表分为5大类，各类职责不同，有统一的命名规范\\n\\t\\n\\t1.通用数据表：只存放通用资源， ACT_GE\\n\\t\\t资源表 ACT_GE_BYTEARRAY \\n\\t\\t\\t保存与流程引擎相关的资源\\n\\t\\t\\t一般用来保存字符串、流程文件的内容、流程图片内容\\n\\t\\t属性表 ACT_GE_PROPERTY\\n\\t\\t\\t属性的键值对\\n\\t2.流程存储表：保存流程定义和部署信息 ACT_RE\\n\\t\\t部署数据表 ACT_RE_DEPLOYMENT\\n\\t\\t\\t保存部署信息\\n\\t\\t流程定义表 ACT_RE_PROCDEF\\n\\t\\t\\t保存流程文件 .bpmn\\n\\t3.身份数据表：有关身份数据的几张表 ACT_ID\\n\\t\\t用户表 ACT_ID_USER\\n\\t\\t\\t保存用户信息\\n\\t\\t用户账号（信息）表 ACT_ID_INFO\\n\\t\\t\\tactiviti将用户、用户账号和用户信息分三种数据，用户表保存用户的数据，\\n\\t\\t\\t而其他两个被保存在这个表中\\n\\t\\t用户组表 ACT_ID_GROUP\\n\\t\\t\\t用户组数据（组名称，组类型）\\n\\t\\t关系表 ACT_ID_MEMBERSHIP\\n\\t\\t\\t保存用户属于哪个组\\n\\t4.运行时数据表：保存流程在运行过程中所产生的数据，例如流程实例、执行流、任务等 ACT_RU\\n\\t\\t流程实例（执行流）表 ACT_RU_EXECUTION\\n\\t\\t流程任务表 ACT_RU_TASK\\n\\t\\t流程参数表 ACT_RU_VARIABLE\\n\\t\\t流程与身份关系表 ACT_RU_IDENTITYLINK\\n\\t\\t工作数据表\\n\\t\\t\\tACT_RU_JOB\\n\\t\\t\\tACT_RU_DEADLEFTER_JOB\\n\\t\\t\\tACT_RU_SUSPENDED_JOB\\n\\t\\t\\tACT_RU_TIMER_JOB\\n\\t\\t事件描述表 ACT_RU_EVENT_SUBSCR\\n\\t5.历史数据表：流程引擎的日志表，操作过的流程元素将会被记录到历史表中 ACT_HI\\n\\t\\t流程实例表 ACT_HI_PROCINST\\n\\t\\t流程明细表 ACT_HI_DETAIL\\n\\t\\t历史任务表和历史行为表 ACT_HI_TASKINST\\n\\t\\t附件表和评论表 ACT_HI_ATTACHMENT\\n\\t6.DMN 规则引擎表\\n\\t\\tactiviti6加入了DMN规范的规则引擎模块\\n\\t\\t\\t1.决策部署表  ACT_DMN_DEPLOYMENT\\n\\t\\t\\t\\t类似于流程定义部署，每次部署，向部署表中写入部署数据\\n\\t\\t\\t2.决策表 ACT_DMN_DECISION_TABLE\\n\\t\\t\\t\\t决策类似于流程定义，保存决策模型\\n\\t\\t\\t3.部署资源表 ACT_DMN_DEPLOYMENT_RESOURCE\\n\\t\\t\\t\\t规则引擎相关的资源，例如决策文件、图片\\n\\n第四章 Activiti流程引擎配置\\n\\t1.流程引擎对象\\n\\t\\tProcessEngineConfiguration对象代表一个Activiti流程引擎的全部配置\\n\\t\\t\\t该对象的静态方法读取配置文件，生成实例\\n\\t\\t1.\\n\\t\\t/**\\n\\t\\t * 使用createProcessEngineConfigurationFromResourceDefault方法\\n\\t\\t * 创建ProcessEngineConfiguration实例\\n\\t\\t * @author Administrator\\n\\t\\t *\\n\\t\\t */\\n\\t\\t//使用Activiti默认的方式创建ProcessEngineConfiguration\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResourceDefault();\\t\\n\\t\\t2.\\n\\t\\t/**\\n\\t\\t * 使用CreateProcessEngineConfigurationFromResource方法创建ProcessEngineConfiguration实例\\n\\t\\t * \\n\\t\\t * @author Administrator\\n\\t\\t * \\n\\t\\t */\\n\\t\\t// 指定配置文件创建ProcessEngineConfiguration\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"my-activiti1.xml\\");\\n\\t\\t3.\\n\\t\\t/**\\n\\t\\t * 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration\\n\\t\\t * \\n\\t\\t * @author yangenxiong\\n\\t\\t * \\n\\t\\t */\\n\\t\\tFile file = new File(\\"resource/input-stream.xml\\");\\n\\t\\t// 得到文件输入流\\n\\t\\tInputStream fis = new FileInputStream(file);\\n\\t\\t// 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromInputStream(fis);\\n\\t\\t4.\\n\\t\\t/**\\n\\t\\t * 使用createStandaloneInMemProcessEngineConfiguration创建ProcessEngineConfiguration\\n\\t\\t * \\n\\t\\t * @author yangenxiong\\n\\t\\t * \\n\\t\\t */\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createStandaloneInMemProcessEngineConfiguration();\\n\\t\\t// 值为create-drop\\n\\t\\tSystem.out.println(config.getDatabaseSchemaUpdate());\\n\\t\\t// 值为jdbc:h2:mem:activiti\\n\\t\\tSystem.out.println(config.getJdbcUrl());\\n\\t\\t5.\\n\\t\\t/**\\n\\t\\t * 使用CreateStandaloneProcessEngineConfiguration方法创建ProcessEngineConfiguration\\n\\t\\t * \\n\\t\\t * @author yangenxiong\\n\\t\\t * \\n\\t\\t */\\n\\t\\t ProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createStandaloneProcessEngineConfiguration();\\n\\t\\t// 默认值为 false\\n\\t\\tSystem.out.println(config.getDatabaseSchemaUpdate());\\n\\t\\t// 默认值为 jdbc:h2:tcp://localhost/~/activiti\\n\\t\\tSystem.out.println(config.getJdbcUrl());\\n\\t2.数据源配置\\n\\t3.其他属性配置\\n\\t\\thistory配置\\n\\t\\tasyncExecutorActivate配置\\n\\t\\t邮件服务器配置\\n\\t示例：\\n\\t\\t************************************************************************************\\n\\t\\t&lt;!-- 将databaseType设置为oracle --&gt;\\n\\t\\t&lt;bean id=\\"processEngineConfiguration\\"\\n\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"create-drop\\"/&gt;\\n\\t\\t\\t&lt;property name=\\"databaseType\\" value=\\"oracle\\"/&gt;\\n\\t\\t&lt;/bean&gt;\\n\\t\\t// 读取Activiti配置\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"database-type.xml\\");\\n\\t\\t// 启动Activiti\\n\\t\\tProcessEngine engine = config.buildProcessEngine();\\n\\t\\t// 关闭流程引擎\\n\\t\\tengine.close();\\n\\t\\t************************************************************************************\\n\\t\\t&lt;!-- 使用C3P0数据源 --&gt;\\n\\t\\t&lt;bean id=\\"dataSource\\" class=\\"com.mchange.v2.c3p0.ComboPooledDataSource\\"&gt;\\n\\t\\t\\t&lt;property name=\\"driverClass\\" value=\\"com.mysql.jdbc.Driver\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"user\\" value=\\"root\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"password\\" value=\\"123456\\" /&gt;\\n\\t\\t&lt;/bean&gt;\\n\\n\\t\\t&lt;bean id=\\"processEngineConfiguration\\"\\n\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt;\\n\\t\\t\\t&lt;property name=\\"dataSource\\" ref=\\"dataSource\\" /&gt;\\n\\t\\t&lt;/bean&gt;\\n\\t\\t// 读取c3p0-config.xml配置\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"config/c3p0-config.xml\\");\\n\\t\\t// 能正常输出，即完成配置\\n\\t\\tDataSource ds = config.getDataSource();\\n\\t\\t// 查询数据库元信息，如果能查询则表示连接成功\\n\\t\\tds.getConnection().getMetaData();\\n\\t\\t// 结果为 com.mchange.v2.c3p0.ComboPooledDataSource\\n\\t\\tSystem.out.println(config.getDataSource().getClass().getName());\\n\\t\\t\\n\\t\\t或者\\n\\n\\t\\t&lt;!-- 不初始化任何属性 --&gt;\\n\\t\\t&lt;bean id=\\"processEngineConfiguration\\"\\n\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt;\\n\\t\\t&lt;/bean&gt;\\n\\t\\t// 创建C3P0数据源\\n\\t\\tComboPooledDataSource ds = new ComboPooledDataSource();\\n\\t\\t// 设置JDBC连接的各个属性\\n\\t\\tds.setUser(\\"root\\");\\n\\t\\tds.setPassword(\\"123456\\");\\n\\t\\tds.setJdbcUrl(\\"jdbc:mysql://localhost:3306/act\\");\\n\\t\\tds.setDriverClass(\\"com.mysql.jdbc.Driver\\");\\n\\t\\t// 验证是否连接成功\\n\\t\\tds.getConnection().getMetaData();\\n\\n\\t\\t// 读取Activiti配置文件\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"config/c3p0-coding.xml\\");\\n\\t\\t// 为ProcessEngineConfiguration设置dataSource属性\\n\\t\\tconfig.setDataSource(ds);\\n\\t\\tSystem.out.println(config.getDataSource());\\n\\t\\t************************************************************************************\\n\\t\\t&lt;!-- 将databaseSchemaUpdate设置为false --&gt;\\n\\t\\t&lt;bean id=\\"processEngineConfiguration\\"\\n\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"false\\"/&gt;\\n\\t\\t&lt;/bean&gt;\\n\\t\\t//读取Activiti配置\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"schemaUpdate-false.xml\\");\\n\\t\\t//启动Activiti\\n\\t\\tconfig.buildProcessEngine();\\n\\t\\t************************************************************************************\\n\\t\\t&lt;!-- 将databaseSchemaUpdate设置为true --&gt;\\n\\t\\t&lt;bean id=\\"processEngineConfiguration\\"\\n\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"true\\"/&gt;\\n\\t\\t&lt;/bean&gt;\\n\\t\\t//读取Activiti配置\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"schemaUpdate-true.xml\\");\\n\\t\\tSystem.out.println(config.getClass().getName());\\n\\t\\t//启动Activiti\\n\\t\\tconfig.buildProcessEngine();\\n\\t\\t************************************************************************************\\n\\t\\t&lt;!-- 将databaseSchemaUpdate设置为create-drop --&gt;\\n\\t\\t&lt;bean id=\\"processEngineConfiguration\\"\\n\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"create-drop\\"/&gt;\\n\\t\\t&lt;/bean&gt;\\n\\t\\t// 读取Activiti配置\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"schemaUpdate-create-drop.xml\\");\\n\\t\\t// 启动Activiti\\n\\t\\tProcessEngine engine = config.buildProcessEngine();\\n\\t\\t// 关闭流程引擎\\n\\t\\tengine.close();\\n\\t\\t************************************************************************************\\n\\t\\t&lt;bean id=\\"processEngineConfiguration\\"\\n\\t\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"databaseSchemaUpdate\\" value=\\"true\\"/&gt;\\n\\t\\t\\t&lt;property name=\\"history\\" value=\\"activity\\"/&gt;  activiti/audit/full/none/\\n\\t\\t&lt;/bean&gt;\\n\\t\\t// 读取Activiti配置\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"history-activity.xml\\");\\t\\t\\n\\t\\t//初始化流程引擎\\n\\t\\tProcessEngine engine = config.buildProcessEngine();\\n\\t\\t//得到流程存储对象\\n\\t\\tRepositoryService repositoryService = engine.getRepositoryService();\\n\\t\\t//部署流程文件\\n\\t\\trepositoryService.createDeployment().addClasspathResource(\\"bpmn/history.bpmn20.xml\\").deploy();\\n\\t\\t//得到运行服务对象\\n\\t\\tRuntimeService runtimeService = engine.getRuntimeService();\\n\\t\\t//创建参数\\n\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();\\n\\t\\tvars.put(\\"day\\", 10);\\n\\t\\t//开始流程\\n\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\"vacationProcess\\", vars);\\n\\t\\tSystem.exit(0);\\n\\t\\t************************************************************************************\\n\\t\\t&lt;bean id=\\"processEngineConfiguration\\"\\n\\t\\tclass=\\"org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration\\"&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUrl\\" value=\\"jdbc:mysql://localhost:3306/act\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcDriver\\" value=\\"com.mysql.jdbc.Driver\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcUsername\\" value=\\"root\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"jdbcPassword\\" value=\\"123456\\" /&gt;\\n\\t\\t\\t&lt;property name=\\"mailServerHost\\" value=\\"smtp.163.com\\"&gt;&lt;/property&gt;\\n\\t\\t\\t&lt;property name=\\"mailServerPort\\" value=\\"25\\"&gt;&lt;/property&gt;\\n\\t\\t\\t&lt;property name=\\"mailServerDefaultFrom\\" value=\\"yangenxiong@163.com\\"&gt;&lt;/property&gt;\\n\\t\\t\\t&lt;property name=\\"mailServerUsername\\" value=\\"yangenxiong@163.com\\"&gt;&lt;/property&gt;\\n\\t\\t\\t&lt;property name=\\"mailServerPassword\\" value=\\"123456\\"&gt;&lt;/property&gt;\\n\\t\\t&lt;/bean&gt;\\n\\t\\t************************************************************************************\\n\\n\\t\\t************************************************************************************\\n\\t4.ProcessEngineCofiguration bean\\n\\t\\t继承接口ProcessEngineCofiguration或ProcessEngineCofigurationImpl，\\n\\t\\t自定义引擎启动类。\\n\\t5.Activiti的命令拦截器\\n\\t\\t未学习\\n\\n第五章 流程引擎的创建\\n\\t和汽车发动机启动很像\\n\\t1.ProcessEngineConfiguration的buildProcessEngine方法创建\\n\\t先读后配，相当于配置检查\\n\\t\\t// 读取配置\\n\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration\\n\\t\\t\\t\\t.createProcessEngineConfigurationFromResource(\\"build_engine.xml\\");\\n\\t\\t// 创建ProcessEngine\\n\\t\\tProcessEngine engine = config.buildProcessEngine();\\n\\t2.ProcessEngines对象\\n\\t\\t调用ProcessEngines的init方法\\n\\t\\t\\t// 初始化ProcessEngines的Map,\\n\\t\\t\\t// 再加载Activiti默认的配置文件（classpath下的activiti.cfg.xml文件）\\n\\t\\t\\t// 如果与Spring整合，则读取classpath下的activiti-context.xml文件\\n\\n\\t\\t\\tProcessEngines.init();\\n\\n\\t\\t\\t// 得到ProcessEngines的Map\\n\\t\\t\\tMap&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines();\\n\\t\\t\\tSystem.out.println(engines.size());\\n\\t\\t\\tSystem.out.println(engines.get(\\"default\\"));\\n\\t\\t注册与注销ProcessEngine实例\\n\\t\\t\\t//读取自定义配置\\n\\t\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration.\\n\\t\\t\\t\\t\\tcreateProcessEngineConfigurationFromResource(\\"register.xml\\");\\n\\t\\t\\t//创建ProcessEngine实例\\n\\t\\t\\tProcessEngine engine = config.buildProcessEngine();\\n\\t\\t\\t//获取ProcessEngine的Map\\n\\t\\t\\tMap&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines();\\n\\t\\t\\tSystem.out.println(\\"注册后引擎数：\\" + engines.size());\\n\\t\\t\\t//注销ProcessEngine实例\\n\\t\\t\\tProcessEngines.unregister( engine);\\n\\t\\t\\tSystem.out.println(\\"调用unregister后引擎数：\\" + engines.size());\\n\\t\\t使用ProcessEngines的retry方法\\n\\t\\t\\t//得到资源文件的URL实例\\n\\t\\t\\tClassLoader cl = Retry.class.getClassLoader();\\n\\t\\t\\tURL url = cl.getResource(\\"retry.xml\\");\\n\\t\\t\\t//调用retry方法创建ProcessEngine实例\\n\\t\\t\\tProcessEngineInfo info = ProcessEngines.retry(url.toString());\\n\\t\\t\\t//得到流程实例保存对象\\n\\t\\t\\tMap&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines();\\n\\t\\t\\tSystem.out.println(\\"调用retry方法后引擎数：\\" + engines.size());\\t\\n\\t\\t使用ProcessEngines的destroy方法\\n\\t\\t\\t// 进行初始化并且返回默认的ProcessEngine实例\\n\\t\\t\\tProcessEngine engine = ProcessEngines.getDefaultProcessEngine();\\n\\t\\t\\tSystem.out.println(\\"调用getDefaultProcessEngine方法后引擎数量：\\"\\n\\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size());\\n\\t\\t\\t// 调用销毁方法\\n\\t\\t\\tProcessEngines.destroy();\\n\\t\\t\\t// 最终结果为0\\n\\t\\t\\tSystem.out.println(\\"调用destroy方法后引擎数量：\\"\\n\\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size());\\n\\n\\t\\t\\t// 得到资源文件的URL实例\\n\\t\\t\\tClassLoader cl = Destroy.class.getClassLoader();\\n\\t\\t\\tURL url = cl.getResource(\\"activiti.cfg.xml\\");\\n\\t\\t\\t// 调用retry方法创建ProcessEngine实例\\n\\t\\t\\tProcessEngines.retry(url.toString());\\n\\t\\t\\tSystem.out.println(\\"只调用 retry方法后引擎数量：\\"\\n\\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size());\\n\\t\\t\\t// 调用销毁方法，没有效果\\n\\t\\t\\tProcessEngines.destroy();\\n\\t\\t\\tSystem.out.println(\\"调用destory无效果，引擎数量：\\"\\n\\t\\t\\t\\t\\t+ ProcessEngines.getProcessEngines().size());\\n\\t3.ProcessEngine对象\\n\\t\\t一个ProcessEngine实例代表一个流程引擎，实例中保存着各个服务组件的实例，根据这些服务组件，可以操作流程实例\\n\\t\\t、任务、系统角色等数据。\\n\\n\\t\\t1.服务组件：\\n\\t\\t\\t好像J2EE的Service层，通过getXXXService方法得到实例\\n\\t\\t\\t包含的实例：\\n\\t\\t\\t\\tRespositoryService:提供一系列管理流程定义和流程部署的API\\n\\t\\t\\t\\tRuntimeService:在流程运行时对流程实例进行管理与控制\\n\\t\\t\\t\\tTaskService:对流程任务进行管理，例如任务提醒、任务完成和创建任务等\\n\\t\\t\\t\\tIdentityService:提供对流程角色数据进行管理的API，这些角色数据包括用户组、用户及它们之间的关系\\n\\t\\t\\t\\tManagementService:提供对流程引擎进行管理和维护的服务\\n\\t\\t\\t\\tHistoryService:对流程的历史数据进行操作，包括查询、删除这些历史数据\\n\\t\\t\\t\\tDynamicBpmnService:使用该服务，可以不需要重新部署流程模型，就可以实现对流程模型的修改\\n\\t\\t2.关闭流程引擎：\\n\\t\\t\\tengine.close();\\n\\t\\t\\t根据配置中databaseSchemeUpdate属性判断是否删除数据库\\t\\n\\t\\t3.流程引擎名称:\\n\\t\\t\\t默认名称时default\\n\\t\\t\\t使用config.setProcessEngineName(\\"test\\");\\n\\t\\t\\t示例：\\n\\t\\t\\t\\tProcessEngineConfiguration config = ProcessEngineConfiguration.\\n\\t\\t\\t\\tcreateProcessEngineConfigurationFromResource(\\"name.xml\\");\\n\\t\\t\\t\\t//设置流程引擎名称\\n\\t\\t\\t\\tconfig.setProcessEngineName(\\"test\\");\\n\\t\\t\\t\\tProcessEngine engine = config.buildProcessEngine();\\n\\t\\t\\t\\t//根据名称查询流程引擎\\n\\t\\t\\t\\tProcessEngine engineTest = ProcessEngines.getProcessEngine(\\"test\\");\\n\\t\\t\\t\\tSystem.out.println(\\"创建的引擎实例：\\" + engine);\\n\\t\\t\\t\\tSystem.out.println(\\"查询的引擎实例：\\" + engineTest);\\n\\t\\n第六章 用户组与用户\\n\\t1.用户组管理：\\n\\t\\t1.Group对象：\\n\\t\\t\\t通过业务层组件去创建\\n\\t\\t\\tIdentityService\\n\\t\\t2.创建用户组：\\n\\t\\t\\tid,name,type 然后保存，\\n\\t\\t\\t\\t技巧：group.setId(null) 可以让数据库自动生成主键id\\n\\t\\t3.修改用户组：\\n\\t\\t\\tsetter\\n\\t\\t4.删除用户组：\\n\\t\\t\\tdeleteGroup(id)\\n\\t2.Activiti数据查询：\\n\\t\\tActiviti提供了一套数据查询API供开发者使用，可以使用各个服务组件的createXXXQuery方法来获取这些查询对象。\\n\\t\\t\\n\\t\\t1.查询对象：\\n\\t\\t\\tQuery是多有查询对象的父接口，提供了很多基础的方法：\\n\\t\\t\\t\\tasc\\t设置查询结果的排序方式为升序\\n\\t\\t\\t\\tcount\\t计算查询结果的数据量\\n\\t\\t\\t\\tdesc\\t降序\\n\\t\\t\\t\\tlist\\t封装查询结果，返回相应类型的集合\\n\\t\\t\\t\\tlistPage\\t分页返回查询结果\\n\\t\\t\\t\\tsingleResult\\t查询单条符合条件的数据，没有返回null,多条抛出异常\\n\\t\\t2.list方法：\\n\\t\\t\\t// 使用list方法查询全部的部署数据\\n\\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery().list();\\n\\t\\t3.listPage方法：\\n\\t\\t\\t//调用listPage方法，从索引为2的记录开始，查询3条记录\\n\\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery().listPage(2, 3);\\n\\t\\t4.count方法：\\n\\t\\t\\t// 使用list方法查询全部的部署数据\\n\\t\\t\\tlong size = identityService.createGroupQuery().count();\\n\\t\\t5.排序方法：\\n\\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery().orderByGroupName().asc().list();\\n\\t\\t6.ID排序问题：\\n\\t\\t\\t主键均是字符型，排序要额外处理\\n\\t\\t7.多字段排序：\\n\\t\\t\\tList&lt;Group&gt; datas = identityService.createGroupQuery()\\n\\t\\t\\t\\t.orderByGroupId().desc()\\n\\t\\t\\t\\t.orderByGroupName().asc().list();\\n\\t\\t8.singleResult方法\\n\\t\\t9.用户组数据查询：\\n\\t\\t\\t相应的数据查询对象除了拥有基类的方法，还有自己的方法：\\n\\t\\t\\t// groupId方法\\n\\t\\t\\tGroup groupA = identityService.createGroupQuery().groupId(aId).singleResult();\\n\\t\\t\\t\\n\\t\\t\\t// groupName方法\\n\\t\\t\\tGroup groupB = identityService.createGroupQuery().groupName(\\"GroupB\\").singleResult();\\n\\t\\t\\t\\n\\t\\t\\t// groupType方法\\n\\t\\t\\tGroup groupC = identityService.createGroupQuery().groupType(\\"typeC\\").singleResult();\\n\\t\\t\\t\\n\\t\\t\\t// groupNameLike方法\\n\\t\\t\\tList&lt;Group&gt; groups = identityService.createGroupQuery().groupNameLike(\\"%group%\\").list();\\n\\n\\t\\t10.原生SQL查询：\\n\\t\\t\\tcreateNativeGroupQuery()\\n\\t\\t\\tgroups = identityService.createNativeGroupQuery()\\n\\t\\t\\t\\t.sql(\\"select * from ACT_ID_GROUP where NAME_ = #{name}\\")\\n\\t\\t\\t\\t.parameter(\\"name\\", \\"GroupD\\").list();\\n\\t\\n\\t3.用户管理：\\n\\t\\tUser对象\\n\\t\\t添加用户 newUser  saveUser\\n\\t\\t修改用户\\n\\t\\t删除用户\\n\\t\\t验证用户密码 checkPassWord  是用户密码，不是用户的账号密码\\n\\t\\t用户数据查询 UserQuery对象\\n\\t\\t设置认证用户 setAuthenticatedUserId 多线程中使用\\n\\t4.用户信息管理：\\n\\t\\t添加和删除用户信息：\\n\\t\\t\\t用为ACT_ID_INFO数据结构是key-value，没有查询对象,通过id+key可以查到记录\\n\\t\\t\\tsetUserInfo(String userId,String key,String value)\\n\\t\\t\\tdeleteUserInfo(String userId,String key)\\n\\t\\t\\t示例：\\n\\t\\t\\t\\t// 创建用户\\n\\t\\t\\t\\tcreatUser(identityService, id, \\"angus\\", \\"young\\", \\"yangenxiong@163.com\\", \\"abc\\");\\n\\t\\t\\t\\t// 创建一个用户信息\\n\\t\\t\\t\\tidentityService.setUserInfo(id, \\"age\\", \\"30\\");\\n\\t\\t\\t\\t// 创建第二个用户信息\\n\\t\\t\\t\\tidentityService.setUserInfo(id, \\"weight\\", \\"60KG\\");\\n\\t\\t\\t\\t// 删除用户年龄信息\\n\\t\\t\\t\\tidentityService.deleteUserInfo(id, \\"age\\");\\n\\t\\t查询用户信息：\\n\\t\\t\\tgetUserInfo(String userId,String key)\\n\\t\\t设置用户图片：\\n\\t\\t\\tsetUserPicture\\n\\t\\t\\tgetUserPicture\\n\\n\\t\\t\\t先转为byte array，再存储，图片存放再资源表中，用户信息表存的是图片在的资源表的id\\n\\t\\t\\t\\t// 读取图片并转换为byte数组\\n\\t\\t\\t\\tFileInputStream fis = new FileInputStream(new File(\\"resource/artifact/picture.png\\"));\\t\\t\\n\\t\\t\\t\\tBufferedImage img = ImageIO.read(fis);\\n\\t\\t\\t\\tByteArrayOutputStream output = new ByteArrayOutputStream();\\n\\t\\t\\t\\tImageIO.write(img, \\"png\\", output);\\n\\t\\t\\t\\t//获取图片的byte数组\\n\\t\\t\\t\\tbyte[] picArray = output.toByteArray();\\t\\t\\n\\t\\t\\t\\t// 创建Picture实例\\n\\t\\t\\t\\tPicture picture = new Picture(picArray, \\"angus image\\");\\n\\t\\t\\t\\t// 为用户设置图片\\n\\t\\t\\t\\tidentityService.setUserPicture(id, picture);\\t\\n\\t5.用户组和用户的关系：\\n\\t\\t多对多，中间表ACT_ID_MEMBERSHIP\\n\\n\\t\\t绑定关系：\\n\\t\\t\\t// 绑定关系\\n\\t\\t\\tidentityService.createMembership(user.getId(), group.getId());\\n\\t\\t接触绑定：\\n\\t\\t\\t// 删除绑定关系\\n\\t\\t\\tidentityService.deleteMembership(user.getId(), group.getId());\\n\\t\\t查询用户组下的用户：\\n\\t\\t\\t使用用户的查询对象  memberOfGroup(group.getId())\\n\\t\\t\\t\\tList&lt;User&gt; users = identityService.createUserQuery()\\n\\t\\t\\t\\t.memberOfGroup(group.getId()).list();\\n\\t\\t查询用户所属的用户组：\\n\\t\\t\\t使用用户组的查询对象 groupMenber(user.getId())\\n\\t\\t\\t\\tList&lt;Group&gt; groups = identityService.createGroupQuery()\\n\\t\\t\\t\\t\\t\\t.groupMember(user.getId()).list();\\n\\t\\n第七章 流程存储\\n\\tRepositoryService 主要对Activiti中的流程存储的相关数据进行操作，这些操作包括对流程存储数据的管理、\\n\\t\\t流程部署以及对流程的基本操作等。\\n\\t1.流程文件部署：\\n\\t\\tRepositoryService负责对流程文件的部署以及流程定义的管理\\n\\t\\t\\n\\t\\t1.Deployment对象：\\n\\t\\t\\t只提供getter方法\\n\\t\\t2.DeploymentBuilder对象：\\n\\t\\t\\tDeploymentBuilder builder = repositoryService.createDeployment();\\n\\t\\t3.添加输入流资源：\\n\\t\\t\\tbuilder.addInputStream(\\"inputa\\",a)\\n\\t\\t\\t\\t// 第一个资源输入流\\n\\t\\t\\t\\tInputStream is1 = new FileInputStream(new File(\\n\\t\\t\\t\\t\\t\\t\\"resource/artifact/flow_inputstream1.png\\"));\\n\\t\\t\\t\\t// 第二个资源输入流\\n\\t\\t\\t\\tInputStream is2 = new FileInputStream(new File(\\n\\t\\t\\t\\t\\t\\t\\"resource/artifact/flow_inputstream1.png\\"));\\n\\t\\t\\t\\t// 创建DeploymentBuilder实例\\n\\t\\t\\t\\tDeploymentBuilder builder = repositoryService.createDeployment();\\n\\t\\t\\t\\t// 为DeploymentBuilder添加资源输入流\\n\\t\\t\\t\\tbuilder.addInputStream(\\"inputA\\", is1);\\n\\t\\t\\t\\tbuilder.addInputStream(\\"inputB\\", is2);\\n\\t\\t\\t\\t// 执行部署方法\\n\\t\\t\\t\\tbuilder.deploy();\\n\\n\\t\\t4.添加classpath资源：\\n\\t\\t\\tbuilder.addClasspathResource(\\"artifact/classpath.png\\")\\n\\t\\t\\t\\t//添加classpath下的资源\\n\\t\\t\\t\\tbuilder.addClasspathResource(\\"artifact/classpath.png\\");\\n\\t\\t\\t\\t//执行部署（写入到数据库中）\\n\\t\\t\\t\\tbuilder.deploy();\\n\\t\\t5.添加字符串资源：\\n\\t\\t\\t//添加String资源\\n\\t\\t\\tbuilder.addString(\\"test\\", \\"this is string method\\");\\n\\t\\t\\t//执行部署（写入到数据库中）\\n\\t\\t\\tbuilder.deploy();\\n\\t\\t6.添加压缩包资源：\\n\\t\\t\\t//获取zip文件的输入流\\n\\t\\t\\tFileInputStream fis = new FileInputStream(new File(\\"resource/artifact/ZipInputStream.zip\\"));\\n\\t\\t\\t//读取zip文件，创建ZipInputStream对象\\n\\t\\t\\tZipInputStream zi = new ZipInputStream(fis);\\n\\t\\t\\t//添加Zip压缩包资源\\n\\t\\t\\tbuilder.addZipInputStream(zi);\\n\\t\\t\\t//执行部署（写入到数据库中）\\n\\t\\t\\tbuilder.deploy();\\n\\t\\t7.添加BPMN模型资源：\\n\\t\\t\\taddBpmnModel \\n\\t\\t\\taddBytes\\n\\t\\t8.修改部署信息：\\n\\t\\t\\t//设置各个属性\\n\\t\\t\\tbuilder.name(\\"crazyit\\").tenantId(\\"tenanId\\").key(\\"myKey\\").category(\\"myCategory\\");\\n\\t\\t9.过滤重复部署：\\n\\t\\t\\t重复部署不再写入数据库，若不同，添加方法后，仍会修改数据库\\n\\t\\t\\tbuilderB.enableDuplicateFiltering();\\n\\t\\t10.取消部署时的验证：\\n\\t\\t\\t默认情况下，在部署时会对流程的XML文件进行验证，包括验证是否符合BPMN规范、定义的流程是否可执行。\\n\\t\\t\\t\\tbuilderB.addClasspathResource(\\"bpmn/bpmnError.bpmn\\")\\n\\t\\t\\t\\t.disableBpmnValidation().deploy();\\n\\t2.流程定义的管理：\\n\\t\\t中止流程定义、激活流程定义和设置流程权限\\n\\t\\t\\n\\t\\t1.ProcessDefinition对象：\\n\\t\\t\\t有很多getter方法\\n\\t\\t2.流程部署：\\n\\t\\t\\t将流程的描述文件写入数据库\\n\\t\\t3.流程图部署：\\n\\t\\t4.流程图自动生成：\\n\\t\\t\\t不自动生成 ，在配置文件中加&lt;property name=\\"createDiagramOnDeploy\\" value=\\"false\\" /&gt;\\n\\t\\t5.中止与激活流程定义：\\n\\t\\t6.流程定义缓存配置：\\n\\t\\t7.自定义缓存\\n\\t\\t\\t自定义Java类，维护map\\n\\t3.流程定义的权限：\\n\\t\\tactiviti没有拦截检查，完全由开发者定义用户权限，然后根据表来查询\\n\\t\\t1.设置流程定义的用户权限：\\n\\t\\t\\trepositoryService.addCandidateStarterUser(def.getId(), \\"user1\\");\\n\\t\\t2.设置流程定义的用户权限：\\n\\t\\t\\trepositoryService.addCandidateStarterGroup(def.getId(), \\"group1\\");\\n\\t\\t3.IdentityLink对象：\\n\\t\\t\\t对应表 ACT_RU_IDENTITYLINK\\n\\t\\t4.查询权限数据：\\n\\t\\t\\t// 根据用户查询用权限的流程定义\\n\\t\\t\\tList&lt;ProcessDefinition&gt; defs = repositoryService\\n\\t\\t\\t\\t\\t.createProcessDefinitionQuery().startableByUser(\\"user1\\").list();\\n\\n\\t\\t\\t// 根据流程定义查询用户组数据\\n\\t\\t\\tList&lt;Group&gt; groups = identityService.createGroupQuery()\\n\\t\\t\\t\\t\\t.potentialStarter(def.getId()).list();\\n\\t\\t\\t\\n\\t\\t\\t// 根据流程定义查询用户数据\\n\\t\\t\\tList&lt;User&gt; users = identityService.createUserQuery()\\n\\t\\t\\t\\t\\t.potentialStarter(def.getId()).list();\\n\\t\\t\\t\\n\\t\\t\\t// 根据流程定义查询全部的 IdentityLink（ACT_RU_IDENTITYLINK表） 数据\\n\\t\\t\\tList&lt;IdentityLink&gt; links = repositoryService\\n\\t\\t\\t\\t\\t.getIdentityLinksForProcessDefinition(def.getId());\\t\\n\\t4.RepositoryService数据查询与删除：\\n\\t\\t1.查询部署资源\\n\\t\\t\\t// 查询资源文件\\n\\t\\t\\tInputStream is = repositoryService.getResourceAsStream(dep.getId(), \\n\\t\\t\\t\\t\\"artifact/GetResource.txt\\");\\n\\t\\t\\t// 读取输入流\\n\\t\\t\\tint count = is.available();\\n\\t\\t\\tbyte[] contents = new byte[count];\\n\\t\\t\\tis.read(contents);\\n\\t\\t\\tString result = new String(contents);\\n\\t\\t2.查询流程文件\\n\\t\\t3.查询流程图\\n\\t\\t4.查询部署的资源名称\\n\\t\\t5.删除部署资源\\n\\t\\t6.DeploymentQuery对象\\n\\t\\t7.ProcessDefinitionQuery对象\\n\\n第八章 流程任务管理\\n\\t1.任务的创建和删除：\\n\\t\\t1.Task接口：\\n\\t\\t\\tACT_RU_TASK\\n\\t\\t2.创建与保存Task实例：\\n\\t\\t\\tnewTask\\n\\t\\t\\tsaveTask\\n\\t\\t3.删除任务：\\n\\t\\t\\t多个删除方法\\n\\t2.任务权限：\\n\\t\\t1.设置候选用户组\\n\\t\\t2.设置候选用户\\n\\t\\t3.权限数据查询\\n\\t\\t\\t用户组和用户的Query对象没有提供根据任务ID查询用户组和用户的方法\\n\\t\\t4.设置任务持有人：\\n\\t\\t\\tsetOwner\\n\\t\\t5.设置任务代理人\\n\\t\\t\\tsetAssignee\\n\\t\\t6.添加任务权限数据\\n\\t\\t7.删除用户组权限\\n\\t\\t8.删除用户权限\\n\\t3.任务参数：\\n\\t\\t参数类型分为流程参数和任务参数\\n\\t\\t1.基本类型参数设置：\\n\\t\\t\\tsetVariable\\n\\t\\t2.序列化参数：\\n\\t\\t\\t对象必须实现序列化接口\\n\\t\\t3.获取参数\\n\\t\\t\\tgetVariable(taskId,argName)\\n\\t\\t4.参数作用域：\\n\\t\\t\\tsetVariableLocal 局部参数\\n\\t\\t\\tgetVariableLocal \\n\\t\\t5.设置多个参数：\\n\\t\\t\\tsetVariables\\n\\t\\t\\tsetVariablesLocal\\t\\n\\t\\t\\t\\t//初始化参数\\n\\t\\t\\t\\tMap&lt;String,Object&gt; vars = new HashMap&lt;String, Object&gt;();\\n\\t\\t\\t\\tvars.put(\\"days\\", 10);\\n\\t\\t\\t\\tvars.put(\\"target\\", \\"欧洲\\");\\n\\t\\t\\t\\ttaskService.setVariables(task1.getId(), vars);\\n\\t\\t\\t或使用序列化对象\\n\\t\\t6.数据对象：\\n\\t\\t\\tBPMN文件中的dataObject元素\\n\\t\\t\\t\\tMap&lt;String, DataObject&gt; objs = taskService.getDataObjects(task.getId());\\n\\t\\n\\t4.任务附件管理：\\n\\t\\t1.Attachment对象：\\n\\t\\t2.创建任务附件：\\n\\t\\t\\t// 设置任务附件\\n\\t\\t\\ttaskService.createAttachment(\\"web url\\", task.getId(), pi.getId(), \\"163.com\\", \\n\\t\\t\\t\\t\\t\\"163 web page\\", \\"http://www.163.com\\");\\n\\t\\t\\t// 创建图片输入流\\n\\t\\t\\tInputStream is = new FileInputStream(new File(\\"resource/artifact/result.png\\"));\\n\\t\\t\\t// 设置输入流为任务附件\\n\\t\\t\\ttaskService.createAttachment(\\"web url\\", task.getId(), pi.getId(), \\"163.com\\", \\n\\t\\t\\t\\t\\t\\"163 web page\\", is);\\n\\t\\t3.附件查询：\\n\\t\\t4.删除附件\\n\\t5.任务评论和事件记录：\\n\\t\\t1.Comment对象:\\n\\t\\t2.新增任务评论\\n\\t\\t\\taddComment\\n\\t\\t3.事件的记录\\n\\t\\t4.数据查询\\n\\t6.任务声明与完成：\\n\\t\\t1.任务声明：\\n\\t\\t\\tclaim\\n\\t\\t2.任务完成：\\n\\t\\t\\tcomplete\\n\\n第九章 流程控制\\n\\tTaskService主要用于任务管理，包括任务操作、任务数据管理等\\n\\tIdentityService主要用于管理流程的身份数据\\n\\tRepositoryService主要管理流程部署的数据\\n\\tRuntimeService主要用于管理流程在运行时产生的数据，以及对流程进行操作的API\\n\\n\\t流程运行时产生的数据包括流程参数、事件、流程 实例及执行流等\\n\\t流程的操作包括启动流程，流程前进等\\n\\n\\t1.流程实例与执行流：\\n\\t\\t1.流程实例与执行流的概念：\\n\\t\\t\\t启动一个流程时，会创建一个流程实例，每个流程实例至少有一个执行流\\n\\t\\t2.流程实例和执行流对象 ProcessInstance Execution\\n\\t2.启动流程:\\n\\t\\tRuntimeService提供流程启动的多个方法，命名均为startProcessInstanceByXXX\\n\\t\\t\\tXXX可以是流程定义的ID、Key【流程描述文件中process的id属性】和message\\n\\t\\t1.startProcessInstanceById方法：\\n\\t\\t2.startProcessInstanceByKey方法\\n\\t\\t3.startProcessInstanceByMessage方法\\n\\t\\t\\t消息事件\\n\\t3.流程参数：\\n\\t\\t1.设置与查询流程参数：\\n\\t\\t\\t设置需要传入执行流的ID\\n\\t\\t\\t查询需要传入执行流的ID和参数名称\\n\\t\\t\\tsetViriable\\n\\t\\t2.流程参数的作用域：\\n\\t\\t\\t局部只作用域执行流\\n\\t\\t\\tsetViriableLocal\\n\\t\\t3.其他设置参数的方法：\\n\\t\\t\\tsetViriables\\n\\t\\t\\tsetViriablesLocal\\n\\t4.流程操作：\\n\\t\\t启动流程、发送信号、中断流程、激活流程\\n\\t\\t1.流程触发：\\n\\t\\t\\t对于receiveTask等流程节点，使用trigger方法进行触发，使流程往前进行\\n\\t\\t2.触发信号事件：\\n\\t\\t\\t事件节点是在流程中记录事件发生的流程元素，BPMN2 规范中主要有两种类型的事件：\\n\\t\\t\\t\\t捕获事件Catching 需要信号才能前进 \\n\\t\\t\\t\\t\\t// 发送信号给事件，流程结束\\n\\t\\t\\t\\t\\truntimeService.signalEventReceived(\\"testSignal\\");\\n\\t\\t\\t\\t抛出事件Throwing\\n\\t\\t3.触发消息事件：\\n\\t\\t\\t消息事件节点\\n\\t\\t\\t\\t// 触发消息事件\\n\\t\\t\\t\\truntimeService.messageEventReceived(\\"testMsg\\", exe.getId());\\n\\t\\t4.中断和激活流程：\\n\\t\\t\\tSUSPENSION_STATE_字段保存中断状态，1为活跃，2为中断\\n\\t\\t\\t\\truntimeService.suspendProcessInstanceById(pi.getId());\\n\\t\\t\\t\\truntimeService.activateProcessInstanceById(pi.getId());\\n\\t\\t5.删除流程：\\n\\t\\t\\truntimeService.deleteProcessInstance(pi.getId(), \\"abc\\");\\n\\t5.流程数据查询：\\n\\t\\t1.执行流查询：\\n\\t\\t2.流程实例查询\\n\\t\\t\\t\\n第十章 历史数据管理和流程引擎管理\\n\\t历史数据：\\n\\t\\tactiviti删除的流程定义、流程任务和流程实例的数据\\n\\t\\t已经完成的流程实例以及相关数据\\n\\tManagementService可以查询引擎数据库信息、工作信息，直接对数据库操作\\n\\t\\n\\t1.历史数据管理：\\n\\t\\t1.历史流程实例查询：\\n\\t\\t\\thistoryService.createHistoricProcessInstanceQuery()\\n\\t\\t2.历史任务查询：\\n\\t\\t\\thistoryService.createHistoricTaskInstanceQuery()\\n\\t\\t3.历史行为查询：\\n\\t\\t\\thistoryService.createHistoricActivityInstanceQuery()\\n\\t\\t4.历史流程明细查询：\\n\\t\\t\\t流程的明细信息包括流程参数和流程表单属性\\n\\t\\t\\t\\t默认情况下，Activiti不会记录明细，当history配置为full级别时，才会记录\\n\\t\\t5.删除历史流程实例和历史任务：\\n\\t\\t\\thistoryService.deleteHistoricProcessInstance(pi1.getId());\\n\\t\\t\\t级联删除实例\\n\\t2.工作的产生：\\n\\t\\t异步工作时，用工作表保存任务\\n\\t\\t\\t一般的工作 ACT_RU_JOB\\n\\t\\t\\t定时中断任务 ACT_RU_SUSPENDED_JOB\\n\\t\\t\\t定时任务 ACT_RU_TIMER_JOB\\n\\t\\t1.异步任务产生的工作：\\n\\t\\t\\tJava Service Task主要用于在任务中调用外部的Java 类\\n\\t\\t2.定义中间事件产生的工作：\\n\\t\\t\\t定义了定时器相关的节点，会在某个定义的时间点上执行。\\n\\t\\t\\t可以加入定时器的节点：\\n\\t\\t\\t\\t中间事件节点、流程开始事件节点和边界事件节点\\n\\t\\t3.定义边界事件产生的工作：\\n\\t\\t4.定时开始事件产生的工作\\n\\t\\t5.流程抛出事件产生的工作\\n\\t\\t6.暂停工作的产生\\n\\t\\t7.无法执行的工作\\n\\t3.工作管理：\\n\\t\\tManagementService提供工作查询对象（对象返回job实例）\\n\\t\\t1.工作查询对象：\\t\\n\\t\\t\\t4个：\\n\\t\\t\\t\\tJobQuery\\n\\t\\t\\t\\tTimerJobQuery\\n\\t\\t\\t\\tSuspendedJobQuery\\n\\t\\t\\t\\tDeadLetterJobQuery\\n\\t\\t2.获取工作异常信息：\\n\\t\\t\\tgetXXXJobExceptionStacktrace\\n\\t\\t3.转移与删除工作：\\n\\t\\t\\tmove\\n\\t\\t\\tdelete\\n\\t4.数据库管理：\\n\\t\\t1.查询引擎属性\\n\\t\\t2.数据表信息查询\\n\\t\\t3.数据库操作\\n\\t\\t4.数据表查询\\n\\t\\n第十一章 流程事件\\n\\t要点：\\n\\t\\tBPMN的事件分类\\n\\t\\t各种流程的事件定义\\n\\t\\t开始事件的应用\\n\\t\\t结束事件的应用\\n\\t\\t边界事件的应用\\n\\t\\t中间事件的应用\\n\\t\\n\\t1.事件分类：\\n\\t\\t1.按照事件的位置分类：\\n\\t\\t\\t开始事件：表示流程开始的事件\\n\\t\\t\\t结束事件：表示流程结束的事件\\n\\t\\t\\t中间事件：出现在流程中，单独作为流程节点的事件\\n\\t\\t\\t边界事件：附属于某个流程节点（如子流程，流程任务）的事件\\n\\t\\t2.按照事件的特性分类：\\n\\t\\t\\tCatching事件\\n\\t\\t\\tThrowing事件\\n\\t\\t\\t\\t开始事件是Catching\\n\\t\\t\\t\\t结束事件是throwing\\n\\t\\t\\t\\t边界时catching\\n\\t\\t\\t\\t中间 都有\\n\\t2.事件定义：\\n\\t\\t与事件结合\\n\\t3.开始事件：\\n\\t\\t无指定开始事件\\n\\t\\t定时器开始事件\\n\\t\\t消息开始事件\\n\\t\\t错误开始事件\\n\\t4.结束事件：\\n\\t\\t无指定结束事件\\n\\t\\t错误结束事件\\n\\t\\t取消结束事件\\n\\t\\t中止结束事件\\n\\t5.边界事件\\n\\t\\t定时器\\n\\t\\t信号\\n\\t\\t错误\\n\\t\\t取消\\n\\t6.中间事件\\n\\t\\t定时器  捕获\\n\\t\\t信号 捕获 抛出\\n\\t\\t消息 抛出\\t\\n\\t7.补偿事件\\n\\t\\t补偿边界\\n\\t\\t\\t事务子流程取消触发\\n\\t\\t\\t补偿中间触发\\n\\t\\t补偿中间\\n\\n第十二章 流程任务\\n\\tBPMN任务概述\\n\\t用户任务的应用\\n\\t指定服务任务的行为\\n\\tWebService任务的应用\\n\\t脚本任务的应用\\n\\t任务监听器的使用\\n\\t流程监听器的使用\\n\\n\\t1.用户任务：\\n\\t\\t1.分配任务候选人\\n\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Task1\\"&gt;\\n\\t\\t\\t\\t&lt;potentialOwner&gt;\\n\\t\\t\\t\\t\\t&lt;resourceAssignmentExpression&gt;\\n\\t\\t\\t\\t\\t\\t&lt;formalExpression&gt;user(angus), group(management), boss\\n\\t\\t\\t\\t\\t\\t&lt;/formalExpression&gt;\\n\\t\\t\\t\\t\\t&lt;/resourceAssignmentExpression&gt;\\n\\t\\t\\t\\t&lt;/potentialOwner&gt;\\n\\t\\t\\t&lt;/userTask&gt;\\n\\t\\t2.分配任务代理人\\n\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Task 1\\"&gt;\\n\\t\\t\\t\\t&lt;humanPerformer&gt;\\n\\t\\t\\t\\t\\t&lt;resourceAssignmentExpression&gt;\\n\\t\\t\\t\\t\\t\\t&lt;formalExpression&gt;user1&lt;/formalExpression&gt;\\n\\t\\t\\t\\t\\t&lt;/resourceAssignmentExpression&gt;\\n\\t\\t\\t\\t&lt;/humanPerformer&gt;\\n\\t\\t\\t&lt;/userTask&gt;\\n\\t\\t3.权限分配扩展\\n\\t\\t\\t使用activiti扩展来分配任务的候选人和代理人\\n\\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Assignee\\" activiti:assignee=\\"user1\\"&gt;&lt;/userTask&gt;\\n\\t\\t\\t\\t&lt;userTask id=\\"usertask2\\" name=\\"Candidate User\\"\\n\\t\\t\\t\\t\\tactiviti:candidateUsers=\\"user1, user2\\"&gt;&lt;/userTask&gt;\\n\\t\\t\\t\\t&lt;userTask id=\\"usertask3\\" name=\\"Candidate Group\\"\\n\\t\\t\\t\\t\\tactiviti:candidateGroups=\\"group1,group2\\"&gt;&lt;/userTask&gt;\\n\\t\\t4.使用任务监听器进行权限分配\\n\\t\\t\\t设置监听类\\n\\t\\t\\t\\tpublic class UserTaskListener implements TaskListener {\\n\\n\\t\\t\\t\\t\\tpublic void notify(DelegateTask delegateTask) {\\n\\t\\t\\t\\t\\t\\tSystem.out.println(\\"使用任务监听器设置任务权限\\");\\n\\t\\t\\t\\t\\t\\tdelegateTask.setAssignee(\\"user1\\");\\n\\t\\t\\t\\t\\t\\tdelegateTask.addCandidateGroup(\\"group1\\");\\n\\t\\t\\t\\t\\t\\tdelegateTask.addCandidateUser(\\"user1\\");\\t\\t\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t配置监听器\\n\\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Assignee\\"&gt;\\n\\t\\t\\t\\t\\t&lt;extensionElements&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:taskListener event=\\"create\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.UserTaskListener\\"&gt;&lt;/activiti:taskListener&gt;\\n\\t\\t\\t\\t\\t&lt;/extensionElements&gt;\\n\\t\\t\\t\\t&lt;/userTask&gt;\\n\\t\\t5.使用JUEL分配权限\\n\\t\\t\\t\\n\\t\\t\\t&lt;userTask id=\\"usertask2\\" name=\\"Task 1\\" activiti:assignee=\\"${authService.getUserAssignee()}\\"&gt;&lt;/userTask&gt;\\n\\t\\t\\t&lt;userTask id=\\"usertask3\\" name=\\"Task 2\\" activiti:candidateUsers=\\"${authService.getCandidateUsers()}\\"&gt;&lt;/userTask&gt;\\n\\t\\t\\t&lt;userTask id=\\"usertask4\\" name=\\"Task 3\\" activiti:candidateGroups=\\"${authService.getCandidateGroups()}\\"&gt;&lt;/userTask&gt;\\n\\t\\t\\t&lt;userTask id=\\"usertask5\\" name=\\"Task 4\\" activiti:assignee=\\"${authService.lastUser}\\"&gt;&lt;/userTask&gt;\\n\\t\\t\\n\\t\\t\\t服务Bean\\n\\t\\t\\tpublic class AuthService implements Serializable {\\n\\t\\n\\t\\t\\t\\tprivate String lastUser = \\"angus\\";\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tpublic String getLastUser() {\\n\\t\\t\\t\\t\\treturn this.lastUser;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tpublic AuthService() {\\n\\t\\t\\t\\t\\tSystem.out.println(\\"create AuthService\\");\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t//使用方法为任务指定代理人\\n\\t\\t\\t\\tpublic String getUserAssignee() {\\n\\t\\t\\t\\t\\treturn \\"crazyit\\";\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//使用方法为任务指定候选人\\n\\t\\t\\t\\tpublic List&lt;String&gt; getCandidateUsers() {\\n\\t\\t\\t\\t\\tList&lt;String&gt; result = new ArrayList&lt;String&gt;();\\n\\t\\t\\t\\t\\tresult.add(\\"user1\\");\\n\\t\\t\\t\\t\\tresult.add(\\"user2\\");\\n\\t\\t\\t\\t\\treturn result;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//使用方法为任务指定候选用户组\\n\\t\\t\\t\\tpublic List&lt;String&gt; getCandidateGroups() {\\n\\t\\t\\t\\t\\tList&lt;String&gt; result = new ArrayList&lt;String&gt;();\\n\\t\\t\\t\\t\\tresult.add(\\"group1\\");\\n\\t\\t\\t\\t\\tresult.add(\\"group2\\");\\n\\t\\t\\t\\t\\treturn result;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t添加流程变量\\n\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();\\n\\t\\t\\tvars.put(\\"authService\\", new AuthService());\\n\\t\\t\\t// 启动流程\\n\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\"process1\\", vars);\\n\\t\\t\\t\\t\\t\\n\\t2.服务任务：\\n\\t\\tactiviti:class: JavaDelegate或ActivitiBehavior的实现类\\n\\t\\tactiviti:delegateExpression  \\n\\t\\tactiviti:expression 直接调用bean\\n\\t\\t\\n\\t\\t1.实现JavaDelegate\\n\\t\\t\\t\\n\\t\\t\\tpublic class MyJavaDelegate implements JavaDelegate, Serializable {\\n\\n\\t\\t\\t\\tpublic void execute(DelegateExecution execution) {\\n\\t\\t\\t\\t\\tSystem.out.println(\\" 实现  JavaDelegate 的  JavaSeviceTask: \\" + this);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\tactiviti:class方式：\\n\\n\\t\\t\\t\\t&lt;serviceTask id=\\"servicetask1\\" name=\\"Service Task 1\\"\\n\\t\\t\\t\\t\\tactiviti:class=\\"org.crazyit.activiti.MyJavaDelegate\\"&gt;&lt;/serviceTask&gt;\\n\\n\\t\\t\\tactiviti:delegateExpression 方式：\\n\\t\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();\\n\\t\\t\\t\\tvars.put(\\"myDelegate\\", new MyJavaDelegate());\\n\\t\\t\\t\\t// 启动流程\\n\\t\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\"process1\\", vars);\\n\\n\\t\\t\\t\\t&lt;serviceTask id=\\"servicetask1\\" name=\\"Service Task\\"\\n\\t\\t\\t\\t\\tactiviti:delegateExpression=\\"${myDelegate}\\"&gt;&lt;/serviceTask&gt;\\n\\t\\t\\t\\n\\t\\t2.使用普通的JavaBean\\n\\t\\t\\t调用Bean方法和属性\\n\\n\\t\\t\\tBean类：\\n\\t\\t\\t\\tpublic class MyJavaBean implements Serializable {\\n\\n\\t\\t\\t\\t\\tprivate String name = \\"crazyit\\";\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tpublic String getName() {\\n\\t\\t\\t\\t\\t\\treturn this.name;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tpublic void print(Execution exe) {\\n\\t\\t\\t\\t\\t\\tSystem.out.println(\\"使用Java Bean的print方法：\\" + exe.getId());\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\n\\t\\t\\tBPMN：\\n\\t\\t\\t\\t&lt;serviceTask id=\\"servicetask1\\" name=\\"Service Task\\"\\n\\t\\t\\t\\t\\tactiviti:expression=\\"${myBean.print(execution)}\\"&gt;&lt;/serviceTask&gt;\\n\\t\\t\\t\\t&lt;serviceTask id=\\"servicetask2\\" name=\\"Service Task\\"\\n\\t\\t\\t\\t\\tactiviti:expression=\\"${execution.setVariable(\'myName\', myBean.name)}\\"&gt;&lt;/serviceTask&gt;\\n\\t\\t\\t设置参数：\\n\\t\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();\\n\\t\\t\\t\\tvars.put(\\"myBean\\", new MyJavaBean());\\n\\t\\t\\t\\t// 启动流程\\n\\t\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\n\\t\\t\\t\\t\\t\\t\\"process1\\", vars);\\n\\t\\t3.Shell任务：\\n\\t\\t\\t执行cmd命令\\n\\t\\n\\t3.流程与任务监听器：\\n\\t\\t\\n\\t\\t任务监听器taskListener  设置event  =\\"create/complete/assignment\\"表示用户任务创建时调用监听器\\n\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"User Task\\"&gt;\\n\\t\\t\\t\\t&lt;extensionElements&gt;\\n\\t\\t\\t\\t\\t&lt;activiti:taskListener event=\\"create\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.PropertyConfigListener\\" /&gt;\\n\\t\\t\\t\\t&lt;/extensionElements&gt;\\n\\t\\t\\t&lt;/userTask&gt;\\n\\n\\t\\t\\t属性注入，往任务监听器中注入属性\\n\\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"User Task\\"&gt;\\n\\t\\t\\t\\t\\t&lt;extensionElements&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:taskListener event=\\"create\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.PropertyInjection\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"userName\\" stringValue=\\"crazyit\\" /&gt;\\n\\t\\t\\t\\t\\t\\t&lt;/activiti:taskListener&gt;\\n\\t\\t\\t\\t\\t&lt;/extensionElements&gt;\\n\\t\\t\\t\\t&lt;/userTask&gt;\\n\\t\\t\\t\\t监听器类：\\n\\t\\t\\t\\t\\tpublic class PropertyInjection implements TaskListener {\\n\\n\\t\\t\\t\\t\\t\\tprivate Expression userName;\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tpublic void setUserName(Expression userName) {\\n\\t\\t\\t\\t\\t\\t\\tthis.userName = userName;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tpublic void notify(DelegateTask delegateTask) {\\n\\t\\t\\t\\t\\t\\t\\tSystem.out.println(\\"属性注入后的值：\\" + this.userName.getValue(null));\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\n\\t\\t流程监听器：\\n\\t\\t\\t&lt;activiti:executionListener event=\\"XXXXX\\"\\n\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt;\\n\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt;\\n\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;/activiti:string&gt;\\n\\t\\t\\t\\t&lt;/activiti:field&gt;\\n\\t\\t\\t&lt;/activiti:executionListener&gt;\\n\\t\\t\\t\\n\\n\\n\\t\\t\\t\\n\\t\\t\\t&lt;process id=\\"process1\\" name=\\"process1\\" isExecutable=\\"true\\"&gt;\\n\\t\\t\\t\\t&lt;extensionElements&gt;\\n\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"end\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[流程结束]]&gt;&lt;/activiti:string&gt;\\n\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt;\\n\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt;\\n\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\"\\n\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[流程开始]]&gt;&lt;/activiti:string&gt;\\n\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt;\\n\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt;\\n\\t\\t\\t\\t&lt;/extensionElements&gt;\\n\\t\\t\\t\\t&lt;startEvent id=\\"startevent1\\" name=\\"Start\\"&gt;&lt;/startEvent&gt;\\n\\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"Task 1\\"&gt;\\n\\t\\t\\t\\t\\t&lt;extensionElements&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"end\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[用户任务结束]]&gt;&lt;/activiti:string&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt;\\n\\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[用户任务开始]]&gt;&lt;/activiti:string&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt;\\n\\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt;\\n\\t\\t\\t\\t\\t&lt;/extensionElements&gt;\\n\\t\\t\\t\\t&lt;/userTask&gt;\\n\\t\\t\\t\\t&lt;exclusiveGateway id=\\"exclusivegateway1\\" name=\\"Exclusive Gateway\\"&gt;\\n\\t\\t\\t\\t\\t&lt;extensionElements&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[网关开始]]&gt;&lt;/activiti:string&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt;\\n\\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt;\\n\\t\\t\\t\\t\\t&lt;/extensionElements&gt;\\n\\t\\t\\t\\t&lt;/exclusiveGateway&gt;\\n\\t\\t\\t\\t&lt;intermediateThrowEvent id=\\"signalintermediatethrowevent1\\"\\n\\t\\t\\t\\t\\tname=\\"SignalThrowEvent\\"&gt;\\n\\t\\t\\t\\t\\t&lt;extensionElements&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"end\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[中间事件结束]]&gt;&lt;/activiti:string&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt;\\n\\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:executionListener event=\\"start\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t\\t&lt;activiti:string&gt;&lt;![CDATA[中间事件开始]]&gt;&lt;/activiti:string&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;/activiti:field&gt;\\n\\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt;\\n\\t\\t\\t\\t\\t&lt;/extensionElements&gt;\\n\\t\\t\\t\\t&lt;/intermediateThrowEvent&gt;\\n\\t\\t\\t\\t&lt;endEvent id=\\"endevent1\\" name=\\"End\\"&gt;&lt;/endEvent&gt;\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow1\\" sourceRef=\\"startevent1\\"\\n\\t\\t\\t\\t\\ttargetRef=\\"exclusivegateway1\\"&gt;\\n\\t\\t\\t\\t\\t&lt;extensionElements&gt;\\n\\t\\t\\t\\t\\t\\t&lt;activiti:executionListener \\n\\t\\t\\t\\t\\t\\t\\tclass=\\"org.crazyit.activiti.ExecutionListenerInvocation\\"&gt;\\n\\t\\t\\t\\t\\t\\t\\t&lt;activiti:field name=\\"message\\" stringValue=\\"从开始事件到网关的顺序流\\"/&gt;\\n\\t\\t\\t\\t\\t\\t&lt;/activiti:executionListener&gt;\\n\\t\\t\\t\\t\\t&lt;/extensionElements&gt;\\t\\n\\t\\t\\t\\t&lt;/sequenceFlow&gt;\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow3\\" sourceRef=\\"usertask1\\"\\n\\t\\t\\t\\t\\ttargetRef=\\"signalintermediatethrowevent1\\"&gt;&lt;/sequenceFlow&gt;\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow4\\" sourceRef=\\"signalintermediatethrowevent1\\"\\n\\t\\t\\t\\t\\ttargetRef=\\"endevent1\\"&gt;&lt;/sequenceFlow&gt;\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow5\\" sourceRef=\\"exclusivegateway1\\"\\n\\t\\t\\t\\t\\ttargetRef=\\"usertask1\\"&gt;&lt;/sequenceFlow&gt;\\n\\t\\t\\t&lt;/process&gt;\\n\\t\\t\\t\\t\\n第十三章 其他流程元素\\t\\n\\t1.子流程：\\n\\t\\t1.嵌入式子流程\\n\\t\\t\\t&lt;subProcess id=\\"subprocess1\\" name=\\"Sub Process\\"&gt;\\n\\t\\t\\t\\t&lt;startEvent id=\\"startevent2\\" name=\\"Start\\"&gt;&lt;/startEvent&gt;\\n\\t\\t\\t\\t&lt;serviceTask id=\\"usertask2\\" name=\\"Sub Task\\"\\n\\t\\t\\t\\t\\tactiviti:class=\\"org.crazyit.activiti.EmbededJavaDelegate\\"&gt;&lt;/serviceTask&gt;\\n\\t\\t\\t\\t&lt;endEvent id=\\"endevent1\\" name=\\"End\\"&gt;&lt;/endEvent&gt;\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow3\\" sourceRef=\\"startevent2\\"\\n\\t\\t\\t\\t\\ttargetRef=\\"usertask2\\"&gt;&lt;/sequenceFlow&gt;\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow4\\" sourceRef=\\"usertask2\\"\\n\\t\\t\\t\\t\\ttargetRef=\\"endevent1\\"&gt;&lt;/sequenceFlow&gt;\\n\\t\\t\\t&lt;/subProcess&gt;\\n\\t\\t\\n\\t\\t\\n\\t\\t\\n\\t\\t2.调用式子流程\\n\\n\\t\\t\\t&lt;callActivity id=\\"subprocess1\\" name=\\"人事、总监子流程\\" calledElement=\\"SubProcess\\"&gt;\\n\\t\\t\\t\\t&lt;extensionElements&gt;\\n\\t\\t\\t\\t\\t&lt;activiti:in source=\\"days\\" target=\\"newDays\\"&gt;&lt;/activiti:in&gt;\\n\\t\\t\\t\\t\\t&lt;activiti:out source=\\"myDays\\" target=\\"resultDays\\"&gt;&lt;/activiti:out&gt;\\n\\t\\t\\t\\t&lt;/extensionElements&gt;\\n\\t\\t\\t&lt;/callActivity&gt;\\n\\t\\t\\t\\n\\t\\t\\t// 部署流程文件\\n\\t\\t\\trepositoryService\\n\\t\\t\\t\\t\\t.createDeployment()\\n\\t\\t\\t\\t\\t.addClasspathResource(\\n\\t\\t\\t\\t\\t\\t\\t\\"bpmn/CallActivityVariable.bpmn\\")\\n\\t\\t\\t\\t\\t.addClasspathResource(\\"bpmn/SubProcess.bpmn\\")\\n\\t\\t\\t\\t\\t.deploy();\\t\\t\\n\\n\\t\\t3.事件子流程\\n\\t\\t4.事务子流程\\n\\t\\t5.特别子流程\\n\\t\\t\\tbpmn不指定子流程的执行顺序,实际运行时指定运行顺序\\n\\t\\t\\t&lt;adHocSubProcess id=\\"adhocSubProcess\\" ordering=\\"Sequential\\"&gt;\\n\\t\\t\\t\\t&lt;userTask id=\\"subProcessTask\\" name=\\"Task in subprocess\\" /&gt;\\n\\t\\t\\t\\t&lt;userTask id=\\"subProcessTask2\\" name=\\"Task2 in subprocess\\" /&gt;\\n\\t\\t\\t&lt;/adHocSubProcess&gt;\\n\\t\\t\\t\\n\\t\\t\\t// 查询子流程的执行流\\n\\t\\t\\tExecution exe = runtimeService.createExecutionQuery()\\n\\t\\t\\t\\t\\t.processInstanceId(pi.getId()).activityId(\\"adhocSubProcess\\")\\n\\t\\t\\t\\t\\t.singleResult();\\n\\t\\t\\t// 让执行流到达第二个任务\\n\\t\\t\\truntimeService.executeActivityInAdhocSubProcess(exe.getId(),\\n\\t\\t\\t\\t\\t\\"subProcessTask2\\");\\t\\n\\t\\t\\t\\n\\t\\t\\t// 完成第二个任务\\n\\t\\t\\tTask subProcessTask2 = taskService.createTaskQuery()\\n\\t\\t\\t\\t\\t.processInstanceId(pi.getId())\\n\\t\\t\\t\\t\\t.taskDefinitionKey(\\"subProcessTask2\\").singleResult();\\n\\t\\t\\ttaskService.complete(subProcessTask2.getId());\\n\\n\\t\\t\\t// 完成特别子流程✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓\\n\\t\\t\\t//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓\\n\\t\\t\\truntimeService.completeAdhocSubProcess(exe.getId());\\n\\t\\t\\t//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓\\n\\t\\t\\n\\t2.顺序流与网关：\\n\\t\\t顺序流：\\n\\t\\t\\t条件顺序流\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow4\\" name=\\"小于等于5天\\" sourceRef=\\"exclusivegateway1\\"\\n\\t\\t\\t\\t\\ttargetRef=\\"usertask2\\"&gt;\\n\\t\\t\\t\\t\\t&lt;conditionExpression xsi:type=\\"tFormalExpression\\"&gt;\\n\\t\\t\\t\\t\\t&lt;![CDATA[\\n\\t\\t\\t\\t\\t${days &lt;= 5}\\n\\t\\t\\t\\t\\t]]&gt;\\n\\t\\t\\t\\t\\t&lt;/conditionExpression&gt;\\n\\t\\t\\t\\t&lt;/sequenceFlow&gt;\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow5\\" name=\\"大于5天\\" sourceRef=\\"exclusivegateway1\\"\\n\\t\\t\\t\\t\\ttargetRef=\\"usertask3\\"&gt;\\n\\t\\t\\t\\t\\t&lt;conditionExpression xsi:type=\\"tFormalExpression\\"&gt;\\n\\t\\t\\t\\t\\t&lt;![CDATA[\\n\\t\\t\\t\\t\\t${days &gt; 5}\\n\\t\\t\\t\\t\\t]]&gt;\\n\\t\\t\\t\\t\\t&lt;/conditionExpression&gt;\\n\\t\\t\\t\\t&lt;/sequenceFlow&gt;\\n\\n\\t\\t\\t\\t执行示例：\\n\\t\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();\\n\\t\\t\\t\\tvars.put(\\"days\\", 6);\\n\\t\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\n\\t\\t\\t\\t\\"process1\\", vars);\\n\\t\\t\\t默认顺序流\\n\\t\\t\\t\\t&lt;userTask id=\\"usertask1\\" name=\\"填写请假申请\\" default=\\"flow1\\"&gt;&lt;/userTask&gt;\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow1\\" sourceRef=\\"usertask1\\" targetRef=\\"usertask2\\"&gt;&lt;/sequenceFlow&gt;\\n\\n\\t\\t\\t\\t&lt;sequenceFlow id=\\"flow2\\" sourceRef=\\"usertask1\\" targetRef=\\"usertask3\\"&gt;\\n\\t\\t\\t\\t\\t&lt;conditionExpression xsi:type=\\"tFormalExpression\\"&gt;&lt;![CDATA[\\n\\t\\t\\t\\t\\t${days &gt; 5}\\n\\t\\t\\t\\t\\t]]&gt;&lt;/conditionExpression&gt;\\n\\t\\t\\t\\t&lt;/sequenceFlow&gt;\\n\\t\\t\\t\\t\\n\\t\\t流程网关：\\n\\t\\t\\t单向网关\\n\\t\\t\\t并行网关\\n\\t\\t\\t兼容网关\\n\\t\\t\\t事件网关\\n\\t\\t\\t组合网关（Activiti不支持）\\n\\n\\t\\t\\t单向网关\\n\\t\\t\\t并行网关：\\n\\t\\t\\t\\t分叉 合并\\n\\t\\t\\t兼容网关：\\n\\t\\t\\t\\t单向网关和并行网关结合\\n\\t\\t\\t事件网关：\\n\\t\\t\\t\\t哪个事件先触发，就转向哪一个执行流\\n\\t\\t\\t\\t事件网关只会选择最先触发的事件所在的分支向前执行\\n\\t\\n\\t3.流程活动的特性：\\n\\t\\t1.多实例活动\\n\\t\\t\\t&lt;multiInstanceLoopCharacteristics\\n\\t\\t\\t\\tisSequential=\\"true\\"&gt;\\n\\t\\t\\t\\t&lt;loopCardinality&gt;2&lt;/loopCardinality&gt;\\n\\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt;\\n\\t\\t2.设置循环数据\\n\\t\\t\\t&lt;multiInstanceLoopCharacteristics\\n\\t\\t\\t\\tisSequential=\\"false\\" activiti:collection=\\"datas1\\"&gt;\\n\\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt;\\n\\t\\t\\t\\n\\t\\t\\tList&lt;String&gt; datas1 = new ArrayList&lt;String&gt;();\\n\\t\\t\\tdatas1.add(\\"a\\");\\n\\t\\t\\tdatas1.add(\\"b\\");\\n\\t\\t\\tMap&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();\\n\\t\\t\\tvars.put(\\"datas1\\", datas1);\\n\\t\\t\\tProcessInstance pi = runtimeService.startProcessInstanceByKey(\\n\\t\\t\\t\\t\\"process1\\", vars);\\n\\t\\t3.获取循环元素\\n\\t\\t\\t&lt;multiInstanceLoopCharacteristics\\n\\t\\t\\t\\tisSequential=\\"true\\" activiti:collection=\\"datas1\\"\\n\\t\\t\\t\\tactiviti:elementVariable=\\"data\\"&gt;\\n\\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt;\\n\\n\\t\\t\\tpublic class ServiceB implements JavaDelegate {\\n\\n\\t\\t\\t\\tpublic void execute(DelegateExecution execution) {\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tSystem.out.println(\\"获取循环参数：\\" + execution.getVariable(\\"data\\"));\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t4.循环的内置参数\\n\\t\\t\\tnrOfInstances:实例总数\\n\\t\\t\\tnrOfActiveInstances:当前正在执行的实例总数\\t\\n\\t\\t\\tnrOfCompletedInstances:已经完成的实例总数\\n\\t\\t\\tloopCounter:当前循环的索引\\n\\t\\t5.循环结束条件\\n\\t\\t\\t&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt;\\n\\t\\t\\t\\n\\t\\t\\t&lt;multiInstanceLoopCharacteristics\\n\\t\\t\\t\\tisSequential=\\"true\\" activiti:collection=\\"${datas}\\"\\n\\t\\t\\t\\tactiviti:elementVariable=\\"data\\"&gt;\\n\\t\\t\\t\\t&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt;\\n\\t\\t\\t&lt;/multiInstanceLoopCharacteristics&gt;\\n\\n第十四章 Activiti与规则引擎\\t\\t\\t\\n\\t1.Drools介绍与运行\\n\\t\\t代码与业务规则分离\\n\\t2.规则语法\\n\\t\\t全局变量\\n\\t\\t函数\\n\\t\\t规则属性\\n\\t\\t\\tactivation-group 激活组，组内只有一个规则会被激活\\n\\t\\t\\tsalience 优先级\\n\\t\\t条件语法\\n\\t\\t\\twhen then\\n\\t\\t行为语法\\n\\t\\t\\t修改事实对象\\n\\t\\t\\tinsert\\n\\t\\t\\tupdate\\n\\t3.Activiti整合Drools\\n\\t\\t&lt;property name=\\"customPostDeployers\\"&gt;\\n\\t\\t\\t&lt;list&gt;\\n\\t\\t\\t\\t&lt;bean class=\\"org.activiti.engine.impl.rules.RulesDeployer\\" /&gt;\\n\\t\\t\\t&lt;/list&gt;\\n\\t\\t&lt;/property&gt;\\t\\n\\t\\t\\n\\t\\t&lt;businessRuleTask id=\\"businessruletask1\\" name=\\"匹配销售规则\\" \\n\\t\\t\\tactiviti:ruleVariablesInput=\\"${member}\\" \\n\\t\\t\\tactiviti:resultVariable=\\"members\\"&gt; &lt;/businessRuleTask&gt;\\n\\n第十五章 基于DMN的Activiti规则引擎\\n\\t1.DMN规范\\n\\t2.规则引擎使用\\n\\t3.MVEL表达式\\n\\n第十六章 整合第三方框架\\n\\t\\n\\t引擎，各种服务，都可以直接注入\\n\\n第十七章 Rest\\n\\t\\n第十八章 \\n\\t表单\\n\\t流程图与XML的转换\\n\\t回退\\n\\t会签\\n\\t\\n\\n\\n\\n\\t\\t\\n\\t\\t\\n\\t\\t\\n\\n\\t\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{t as data};
