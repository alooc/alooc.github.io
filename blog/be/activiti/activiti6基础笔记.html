<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.64" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://alooc.github.io/blog/be/activiti/activiti6%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0.html"><meta property="og:site_name" content="Alooc"><meta property="og:title" content="activiti6笔记"><meta property="og:description" content="first-demo： 步骤：设计流程，配置流程引擎，加载流程文件，启动流程。 数据库表的含义 url driver user password 配置文件 工作流引擎设计的一致原则是：强调流程服务的可嵌入性和可扩展性 jbpm3,jbpm5 activiti5: 	jBPM3 是一个完整的工作流系统实现，面向开发人员， 		目的在于简化对组织核心流程进行支撑的软件创建，不支持标准。 	jBPM4 引入 PVM，使其拥有更强大的扩展性，同时增加 BPMS 特性， 		这些特性包括了对 BPMN 的支持、面向业务人员的 Web 建模器和简单统计分析功能的加入。 	jBPM5 基于原先的 Drools Flow，支持 BPMN，通过与 Drools 的合并支持 BAM， 		通过内容仓库增加对流程可视化的支持。由于放弃了 jBPM4 的 PVM，引擎的可扩展性受到损害，并且不再支持 jPDL。 	Activiti5 基于 jBPM4，与 Alfresco 的集成增加了其流程可视化与管理能力， 		同时通过创新的 Activiti Cycle 协作组件支持流程相关人员之间的协调，最后，它加强了集成能力。 ****************************************************************** 第一章 Activiti介绍 	BPMN Business Process Modeling Notation 业务流程模型和符号 	BPMN 2.0 定义了5个基础的元素类别： 		流对象 Flow Object :在一个业务流程中，流对象是用于定义行为的图形元素，主要有事件Events、活动Activities、和网关 Gateways 三种流对象 		数据 Data :主要有数据对象 Data Objects、数据输入 Data Inputs 、数据输出 Data Outputs 和数据存储 Data Stores 四种元素 		连接对象 Connecting Objects :用于连接流对象，顺序流 Sequence Flows、消息流 Message Flows、关联 Associations 和数据关联 Data Associations 四种连接流对象的方式 		泳道 Swimlanes :泳道提供了两种途径用于组织基础的模型元素，分别是池 Pools 和道 Lanes 		制品 Artifacts :制品主要用于为流程提供附加信息，当前制品包括组 Group 和 注释 Text Annotation 第二章 安装运行Activiti 	开发第一个应用： 		1.引入jar包 		2.写配置文件 activiti的配置文件默认是resource中的activiti.cgf.xml 			示例： 				&lt;?xml version="1.0" encoding="UTF-8"?&gt; 				&lt;beans xmlns="http://www.springframework.org/schema/beans" 				 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 				 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt; 					&lt;!-- 流程引擎配置的bean --&gt; 					&lt;bean id="processEngineConfiguration" 						class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 						&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act?useUnicode=true&amp;amp; characterEncoding=utf8&amp;amp; useSSL=false&amp;amp; serverTimezone=UTC&amp;amp; rewriteBatchedStatements=true" /&gt; 						&lt;property name="jdbcDriver" value="com.mysql.cj.jdbc.Driver" /&gt; 						&lt;property name="jdbcUsername" value="root" /&gt; 						&lt;property name="jdbcPassword" value="root" /&gt; 						&lt;property name="databaseSchemaUpdate" value="true" /&gt; 					&lt;/bean&gt; 				&lt;/beans&gt; 		3.创建bpmn文件 		4.类文件启动示例： 			// 创建流程引擎 			ProcessEngine engine = ProcessEngines.getDefaultProcessEngine(); 		★//部署层面 			// 得到流程存储服务组件，相当于流程仓库，可部署流程，kickstart App 			RepositoryService repositoryService = engine.getRepositoryService(); 			 		★//启动层面 			// 得到运行时服务组件，运行服务，启动流程 启动流程 			RuntimeService runtimeService = engine.getRuntimeService(); 			 		★//流程处理层面 			// 获取流程任务组件 流程启动后，使用 			TaskService taskService = engine.getTaskService(); 			// 部署流程文件 			repositoryService.createDeployment() 					.addClasspathResource("bpmn/First.bpmn").deploy(); 			// 启动流程 			runtimeService.startProcessInstanceByKey("process1"); 			// 查询第一个任务 			Task task = taskService.createTaskQuery().singleResult(); 			System.out.println("第一个任务完成前，当前任务名称：" + task.getName()); 			// 完成第一个任务 			taskService.complete(task.getId()); 			// 查询第二个任务 			task = taskService.createTaskQuery().singleResult(); 			System.out.println("第二个任务完成前，当前任务名称：" + task.getName()); 			// 完成第二个任务（流程结束） 			taskService.complete(task.getId()); 			task = taskService.createTaskQuery().singleResult(); 			System.out.println("流程结束后，查找任务：" + task); 			// 退出 	 第三章 Activiti数据库设计 	activiti流程引擎的数据表分为5大类，各类职责不同，有统一的命名规范 	 	1.通用数据表：只存放通用资源， ACT_GE 		资源表 ACT_GE_BYTEARRAY 			保存与流程引擎相关的资源 			一般用来保存字符串、流程文件的内容、流程图片内容 		属性表 ACT_GE_PROPERTY 			属性的键值对 	2.流程存储表：保存流程定义和部署信息 ACT_RE 		部署数据表 ACT_RE_DEPLOYMENT 			保存部署信息 		流程定义表 ACT_RE_PROCDEF 			保存流程文件 .bpmn 	3.身份数据表：有关身份数据的几张表 ACT_ID 		用户表 ACT_ID_USER 			保存用户信息 		用户账号（信息）表 ACT_ID_INFO 			activiti将用户、用户账号和用户信息分三种数据，用户表保存用户的数据， 			而其他两个被保存在这个表中 		用户组表 ACT_ID_GROUP 			用户组数据（组名称，组类型） 		关系表 ACT_ID_MEMBERSHIP 			保存用户属于哪个组 	4.运行时数据表：保存流程在运行过程中所产生的数据，例如流程实例、执行流、任务等 ACT_RU 		流程实例（执行流）表 ACT_RU_EXECUTION 		流程任务表 ACT_RU_TASK 		流程参数表 ACT_RU_VARIABLE 		流程与身份关系表 ACT_RU_IDENTITYLINK 		工作数据表 			ACT_RU_JOB 			ACT_RU_DEADLEFTER_JOB 			ACT_RU_SUSPENDED_JOB 			ACT_RU_TIMER_JOB 		事件描述表 ACT_RU_EVENT_SUBSCR 	5.历史数据表：流程引擎的日志表，操作过的流程元素将会被记录到历史表中 ACT_HI 		流程实例表 ACT_HI_PROCINST 		流程明细表 ACT_HI_DETAIL 		历史任务表和历史行为表 ACT_HI_TASKINST 		附件表和评论表 ACT_HI_ATTACHMENT 	6.DMN 规则引擎表 		activiti6加入了DMN规范的规则引擎模块 			1.决策部署表 ACT_DMN_DEPLOYMENT 				类似于流程定义部署，每次部署，向部署表中写入部署数据 			2.决策表 ACT_DMN_DECISION_TABLE 				决策类似于流程定义，保存决策模型 			3.部署资源表 ACT_DMN_DEPLOYMENT_RESOURCE 				规则引擎相关的资源，例如决策文件、图片 第四章 Activiti流程引擎配置 	1.流程引擎对象 		ProcessEngineConfiguration对象代表一个Activiti流程引擎的全部配置 			该对象的静态方法读取配置文件，生成实例 		1. 		/** 		 * 使用createProcessEngineConfigurationFromResourceDefault方法 		 * 创建ProcessEngineConfiguration实例 		 * @author Administrator 		 * 		 */ 		//使用Activiti默认的方式创建ProcessEngineConfiguration 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResourceDefault();	 		2. 		/** 		 * 使用CreateProcessEngineConfigurationFromResource方法创建ProcessEngineConfiguration实例 		 * 		 * @author Administrator 		 * 		 */ 		// 指定配置文件创建ProcessEngineConfiguration 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("my-activiti1.xml"); 		3. 		/** 		 * 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration 		 * 		 * @author yangenxiong 		 * 		 */ 		File file = new File("resource/input-stream.xml"); 		// 得到文件输入流 		InputStream fis = new FileInputStream(file); 		// 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromInputStream(fis); 		4. 		/** 		 * 使用createStandaloneInMemProcessEngineConfiguration创建ProcessEngineConfiguration 		 * 		 * @author yangenxiong 		 * 		 */ 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createStandaloneInMemProcessEngineConfiguration(); 		// 值为create-drop 		System.out.println(config.getDatabaseSchemaUpdate()); 		// 值为jdbc:h2:mem:activiti 		System.out.println(config.getJdbcUrl()); 		5. 		/** 		 * 使用CreateStandaloneProcessEngineConfiguration方法创建ProcessEngineConfiguration 		 * 		 * @author yangenxiong 		 * 		 */ 		 ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createStandaloneProcessEngineConfiguration(); 		// 默认值为 false 		System.out.println(config.getDatabaseSchemaUpdate()); 		// 默认值为 jdbc:h2:tcp://localhost/~/activiti 		System.out.println(config.getJdbcUrl()); 	2.数据源配置 	3.其他属性配置 		history配置 		asyncExecutorActivate配置 		邮件服务器配置 	示例： 		************************************************************************************ 		&lt;!-- 将databaseType设置为oracle --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="create-drop"/&gt; 			&lt;property name="databaseType" value="oracle"/&gt; 		&lt;/bean&gt; 		// 读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("database-type.xml"); 		// 启动Activiti 		ProcessEngine engine = config.buildProcessEngine(); 		// 关闭流程引擎 		engine.close(); 		************************************************************************************ 		&lt;!-- 使用C3P0数据源 --&gt; 		&lt;bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt; 			&lt;property name="driverClass" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="user" value="root" /&gt; 			&lt;property name="password" value="123456" /&gt; 		&lt;/bean&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="dataSource" ref="dataSource" /&gt; 		&lt;/bean&gt; 		// 读取c3p0-config.xml配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("config/c3p0-config.xml"); 		// 能正常输出，即完成配置 		DataSource ds = config.getDataSource(); 		// 查询数据库元信息，如果能查询则表示连接成功 		ds.getConnection().getMetaData(); 		// 结果为 com.mchange.v2.c3p0.ComboPooledDataSource 		System.out.println(config.getDataSource().getClass().getName()); 		 		或者 		&lt;!-- 不初始化任何属性 --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 		&lt;/bean&gt; 		// 创建C3P0数据源 		ComboPooledDataSource ds = new ComboPooledDataSource(); 		// 设置JDBC连接的各个属性 		ds.setUser("root"); 		ds.setPassword("123456"); 		ds.setJdbcUrl("jdbc:mysql://localhost:3306/act"); 		ds.setDriverClass("com.mysql.jdbc.Driver"); 		// 验证是否连接成功 		ds.getConnection().getMetaData(); 		// 读取Activiti配置文件 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("config/c3p0-coding.xml"); 		// 为ProcessEngineConfiguration设置dataSource属性 		config.setDataSource(ds); 		System.out.println(config.getDataSource()); 		************************************************************************************ 		&lt;!-- 将databaseSchemaUpdate设置为false --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="false"/&gt; 		&lt;/bean&gt; 		//读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("schemaUpdate-false.xml"); 		//启动Activiti 		config.buildProcessEngine(); 		************************************************************************************ 		&lt;!-- 将databaseSchemaUpdate设置为true --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="true"/&gt; 		&lt;/bean&gt; 		//读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("schemaUpdate-true.xml"); 		System.out.println(config.getClass().getName()); 		//启动Activiti 		config.buildProcessEngine(); 		************************************************************************************ 		&lt;!-- 将databaseSchemaUpdate设置为create-drop --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="create-drop"/&gt; 		&lt;/bean&gt; 		// 读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("schemaUpdate-create-drop.xml"); 		// 启动Activiti 		ProcessEngine engine = config.buildProcessEngine(); 		// 关闭流程引擎 		engine.close(); 		************************************************************************************ 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="true"/&gt; 			&lt;property name="history" value="activity"/&gt; activiti/audit/full/none/ 		&lt;/bean&gt; 		// 读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("history-activity.xml");		 		//初始化流程引擎 		ProcessEngine engine = config.buildProcessEngine(); 		//得到流程存储对象 		RepositoryService repositoryService = engine.getRepositoryService(); 		//部署流程文件 		repositoryService.createDeployment().addClasspathResource("bpmn/history.bpmn20.xml").deploy(); 		//得到运行服务对象 		RuntimeService runtimeService = engine.getRuntimeService(); 		//创建参数 		Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 		vars.put("day", 10); 		//开始流程 		ProcessInstance pi = runtimeService.startProcessInstanceByKey("vacationProcess", vars); 		System.exit(0); 		************************************************************************************ 		&lt;bean id="processEngineConfiguration" 		class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="mailServerHost" value="smtp.163.com"&gt;&lt;/property&gt; 			&lt;property name="mailServerPort" value="25"&gt;&lt;/property&gt; 			&lt;property name="mailServerDefaultFrom" value="yangenxiong@163.com"&gt;&lt;/property&gt; 			&lt;property name="mailServerUsername" value="yangenxiong@163.com"&gt;&lt;/property&gt; 			&lt;property name="mailServerPassword" value="123456"&gt;&lt;/property&gt; 		&lt;/bean&gt; 		************************************************************************************ 		************************************************************************************ 	4.ProcessEngineCofiguration bean 		继承接口ProcessEngineCofiguration或ProcessEngineCofigurationImpl， 		自定义引擎启动类。 	5.Activiti的命令拦截器 		未学习 第五章 流程引擎的创建 	和汽车发动机启动很像 	1.ProcessEngineConfiguration的buildProcessEngine方法创建 	先读后配，相当于配置检查 		// 读取配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("build_engine.xml"); 		// 创建ProcessEngine 		ProcessEngine engine = config.buildProcessEngine(); 	2.ProcessEngines对象 		调用ProcessEngines的init方法 			// 初始化ProcessEngines的Map, 			// 再加载Activiti默认的配置文件（classpath下的activiti.cfg.xml文件） 			// 如果与Spring整合，则读取classpath下的activiti-context.xml文件 			ProcessEngines.init(); 			// 得到ProcessEngines的Map 			Map&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); 			System.out.println(engines.size()); 			System.out.println(engines.get("default")); 		注册与注销ProcessEngine实例 			//读取自定义配置 			ProcessEngineConfiguration config = ProcessEngineConfiguration. 					createProcessEngineConfigurationFromResource("register.xml"); 			//创建ProcessEngine实例 			ProcessEngine engine = config.buildProcessEngine(); 			//获取ProcessEngine的Map 			Map&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); 			System.out.println("注册后引擎数：" + engines.size()); 			//注销ProcessEngine实例 			ProcessEngines.unregister( engine); 			System.out.println("调用unregister后引擎数：" + engines.size()); 		使用ProcessEngines的retry方法 			//得到资源文件的URL实例 			ClassLoader cl = Retry.class.getClassLoader(); 			URL url = cl.getResource("retry.xml"); 			//调用retry方法创建ProcessEngine实例 			ProcessEngineInfo info = ProcessEngines.retry(url.toString()); 			//得到流程实例保存对象 			Map&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); 			System.out.println("调用retry方法后引擎数：" + engines.size());	 		使用ProcessEngines的destroy方法 			// 进行初始化并且返回默认的ProcessEngine实例 			ProcessEngine engine = ProcessEngines.getDefaultProcessEngine(); 			System.out.println("调用getDefaultProcessEngine方法后引擎数量：" 					+ ProcessEngines.getProcessEngines().size()); 			// 调用销毁方法 			ProcessEngines.destroy(); 			// 最终结果为0 			System.out.println("调用destroy方法后引擎数量：" 					+ ProcessEngines.getProcessEngines().size()); 			// 得到资源文件的URL实例 			ClassLoader cl = Destroy.class.getClassLoader(); 			URL url = cl.getResource("activiti.cfg.xml"); 			// 调用retry方法创建ProcessEngine实例 			ProcessEngines.retry(url.toString()); 			System.out.println("只调用 retry方法后引擎数量：" 					+ ProcessEngines.getProcessEngines().size()); 			// 调用销毁方法，没有效果 			ProcessEngines.destroy(); 			System.out.println("调用destory无效果，引擎数量：" 					+ ProcessEngines.getProcessEngines().size()); 	3.ProcessEngine对象 		一个ProcessEngine实例代表一个流程引擎，实例中保存着各个服务组件的实例，根据这些服务组件，可以操作流程实例 		、任务、系统角色等数据。 		1.服务组件： 			好像J2EE的Service层，通过getXXXService方法得到实例 			包含的实例： 				RespositoryService:提供一系列管理流程定义和流程部署的API 				RuntimeService:在流程运行时对流程实例进行管理与控制 				TaskService:对流程任务进行管理，例如任务提醒、任务完成和创建任务等 				IdentityService:提供对流程角色数据进行管理的API，这些角色数据包括用户组、用户及它们之间的关系 				ManagementService:提供对流程引擎进行管理和维护的服务 				HistoryService:对流程的历史数据进行操作，包括查询、删除这些历史数据 				DynamicBpmnService:使用该服务，可以不需要重新部署流程模型，就可以实现对流程模型的修改 		2.关闭流程引擎： 			engine.close(); 			根据配置中databaseSchemeUpdate属性判断是否删除数据库	 		3.流程引擎名称: 			默认名称时default 			使用config.setProcessEngineName("test"); 			示例： 				ProcessEngineConfiguration config = ProcessEngineConfiguration. 				createProcessEngineConfigurationFromResource("name.xml"); 				//设置流程引擎名称 				config.setProcessEngineName("test"); 				ProcessEngine engine = config.buildProcessEngine(); 				//根据名称查询流程引擎 				ProcessEngine engineTest = ProcessEngines.getProcessEngine("test"); 				System.out.println("创建的引擎实例：" + engine); 				System.out.println("查询的引擎实例：" + engineTest); 	 第六章 用户组与用户 	1.用户组管理： 		1.Group对象： 			通过业务层组件去创建 			IdentityService 		2.创建用户组： 			id,name,type 然后保存， 				技巧：group.setId(null) 可以让数据库自动生成主键id 		3.修改用户组： 			setter 		4.删除用户组： 			deleteGroup(id) 	2.Activiti数据查询： 		Activiti提供了一套数据查询API供开发者使用，可以使用各个服务组件的createXXXQuery方法来获取这些查询对象。 		 		1.查询对象： 			Query是多有查询对象的父接口，提供了很多基础的方法： 				asc	设置查询结果的排序方式为升序 				count	计算查询结果的数据量 				desc	降序 				list	封装查询结果，返回相应类型的集合 				listPage	分页返回查询结果 				singleResult	查询单条符合条件的数据，没有返回null,多条抛出异常 		2.list方法： 			// 使用list方法查询全部的部署数据 			List&lt;Group&gt; datas = identityService.createGroupQuery().list(); 		3.listPage方法： 			//调用listPage方法，从索引为2的记录开始，查询3条记录 			List&lt;Group&gt; datas = identityService.createGroupQuery().listPage(2, 3); 		4.count方法： 			// 使用list方法查询全部的部署数据 			long size = identityService.createGroupQuery().count(); 		5.排序方法： 			List&lt;Group&gt; datas = identityService.createGroupQuery().orderByGroupName().asc().list(); 		6.ID排序问题： 			主键均是字符型，排序要额外处理 		7.多字段排序： 			List&lt;Group&gt; datas = identityService.createGroupQuery() 				.orderByGroupId().desc() 				.orderByGroupName().asc().list(); 		8.singleResult方法 		9.用户组数据查询： 			相应的数据查询对象除了拥有基类的方法，还有自己的方法： 			// groupId方法 			Group groupA = identityService.createGroupQuery().groupId(aId).singleResult(); 			 			// groupName方法 			Group groupB = identityService.createGroupQuery().groupName("GroupB").singleResult(); 			 			// groupType方法 			Group groupC = identityService.createGroupQuery().groupType("typeC").singleResult(); 			 			// groupNameLike方法 			List&lt;Group&gt; groups = identityService.createGroupQuery().groupNameLike("%group%").list(); 		10.原生SQL查询： 			createNativeGroupQuery() 			groups = identityService.createNativeGroupQuery() 				.sql("select * from ACT_ID_GROUP where NAME_ = #{name}") 				.parameter("name", "GroupD").list(); 	 	3.用户管理： 		User对象 		添加用户 newUser saveUser 		修改用户 		删除用户 		验证用户密码 checkPassWord 是用户密码，不是用户的账号密码 		用户数据查询 UserQuery对象 		设置认证用户 setAuthenticatedUserId 多线程中使用 	4.用户信息管理： 		添加和删除用户信息： 			用为ACT_ID_INFO数据结构是key-value，没有查询对象,通过id+key可以查到记录 			setUserInfo(String userId,String key,String value) 			deleteUserInfo(String userId,String key) 			示例： 				// 创建用户 				creatUser(identityService, id, "angus", "young", "yangenxiong@163.com", "abc"); 				// 创建一个用户信息 				identityService.setUserInfo(id, "age", "30"); 				// 创建第二个用户信息 				identityService.setUserInfo(id, "weight", "60KG"); 				// 删除用户年龄信息 				identityService.deleteUserInfo(id, "age"); 		查询用户信息： 			getUserInfo(String userId,String key) 		设置用户图片： 			setUserPicture 			getUserPicture 			先转为byte array，再存储，图片存放再资源表中，用户信息表存的是图片在的资源表的id 				// 读取图片并转换为byte数组 				FileInputStream fis = new FileInputStream(new File("resource/artifact/picture.png"));		 				BufferedImage img = ImageIO.read(fis); 				ByteArrayOutputStream output = new ByteArrayOutputStream(); 				ImageIO.write(img, "png", output); 				//获取图片的byte数组 				byte[] picArray = output.toByteArray();		 				// 创建Picture实例 				Picture picture = new Picture(picArray, "angus image"); 				// 为用户设置图片 				identityService.setUserPicture(id, picture);	 	5.用户组和用户的关系： 		多对多，中间表ACT_ID_MEMBERSHIP 		绑定关系： 			// 绑定关系 			identityService.createMembership(user.getId(), group.getId()); 		接触绑定： 			// 删除绑定关系 			identityService.deleteMembership(user.getId(), group.getId()); 		查询用户组下的用户： 			使用用户的查询对象 memberOfGroup(group.getId()) 				List&lt;User&gt; users = identityService.createUserQuery() 				.memberOfGroup(group.getId()).list(); 		查询用户所属的用户组： 			使用用户组的查询对象 groupMenber(user.getId()) 				List&lt;Group&gt; groups = identityService.createGroupQuery() 						.groupMember(user.getId()).list(); 	 第七章 流程存储 	RepositoryService 主要对Activiti中的流程存储的相关数据进行操作，这些操作包括对流程存储数据的管理、 		流程部署以及对流程的基本操作等。 	1.流程文件部署： 		RepositoryService负责对流程文件的部署以及流程定义的管理 		 		1.Deployment对象： 			只提供getter方法 		2.DeploymentBuilder对象： 			DeploymentBuilder builder = repositoryService.createDeployment(); 		3.添加输入流资源： 			builder.addInputStream("inputa",a) 				// 第一个资源输入流 				InputStream is1 = new FileInputStream(new File( 						"resource/artifact/flow_inputstream1.png")); 				// 第二个资源输入流 				InputStream is2 = new FileInputStream(new File( 						"resource/artifact/flow_inputstream1.png")); 				// 创建DeploymentBuilder实例 				DeploymentBuilder builder = repositoryService.createDeployment(); 				// 为DeploymentBuilder添加资源输入流 				builder.addInputStream("inputA", is1); 				builder.addInputStream("inputB", is2); 				// 执行部署方法 				builder.deploy(); 		4.添加classpath资源： 			builder.addClasspathResource("artifact/classpath.png") 				//添加classpath下的资源 				builder.addClasspathResource("artifact/classpath.png"); 				//执行部署（写入到数据库中） 				builder.deploy(); 		5.添加字符串资源： 			//添加String资源 			builder.addString("test", "this is string method"); 			//执行部署（写入到数据库中） 			builder.deploy(); 		6.添加压缩包资源： 			//获取zip文件的输入流 			FileInputStream fis = new FileInputStream(new File("resource/artifact/ZipInputStream.zip")); 			//读取zip文件，创建ZipInputStream对象 			ZipInputStream zi = new ZipInputStream(fis); 			//添加Zip压缩包资源 			builder.addZipInputStream(zi); 			//执行部署（写入到数据库中） 			builder.deploy(); 		7.添加BPMN模型资源： 			addBpmnModel 			addBytes 		8.修改部署信息： 			//设置各个属性 			builder.name("crazyit").tenantId("tenanId").key("myKey").category("myCategory"); 		9.过滤重复部署： 			重复部署不再写入数据库，若不同，添加方法后，仍会修改数据库 			builderB.enableDuplicateFiltering(); 		10.取消部署时的验证： 			默认情况下，在部署时会对流程的XML文件进行验证，包括验证是否符合BPMN规范、定义的流程是否可执行。 				builderB.addClasspathResource("bpmn/bpmnError.bpmn") 				.disableBpmnValidation().deploy(); 	2.流程定义的管理： 		中止流程定义、激活流程定义和设置流程权限 		 		1.ProcessDefinition对象： 			有很多getter方法 		2.流程部署： 			将流程的描述文件写入数据库 		3.流程图部署： 		4.流程图自动生成： 			不自动生成 ，在配置文件中加&lt;property name="createDiagramOnDeploy" value="false" /&gt; 		5.中止与激活流程定义： 		6.流程定义缓存配置： 		7.自定义缓存 			自定义Java类，维护map 	3.流程定义的权限： 		activiti没有拦截检查，完全由开发者定义用户权限，然后根据表来查询 		1.设置流程定义的用户权限： 			repositoryService.addCandidateStarterUser(def.getId(), "user1"); 		2.设置流程定义的用户权限： 			repositoryService.addCandidateStarterGroup(def.getId(), "group1"); 		3.IdentityLink对象： 			对应表 ACT_RU_IDENTITYLINK 		4.查询权限数据： 			// 根据用户查询用权限的流程定义 			List&lt;ProcessDefinition&gt; defs = repositoryService 					.createProcessDefinitionQuery().startableByUser("user1").list(); 			// 根据流程定义查询用户组数据 			List&lt;Group&gt; groups = identityService.createGroupQuery() 					.potentialStarter(def.getId()).list(); 			 			// 根据流程定义查询用户数据 			List&lt;User&gt; users = identityService.createUserQuery() 					.potentialStarter(def.getId()).list(); 			 			// 根据流程定义查询全部的 IdentityLink（ACT_RU_IDENTITYLINK表） 数据 			List&lt;IdentityLink&gt; links = repositoryService 					.getIdentityLinksForProcessDefinition(def.getId());	 	4.RepositoryService数据查询与删除： 		1.查询部署资源 			// 查询资源文件 			InputStream is = repositoryService.getResourceAsStream(dep.getId(), 				"artifact/GetResource.txt"); 			// 读取输入流 			int count = is.available(); 			byte[] contents = new byte[count]; 			is.read(contents); 			String result = new String(contents); 		2.查询流程文件 		3.查询流程图 		4.查询部署的资源名称 		5.删除部署资源 		6.DeploymentQuery对象 		7.ProcessDefinitionQuery对象 第八章 流程任务管理 	1.任务的创建和删除： 		1.Task接口： 			ACT_RU_TASK 		2.创建与保存Task实例： 			newTask 			saveTask 		3.删除任务： 			多个删除方法 	2.任务权限： 		1.设置候选用户组 		2.设置候选用户 		3.权限数据查询 			用户组和用户的Query对象没有提供根据任务ID查询用户组和用户的方法 		4.设置任务持有人： 			setOwner 		5.设置任务代理人 			setAssignee 		6.添加任务权限数据 		7.删除用户组权限 		8.删除用户权限 	3.任务参数： 		参数类型分为流程参数和任务参数 		1.基本类型参数设置： 			setVariable 		2.序列化参数： 			对象必须实现序列化接口 		3.获取参数 			getVariable(taskId,argName) 		4.参数作用域： 			setVariableLocal 局部参数 			getVariableLocal 		5.设置多个参数： 			setVariables 			setVariablesLocal	 				//初始化参数 				Map&lt;String,Object&gt; vars = new HashMap&lt;String, Object&gt;(); 				vars.put("days", 10); 				vars.put("target", "欧洲"); 				taskService.setVariables(task1.getId(), vars); 			或使用序列化对象 		6.数据对象： 			BPMN文件中的dataObject元素 				Map&lt;String, DataObject&gt; objs = taskService.getDataObjects(task.getId()); 	 	4.任务附件管理： 		1.Attachment对象： 		2.创建任务附件： 			// 设置任务附件 			taskService.createAttachment("web url", task.getId(), pi.getId(), "163.com", 					"163 web page", "http://www.163.com"); 			// 创建图片输入流 			InputStream is = new FileInputStream(new File("resource/artifact/result.png")); 			// 设置输入流为任务附件 			taskService.createAttachment("web url", task.getId(), pi.getId(), "163.com", 					"163 web page", is); 		3.附件查询： 		4.删除附件 	5.任务评论和事件记录： 		1.Comment对象: 		2.新增任务评论 			addComment 		3.事件的记录 		4.数据查询 	6.任务声明与完成： 		1.任务声明： 			claim 		2.任务完成： 			complete 第九章 流程控制 	TaskService主要用于任务管理，包括任务操作、任务数据管理等 	IdentityService主要用于管理流程的身份数据 	RepositoryService主要管理流程部署的数据 	RuntimeService主要用于管理流程在运行时产生的数据，以及对流程进行操作的API 	流程运行时产生的数据包括流程参数、事件、流程 实例及执行流等 	流程的操作包括启动流程，流程前进等 	1.流程实例与执行流： 		1.流程实例与执行流的概念： 			启动一个流程时，会创建一个流程实例，每个流程实例至少有一个执行流 		2.流程实例和执行流对象 ProcessInstance Execution 	2.启动流程: 		RuntimeService提供流程启动的多个方法，命名均为startProcessInstanceByXXX 			XXX可以是流程定义的ID、Key【流程描述文件中process的id属性】和message 		1.startProcessInstanceById方法： 		2.startProcessInstanceByKey方法 		3.startProcessInstanceByMessage方法 			消息事件 	3.流程参数： 		1.设置与查询流程参数： 			设置需要传入执行流的ID 			查询需要传入执行流的ID和参数名称 			setViriable 		2.流程参数的作用域： 			局部只作用域执行流 			setViriableLocal 		3.其他设置参数的方法： 			setViriables 			setViriablesLocal 	4.流程操作： 		启动流程、发送信号、中断流程、激活流程 		1.流程触发： 			对于receiveTask等流程节点，使用trigger方法进行触发，使流程往前进行 		2.触发信号事件： 			事件节点是在流程中记录事件发生的流程元素，BPMN2 规范中主要有两种类型的事件： 				捕获事件Catching 需要信号才能前进 					// 发送信号给事件，流程结束 					runtimeService.signalEventReceived("testSignal"); 				抛出事件Throwing 		3.触发消息事件： 			消息事件节点 				// 触发消息事件 				runtimeService.messageEventReceived("testMsg", exe.getId()); 		4.中断和激活流程： 			SUSPENSION_STATE_字段保存中断状态，1为活跃，2为中断 				runtimeService.suspendProcessInstanceById(pi.getId()); 				runtimeService.activateProcessInstanceById(pi.getId()); 		5.删除流程： 			runtimeService.deleteProcessInstance(pi.getId(), "abc"); 	5.流程数据查询： 		1.执行流查询： 		2.流程实例查询 			 第十章 历史数据管理和流程引擎管理 	历史数据： 		activiti删除的流程定义、流程任务和流程实例的数据 		已经完成的流程实例以及相关数据 	ManagementService可以查询引擎数据库信息、工作信息，直接对数据库操作 	 	1.历史数据管理： 		1.历史流程实例查询： 			historyService.createHistoricProcessInstanceQuery() 		2.历史任务查询： 			historyService.createHistoricTaskInstanceQuery() 		3.历史行为查询： 			historyService.createHistoricActivityInstanceQuery() 		4.历史流程明细查询： 			流程的明细信息包括流程参数和流程表单属性 				默认情况下，Activiti不会记录明细，当history配置为full级别时，才会记录 		5.删除历史流程实例和历史任务： 			historyService.deleteHistoricProcessInstance(pi1.getId()); 			级联删除实例 	2.工作的产生： 		异步工作时，用工作表保存任务 			一般的工作 ACT_RU_JOB 			定时中断任务 ACT_RU_SUSPENDED_JOB 			定时任务 ACT_RU_TIMER_JOB 		1.异步任务产生的工作： 			Java Service Task主要用于在任务中调用外部的Java 类 		2.定义中间事件产生的工作： 			定义了定时器相关的节点，会在某个定义的时间点上执行。 			可以加入定时器的节点： 				中间事件节点、流程开始事件节点和边界事件节点 		3.定义边界事件产生的工作： 		4.定时开始事件产生的工作 		5.流程抛出事件产生的工作 		6.暂停工作的产生 		7.无法执行的工作 	3.工作管理： 		ManagementService提供工作查询对象（对象返回job实例） 		1.工作查询对象：	 			4个： 				JobQuery 				TimerJobQuery 				SuspendedJobQuery 				DeadLetterJobQuery 		2.获取工作异常信息： 			getXXXJobExceptionStacktrace 		3.转移与删除工作： 			move 			delete 	4.数据库管理： 		1.查询引擎属性 		2.数据表信息查询 		3.数据库操作 		4.数据表查询 	 第十一章 流程事件 	要点： 		BPMN的事件分类 		各种流程的事件定义 		开始事件的应用 		结束事件的应用 		边界事件的应用 		中间事件的应用 	 	1.事件分类： 		1.按照事件的位置分类： 			开始事件：表示流程开始的事件 			结束事件：表示流程结束的事件 			中间事件：出现在流程中，单独作为流程节点的事件 			边界事件：附属于某个流程节点（如子流程，流程任务）的事件 		2.按照事件的特性分类： 			Catching事件 			Throwing事件 				开始事件是Catching 				结束事件是throwing 				边界时catching 				中间 都有 	2.事件定义： 		与事件结合 	3.开始事件： 		无指定开始事件 		定时器开始事件 		消息开始事件 		错误开始事件 	4.结束事件： 		无指定结束事件 		错误结束事件 		取消结束事件 		中止结束事件 	5.边界事件 		定时器 		信号 		错误 		取消 	6.中间事件 		定时器 捕获 		信号 捕获 抛出 		消息 抛出	 	7.补偿事件 		补偿边界 			事务子流程取消触发 			补偿中间触发 		补偿中间 第十二章 流程任务 	BPMN任务概述 	用户任务的应用 	指定服务任务的行为 	WebService任务的应用 	脚本任务的应用 	任务监听器的使用 	流程监听器的使用 	1.用户任务： 		1.分配任务候选人 			&lt;userTask id="usertask1" name="Task1"&gt; 				&lt;potentialOwner&gt; 					&lt;resourceAssignmentExpression&gt; 						&lt;formalExpression&gt;user(angus), group(management), boss 						&lt;/formalExpression&gt; 					&lt;/resourceAssignmentExpression&gt; 				&lt;/potentialOwner&gt; 			&lt;/userTask&gt; 		2.分配任务代理人 			&lt;userTask id="usertask1" name="Task 1"&gt; 				&lt;humanPerformer&gt; 					&lt;resourceAssignmentExpression&gt; 						&lt;formalExpression&gt;user1&lt;/formalExpression&gt; 					&lt;/resourceAssignmentExpression&gt; 				&lt;/humanPerformer&gt; 			&lt;/userTask&gt; 		3.权限分配扩展 			使用activiti扩展来分配任务的候选人和代理人 				&lt;userTask id="usertask1" name="Assignee" activiti:assignee="user1"&gt;&lt;/userTask&gt; 				&lt;userTask id="usertask2" name="Candidate User" 					activiti:candidateUsers="user1, user2"&gt;&lt;/userTask&gt; 				&lt;userTask id="usertask3" name="Candidate Group" 					activiti:candidateGroups="group1,group2"&gt;&lt;/userTask&gt; 		4.使用任务监听器进行权限分配 			设置监听类 				public class UserTaskListener implements TaskListener { 					public void notify(DelegateTask delegateTask) { 						System.out.println("使用任务监听器设置任务权限"); 						delegateTask.setAssignee("user1"); 						delegateTask.addCandidateGroup("group1"); 						delegateTask.addCandidateUser("user1");		 					} 				} 			配置监听器 				&lt;userTask id="usertask1" name="Assignee"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:taskListener event="create" 							class="org.crazyit.activiti.UserTaskListener"&gt;&lt;/activiti:taskListener&gt; 					&lt;/extensionElements&gt; 				&lt;/userTask&gt; 		5.使用JUEL分配权限 			 			&lt;userTask id="usertask2" name="Task 1" activiti:assignee="${authService.getUserAssignee()}"&gt;&lt;/userTask&gt; 			&lt;userTask id="usertask3" name="Task 2" activiti:candidateUsers="${authService.getCandidateUsers()}"&gt;&lt;/userTask&gt; 			&lt;userTask id="usertask4" name="Task 3" activiti:candidateGroups="${authService.getCandidateGroups()}"&gt;&lt;/userTask&gt; 			&lt;userTask id="usertask5" name="Task 4" activiti:assignee="${authService.lastUser}"&gt;&lt;/userTask&gt; 		 			服务Bean 			public class AuthService implements Serializable { 	 				private String lastUser = "angus"; 				 				public String getLastUser() { 					return this.lastUser; 				} 				 				public AuthService() { 					System.out.println("create AuthService"); 				} 				//使用方法为任务指定代理人 				public String getUserAssignee() { 					return "crazyit"; 				} 				 				//使用方法为任务指定候选人 				public List&lt;String&gt; getCandidateUsers() { 					List&lt;String&gt; result = new ArrayList&lt;String&gt;(); 					result.add("user1"); 					result.add("user2"); 					return result; 				} 				 				//使用方法为任务指定候选用户组 				public List&lt;String&gt; getCandidateGroups() { 					List&lt;String&gt; result = new ArrayList&lt;String&gt;(); 					result.add("group1"); 					result.add("group2"); 					return result; 				} 			} 			添加流程变量 			Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 			vars.put("authService", new AuthService()); 			// 启动流程 			ProcessInstance pi = runtimeService.startProcessInstanceByKey("process1", vars); 					 	2.服务任务： 		activiti:class: JavaDelegate或ActivitiBehavior的实现类 		activiti:delegateExpression 		activiti:expression 直接调用bean 		 		1.实现JavaDelegate 			 			public class MyJavaDelegate implements JavaDelegate, Serializable { 				public void execute(DelegateExecution execution) { 					System.out.println(" 实现 JavaDelegate 的 JavaSeviceTask: " + this); 				} 			} 			activiti:class方式： 				&lt;serviceTask id="servicetask1" name="Service Task 1" 					activiti:class="org.crazyit.activiti.MyJavaDelegate"&gt;&lt;/serviceTask&gt; 			activiti:delegateExpression 方式： 				Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 				vars.put("myDelegate", new MyJavaDelegate()); 				// 启动流程 				ProcessInstance pi = runtimeService.startProcessInstanceByKey("process1", vars); 				&lt;serviceTask id="servicetask1" name="Service Task" 					activiti:delegateExpression="${myDelegate}"&gt;&lt;/serviceTask&gt; 			 		2.使用普通的JavaBean 			调用Bean方法和属性 			Bean类： 				public class MyJavaBean implements Serializable { 					private String name = "crazyit"; 					 					public String getName() { 						return this.name; 					} 					 					public void print(Execution exe) { 						System.out.println("使用Java Bean的print方法：" + exe.getId()); 					} 				} 			 			BPMN： 				&lt;serviceTask id="servicetask1" name="Service Task" 					activiti:expression="${myBean.print(execution)}"&gt;&lt;/serviceTask&gt; 				&lt;serviceTask id="servicetask2" name="Service Task" 					activiti:expression="${execution.setVariable('myName', myBean.name)}"&gt;&lt;/serviceTask&gt; 			设置参数： 				Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 				vars.put("myBean", new MyJavaBean()); 				// 启动流程 				ProcessInstance pi = runtimeService.startProcessInstanceByKey( 						"process1", vars); 		3.Shell任务： 			执行cmd命令 	 	3.流程与任务监听器： 		 		任务监听器taskListener 设置event ="create/complete/assignment"表示用户任务创建时调用监听器 			&lt;userTask id="usertask1" name="User Task"&gt; 				&lt;extensionElements&gt; 					&lt;activiti:taskListener event="create" 						class="org.crazyit.activiti.PropertyConfigListener" /&gt; 				&lt;/extensionElements&gt; 			&lt;/userTask&gt; 			属性注入，往任务监听器中注入属性 				&lt;userTask id="usertask1" name="User Task"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:taskListener event="create" 							class="org.crazyit.activiti.PropertyInjection"&gt; 							&lt;activiti:field name="userName" stringValue="crazyit" /&gt; 						&lt;/activiti:taskListener&gt; 					&lt;/extensionElements&gt; 				&lt;/userTask&gt; 				监听器类： 					public class PropertyInjection implements TaskListener { 						private Expression userName; 						 						public void setUserName(Expression userName) { 							this.userName = userName; 						} 						 						public void notify(DelegateTask delegateTask) { 							System.out.println("属性注入后的值：" + this.userName.getValue(null)); 						} 					} 		 		流程监听器： 			&lt;activiti:executionListener event="XXXXX" 				class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 				&lt;activiti:field name="message"&gt; 					&lt;activiti:string&gt;&lt;/activiti:string&gt; 				&lt;/activiti:field&gt; 			&lt;/activiti:executionListener&gt; 			 			 			&lt;process id="process1" name="process1" isExecutable="true"&gt; 				&lt;extensionElements&gt; 					&lt;activiti:executionListener event="end" 						class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 						&lt;activiti:field name="message"&gt; 							&lt;activiti:string&gt;&lt;![CDATA[流程结束]]&gt;&lt;/activiti:string&gt; 						&lt;/activiti:field&gt; 					&lt;/activiti:executionListener&gt; 					&lt;activiti:executionListener event="start" 						class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 						&lt;activiti:field name="message"&gt; 							&lt;activiti:string&gt;&lt;![CDATA[流程开始]]&gt;&lt;/activiti:string&gt; 						&lt;/activiti:field&gt; 					&lt;/activiti:executionListener&gt; 				&lt;/extensionElements&gt; 				&lt;startEvent id="startevent1" name="Start"&gt;&lt;/startEvent&gt; 				&lt;userTask id="usertask1" name="Task 1"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:executionListener event="end" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[用户任务结束]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 						&lt;activiti:executionListener event="start" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[用户任务开始]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 					&lt;/extensionElements&gt; 				&lt;/userTask&gt; 				&lt;exclusiveGateway id="exclusivegateway1" name="Exclusive Gateway"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:executionListener event="start" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[网关开始]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 					&lt;/extensionElements&gt; 				&lt;/exclusiveGateway&gt; 				&lt;intermediateThrowEvent id="signalintermediatethrowevent1" 					name="SignalThrowEvent"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:executionListener event="end" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[中间事件结束]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 						&lt;activiti:executionListener event="start" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[中间事件开始]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 					&lt;/extensionElements&gt; 				&lt;/intermediateThrowEvent&gt; 				&lt;endEvent id="endevent1" name="End"&gt;&lt;/endEvent&gt; 				&lt;sequenceFlow id="flow1" sourceRef="startevent1" 					targetRef="exclusivegateway1"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:executionListener 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message" stringValue="从开始事件到网关的顺序流"/&gt; 						&lt;/activiti:executionListener&gt; 					&lt;/extensionElements&gt;	 				&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow3" sourceRef="usertask1" 					targetRef="signalintermediatethrowevent1"&gt;&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow4" sourceRef="signalintermediatethrowevent1" 					targetRef="endevent1"&gt;&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow5" sourceRef="exclusivegateway1" 					targetRef="usertask1"&gt;&lt;/sequenceFlow&gt; 			&lt;/process&gt; 				 第十三章 其他流程元素	 	1.子流程： 		1.嵌入式子流程 			&lt;subProcess id="subprocess1" name="Sub Process"&gt; 				&lt;startEvent id="startevent2" name="Start"&gt;&lt;/startEvent&gt; 				&lt;serviceTask id="usertask2" name="Sub Task" 					activiti:class="org.crazyit.activiti.EmbededJavaDelegate"&gt;&lt;/serviceTask&gt; 				&lt;endEvent id="endevent1" name="End"&gt;&lt;/endEvent&gt; 				&lt;sequenceFlow id="flow3" sourceRef="startevent2" 					targetRef="usertask2"&gt;&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow4" sourceRef="usertask2" 					targetRef="endevent1"&gt;&lt;/sequenceFlow&gt; 			&lt;/subProcess&gt; 		 		 		 		2.调用式子流程 			&lt;callActivity id="subprocess1" name="人事、总监子流程" calledElement="SubProcess"&gt; 				&lt;extensionElements&gt; 					&lt;activiti:in source="days" target="newDays"&gt;&lt;/activiti:in&gt; 					&lt;activiti:out source="myDays" target="resultDays"&gt;&lt;/activiti:out&gt; 				&lt;/extensionElements&gt; 			&lt;/callActivity&gt; 			 			// 部署流程文件 			repositoryService 					.createDeployment() 					.addClasspathResource( 							"bpmn/CallActivityVariable.bpmn") 					.addClasspathResource("bpmn/SubProcess.bpmn") 					.deploy();		 		3.事件子流程 		4.事务子流程 		5.特别子流程 			bpmn不指定子流程的执行顺序,实际运行时指定运行顺序 			&lt;adHocSubProcess id="adhocSubProcess" ordering="Sequential"&gt; 				&lt;userTask id="subProcessTask" name="Task in subprocess" /&gt; 				&lt;userTask id="subProcessTask2" name="Task2 in subprocess" /&gt; 			&lt;/adHocSubProcess&gt; 			 			// 查询子流程的执行流 			Execution exe = runtimeService.createExecutionQuery() 					.processInstanceId(pi.getId()).activityId("adhocSubProcess") 					.singleResult(); 			// 让执行流到达第二个任务 			runtimeService.executeActivityInAdhocSubProcess(exe.getId(), 					"subProcessTask2");	 			 			// 完成第二个任务 			Task subProcessTask2 = taskService.createTaskQuery() 					.processInstanceId(pi.getId()) 					.taskDefinitionKey("subProcessTask2").singleResult(); 			taskService.complete(subProcessTask2.getId()); 			// 完成特别子流程✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ 			//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ 			runtimeService.completeAdhocSubProcess(exe.getId()); 			//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ 		 	2.顺序流与网关： 		顺序流： 			条件顺序流 				&lt;sequenceFlow id="flow4" name="小于等于5天" sourceRef="exclusivegateway1" 					targetRef="usertask2"&gt; 					&lt;conditionExpression xsi:type="tFormalExpression"&gt; 					&lt;![CDATA[ 					${days &lt;= 5} 					]]&gt; 					&lt;/conditionExpression&gt; 				&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow5" name="大于5天" sourceRef="exclusivegateway1" 					targetRef="usertask3"&gt; 					&lt;conditionExpression xsi:type="tFormalExpression"&gt; 					&lt;![CDATA[ 					${days &gt; 5} 					]]&gt; 					&lt;/conditionExpression&gt; 				&lt;/sequenceFlow&gt; 				执行示例： 				Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 				vars.put("days", 6); 				ProcessInstance pi = runtimeService.startProcessInstanceByKey( 				"process1", vars); 			默认顺序流 				&lt;userTask id="usertask1" name="填写请假申请" default="flow1"&gt;&lt;/userTask&gt; 				 				&lt;sequenceFlow id="flow1" sourceRef="usertask1" targetRef="usertask2"&gt;&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow2" sourceRef="usertask1" targetRef="usertask3"&gt; 					&lt;conditionExpression xsi:type="tFormalExpression"&gt;&lt;![CDATA[ 					${days &gt; 5} 					]]&gt;&lt;/conditionExpression&gt; 				&lt;/sequenceFlow&gt; 				 		流程网关： 			单向网关 			并行网关 			兼容网关 			事件网关 			组合网关（Activiti不支持） 			单向网关 			并行网关： 				分叉 合并 			兼容网关： 				单向网关和并行网关结合 			事件网关： 				哪个事件先触发，就转向哪一个执行流 				事件网关只会选择最先触发的事件所在的分支向前执行 	 	3.流程活动的特性： 		1.多实例活动 			&lt;multiInstanceLoopCharacteristics 				isSequential="true"&gt; 				&lt;loopCardinality&gt;2&lt;/loopCardinality&gt; 			&lt;/multiInstanceLoopCharacteristics&gt; 		2.设置循环数据 			&lt;multiInstanceLoopCharacteristics 				isSequential="false" activiti:collection="datas1"&gt; 			&lt;/multiInstanceLoopCharacteristics&gt; 			 			List&lt;String&gt; datas1 = new ArrayList&lt;String&gt;(); 			datas1.add("a"); 			datas1.add("b"); 			Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 			vars.put("datas1", datas1); 			ProcessInstance pi = runtimeService.startProcessInstanceByKey( 				"process1", vars); 		3.获取循环元素 			&lt;multiInstanceLoopCharacteristics 				isSequential="true" activiti:collection="datas1" 				activiti:elementVariable="data"&gt; 			&lt;/multiInstanceLoopCharacteristics&gt; 			public class ServiceB implements JavaDelegate { 				public void execute(DelegateExecution execution) { 				 					System.out.println("获取循环参数：" + execution.getVariable("data")); 				} 			} 		4.循环的内置参数 			nrOfInstances:实例总数 			nrOfActiveInstances:当前正在执行的实例总数	 			nrOfCompletedInstances:已经完成的实例总数 			loopCounter:当前循环的索引 		5.循环结束条件 			&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt; 			 			&lt;multiInstanceLoopCharacteristics 				isSequential="true" activiti:collection="${datas}" 				activiti:elementVariable="data"&gt; 				&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt; 			&lt;/multiInstanceLoopCharacteristics&gt; 第十四章 Activiti与规则引擎			 	1.Drools介绍与运行 		代码与业务规则分离 	2.规则语法 		全局变量 		函数 		规则属性 			activation-group 激活组，组内只有一个规则会被激活 			salience 优先级 		条件语法 			when then 		行为语法 			修改事实对象 			insert 			update 	3.Activiti整合Drools 		&lt;property name="customPostDeployers"&gt; 			&lt;list&gt; 				&lt;bean class="org.activiti.engine.impl.rules.RulesDeployer" /&gt; 			&lt;/list&gt; 		&lt;/property&gt;	 		 		&lt;businessRuleTask id="businessruletask1" name="匹配销售规则" 			activiti:ruleVariablesInput="${member}" 			activiti:resultVariable="members"&gt; &lt;/businessRuleTask&gt; 第十五章 基于DMN的Activiti规则引擎 	1.DMN规范 	2.规则引擎使用 	3.MVEL表达式 第十六章 整合第三方框架 	 	引擎，各种服务，都可以直接注入 第十七章 Rest 	 第十八章 	表单 	流程图与XML的转换 	回退 	会签"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-07-10T06:35:27.000Z"><meta property="article:author" content="Alooc"><meta property="article:tag" content="activiti"><meta property="article:tag" content="工作流"><meta property="article:published_time" content="2020-01-01T09:02:55.000Z"><meta property="article:modified_time" content="2023-07-10T06:35:27.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"activiti6笔记","image":[""],"datePublished":"2020-01-01T09:02:55.000Z","dateModified":"2023-07-10T06:35:27.000Z","author":[{"@type":"Person","name":"Alooc","url":"https://alooc.github.io"}]}</script><title>activiti6笔记 | Alooc</title><meta name="description" content="first-demo： 步骤：设计流程，配置流程引擎，加载流程文件，启动流程。 数据库表的含义 url driver user password 配置文件 工作流引擎设计的一致原则是：强调流程服务的可嵌入性和可扩展性 jbpm3,jbpm5 activiti5: 	jBPM3 是一个完整的工作流系统实现，面向开发人员， 		目的在于简化对组织核心流程进行支撑的软件创建，不支持标准。 	jBPM4 引入 PVM，使其拥有更强大的扩展性，同时增加 BPMS 特性， 		这些特性包括了对 BPMN 的支持、面向业务人员的 Web 建模器和简单统计分析功能的加入。 	jBPM5 基于原先的 Drools Flow，支持 BPMN，通过与 Drools 的合并支持 BAM， 		通过内容仓库增加对流程可视化的支持。由于放弃了 jBPM4 的 PVM，引擎的可扩展性受到损害，并且不再支持 jPDL。 	Activiti5 基于 jBPM4，与 Alfresco 的集成增加了其流程可视化与管理能力， 		同时通过创新的 Activiti Cycle 协作组件支持流程相关人员之间的协调，最后，它加强了集成能力。 ****************************************************************** 第一章 Activiti介绍 	BPMN Business Process Modeling Notation 业务流程模型和符号 	BPMN 2.0 定义了5个基础的元素类别： 		流对象 Flow Object :在一个业务流程中，流对象是用于定义行为的图形元素，主要有事件Events、活动Activities、和网关 Gateways 三种流对象 		数据 Data :主要有数据对象 Data Objects、数据输入 Data Inputs 、数据输出 Data Outputs 和数据存储 Data Stores 四种元素 		连接对象 Connecting Objects :用于连接流对象，顺序流 Sequence Flows、消息流 Message Flows、关联 Associations 和数据关联 Data Associations 四种连接流对象的方式 		泳道 Swimlanes :泳道提供了两种途径用于组织基础的模型元素，分别是池 Pools 和道 Lanes 		制品 Artifacts :制品主要用于为流程提供附加信息，当前制品包括组 Group 和 注释 Text Annotation 第二章 安装运行Activiti 	开发第一个应用： 		1.引入jar包 		2.写配置文件 activiti的配置文件默认是resource中的activiti.cgf.xml 			示例： 				&lt;?xml version="1.0" encoding="UTF-8"?&gt; 				&lt;beans xmlns="http://www.springframework.org/schema/beans" 				 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 				 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt; 					&lt;!-- 流程引擎配置的bean --&gt; 					&lt;bean id="processEngineConfiguration" 						class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 						&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act?useUnicode=true&amp;amp; characterEncoding=utf8&amp;amp; useSSL=false&amp;amp; serverTimezone=UTC&amp;amp; rewriteBatchedStatements=true" /&gt; 						&lt;property name="jdbcDriver" value="com.mysql.cj.jdbc.Driver" /&gt; 						&lt;property name="jdbcUsername" value="root" /&gt; 						&lt;property name="jdbcPassword" value="root" /&gt; 						&lt;property name="databaseSchemaUpdate" value="true" /&gt; 					&lt;/bean&gt; 				&lt;/beans&gt; 		3.创建bpmn文件 		4.类文件启动示例： 			// 创建流程引擎 			ProcessEngine engine = ProcessEngines.getDefaultProcessEngine(); 		★//部署层面 			// 得到流程存储服务组件，相当于流程仓库，可部署流程，kickstart App 			RepositoryService repositoryService = engine.getRepositoryService(); 			 		★//启动层面 			// 得到运行时服务组件，运行服务，启动流程 启动流程 			RuntimeService runtimeService = engine.getRuntimeService(); 			 		★//流程处理层面 			// 获取流程任务组件 流程启动后，使用 			TaskService taskService = engine.getTaskService(); 			// 部署流程文件 			repositoryService.createDeployment() 					.addClasspathResource("bpmn/First.bpmn").deploy(); 			// 启动流程 			runtimeService.startProcessInstanceByKey("process1"); 			// 查询第一个任务 			Task task = taskService.createTaskQuery().singleResult(); 			System.out.println("第一个任务完成前，当前任务名称：" + task.getName()); 			// 完成第一个任务 			taskService.complete(task.getId()); 			// 查询第二个任务 			task = taskService.createTaskQuery().singleResult(); 			System.out.println("第二个任务完成前，当前任务名称：" + task.getName()); 			// 完成第二个任务（流程结束） 			taskService.complete(task.getId()); 			task = taskService.createTaskQuery().singleResult(); 			System.out.println("流程结束后，查找任务：" + task); 			// 退出 	 第三章 Activiti数据库设计 	activiti流程引擎的数据表分为5大类，各类职责不同，有统一的命名规范 	 	1.通用数据表：只存放通用资源， ACT_GE 		资源表 ACT_GE_BYTEARRAY 			保存与流程引擎相关的资源 			一般用来保存字符串、流程文件的内容、流程图片内容 		属性表 ACT_GE_PROPERTY 			属性的键值对 	2.流程存储表：保存流程定义和部署信息 ACT_RE 		部署数据表 ACT_RE_DEPLOYMENT 			保存部署信息 		流程定义表 ACT_RE_PROCDEF 			保存流程文件 .bpmn 	3.身份数据表：有关身份数据的几张表 ACT_ID 		用户表 ACT_ID_USER 			保存用户信息 		用户账号（信息）表 ACT_ID_INFO 			activiti将用户、用户账号和用户信息分三种数据，用户表保存用户的数据， 			而其他两个被保存在这个表中 		用户组表 ACT_ID_GROUP 			用户组数据（组名称，组类型） 		关系表 ACT_ID_MEMBERSHIP 			保存用户属于哪个组 	4.运行时数据表：保存流程在运行过程中所产生的数据，例如流程实例、执行流、任务等 ACT_RU 		流程实例（执行流）表 ACT_RU_EXECUTION 		流程任务表 ACT_RU_TASK 		流程参数表 ACT_RU_VARIABLE 		流程与身份关系表 ACT_RU_IDENTITYLINK 		工作数据表 			ACT_RU_JOB 			ACT_RU_DEADLEFTER_JOB 			ACT_RU_SUSPENDED_JOB 			ACT_RU_TIMER_JOB 		事件描述表 ACT_RU_EVENT_SUBSCR 	5.历史数据表：流程引擎的日志表，操作过的流程元素将会被记录到历史表中 ACT_HI 		流程实例表 ACT_HI_PROCINST 		流程明细表 ACT_HI_DETAIL 		历史任务表和历史行为表 ACT_HI_TASKINST 		附件表和评论表 ACT_HI_ATTACHMENT 	6.DMN 规则引擎表 		activiti6加入了DMN规范的规则引擎模块 			1.决策部署表 ACT_DMN_DEPLOYMENT 				类似于流程定义部署，每次部署，向部署表中写入部署数据 			2.决策表 ACT_DMN_DECISION_TABLE 				决策类似于流程定义，保存决策模型 			3.部署资源表 ACT_DMN_DEPLOYMENT_RESOURCE 				规则引擎相关的资源，例如决策文件、图片 第四章 Activiti流程引擎配置 	1.流程引擎对象 		ProcessEngineConfiguration对象代表一个Activiti流程引擎的全部配置 			该对象的静态方法读取配置文件，生成实例 		1. 		/** 		 * 使用createProcessEngineConfigurationFromResourceDefault方法 		 * 创建ProcessEngineConfiguration实例 		 * @author Administrator 		 * 		 */ 		//使用Activiti默认的方式创建ProcessEngineConfiguration 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResourceDefault();	 		2. 		/** 		 * 使用CreateProcessEngineConfigurationFromResource方法创建ProcessEngineConfiguration实例 		 * 		 * @author Administrator 		 * 		 */ 		// 指定配置文件创建ProcessEngineConfiguration 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("my-activiti1.xml"); 		3. 		/** 		 * 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration 		 * 		 * @author yangenxiong 		 * 		 */ 		File file = new File("resource/input-stream.xml"); 		// 得到文件输入流 		InputStream fis = new FileInputStream(file); 		// 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromInputStream(fis); 		4. 		/** 		 * 使用createStandaloneInMemProcessEngineConfiguration创建ProcessEngineConfiguration 		 * 		 * @author yangenxiong 		 * 		 */ 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createStandaloneInMemProcessEngineConfiguration(); 		// 值为create-drop 		System.out.println(config.getDatabaseSchemaUpdate()); 		// 值为jdbc:h2:mem:activiti 		System.out.println(config.getJdbcUrl()); 		5. 		/** 		 * 使用CreateStandaloneProcessEngineConfiguration方法创建ProcessEngineConfiguration 		 * 		 * @author yangenxiong 		 * 		 */ 		 ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createStandaloneProcessEngineConfiguration(); 		// 默认值为 false 		System.out.println(config.getDatabaseSchemaUpdate()); 		// 默认值为 jdbc:h2:tcp://localhost/~/activiti 		System.out.println(config.getJdbcUrl()); 	2.数据源配置 	3.其他属性配置 		history配置 		asyncExecutorActivate配置 		邮件服务器配置 	示例： 		************************************************************************************ 		&lt;!-- 将databaseType设置为oracle --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="create-drop"/&gt; 			&lt;property name="databaseType" value="oracle"/&gt; 		&lt;/bean&gt; 		// 读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("database-type.xml"); 		// 启动Activiti 		ProcessEngine engine = config.buildProcessEngine(); 		// 关闭流程引擎 		engine.close(); 		************************************************************************************ 		&lt;!-- 使用C3P0数据源 --&gt; 		&lt;bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt; 			&lt;property name="driverClass" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="user" value="root" /&gt; 			&lt;property name="password" value="123456" /&gt; 		&lt;/bean&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="dataSource" ref="dataSource" /&gt; 		&lt;/bean&gt; 		// 读取c3p0-config.xml配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("config/c3p0-config.xml"); 		// 能正常输出，即完成配置 		DataSource ds = config.getDataSource(); 		// 查询数据库元信息，如果能查询则表示连接成功 		ds.getConnection().getMetaData(); 		// 结果为 com.mchange.v2.c3p0.ComboPooledDataSource 		System.out.println(config.getDataSource().getClass().getName()); 		 		或者 		&lt;!-- 不初始化任何属性 --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 		&lt;/bean&gt; 		// 创建C3P0数据源 		ComboPooledDataSource ds = new ComboPooledDataSource(); 		// 设置JDBC连接的各个属性 		ds.setUser("root"); 		ds.setPassword("123456"); 		ds.setJdbcUrl("jdbc:mysql://localhost:3306/act"); 		ds.setDriverClass("com.mysql.jdbc.Driver"); 		// 验证是否连接成功 		ds.getConnection().getMetaData(); 		// 读取Activiti配置文件 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("config/c3p0-coding.xml"); 		// 为ProcessEngineConfiguration设置dataSource属性 		config.setDataSource(ds); 		System.out.println(config.getDataSource()); 		************************************************************************************ 		&lt;!-- 将databaseSchemaUpdate设置为false --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="false"/&gt; 		&lt;/bean&gt; 		//读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("schemaUpdate-false.xml"); 		//启动Activiti 		config.buildProcessEngine(); 		************************************************************************************ 		&lt;!-- 将databaseSchemaUpdate设置为true --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="true"/&gt; 		&lt;/bean&gt; 		//读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("schemaUpdate-true.xml"); 		System.out.println(config.getClass().getName()); 		//启动Activiti 		config.buildProcessEngine(); 		************************************************************************************ 		&lt;!-- 将databaseSchemaUpdate设置为create-drop --&gt; 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="create-drop"/&gt; 		&lt;/bean&gt; 		// 读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("schemaUpdate-create-drop.xml"); 		// 启动Activiti 		ProcessEngine engine = config.buildProcessEngine(); 		// 关闭流程引擎 		engine.close(); 		************************************************************************************ 		&lt;bean id="processEngineConfiguration" 			class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="databaseSchemaUpdate" value="true"/&gt; 			&lt;property name="history" value="activity"/&gt; activiti/audit/full/none/ 		&lt;/bean&gt; 		// 读取Activiti配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("history-activity.xml");		 		//初始化流程引擎 		ProcessEngine engine = config.buildProcessEngine(); 		//得到流程存储对象 		RepositoryService repositoryService = engine.getRepositoryService(); 		//部署流程文件 		repositoryService.createDeployment().addClasspathResource("bpmn/history.bpmn20.xml").deploy(); 		//得到运行服务对象 		RuntimeService runtimeService = engine.getRuntimeService(); 		//创建参数 		Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 		vars.put("day", 10); 		//开始流程 		ProcessInstance pi = runtimeService.startProcessInstanceByKey("vacationProcess", vars); 		System.exit(0); 		************************************************************************************ 		&lt;bean id="processEngineConfiguration" 		class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; 			&lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/act" /&gt; 			&lt;property name="jdbcDriver" value="com.mysql.jdbc.Driver" /&gt; 			&lt;property name="jdbcUsername" value="root" /&gt; 			&lt;property name="jdbcPassword" value="123456" /&gt; 			&lt;property name="mailServerHost" value="smtp.163.com"&gt;&lt;/property&gt; 			&lt;property name="mailServerPort" value="25"&gt;&lt;/property&gt; 			&lt;property name="mailServerDefaultFrom" value="yangenxiong@163.com"&gt;&lt;/property&gt; 			&lt;property name="mailServerUsername" value="yangenxiong@163.com"&gt;&lt;/property&gt; 			&lt;property name="mailServerPassword" value="123456"&gt;&lt;/property&gt; 		&lt;/bean&gt; 		************************************************************************************ 		************************************************************************************ 	4.ProcessEngineCofiguration bean 		继承接口ProcessEngineCofiguration或ProcessEngineCofigurationImpl， 		自定义引擎启动类。 	5.Activiti的命令拦截器 		未学习 第五章 流程引擎的创建 	和汽车发动机启动很像 	1.ProcessEngineConfiguration的buildProcessEngine方法创建 	先读后配，相当于配置检查 		// 读取配置 		ProcessEngineConfiguration config = ProcessEngineConfiguration 				.createProcessEngineConfigurationFromResource("build_engine.xml"); 		// 创建ProcessEngine 		ProcessEngine engine = config.buildProcessEngine(); 	2.ProcessEngines对象 		调用ProcessEngines的init方法 			// 初始化ProcessEngines的Map, 			// 再加载Activiti默认的配置文件（classpath下的activiti.cfg.xml文件） 			// 如果与Spring整合，则读取classpath下的activiti-context.xml文件 			ProcessEngines.init(); 			// 得到ProcessEngines的Map 			Map&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); 			System.out.println(engines.size()); 			System.out.println(engines.get("default")); 		注册与注销ProcessEngine实例 			//读取自定义配置 			ProcessEngineConfiguration config = ProcessEngineConfiguration. 					createProcessEngineConfigurationFromResource("register.xml"); 			//创建ProcessEngine实例 			ProcessEngine engine = config.buildProcessEngine(); 			//获取ProcessEngine的Map 			Map&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); 			System.out.println("注册后引擎数：" + engines.size()); 			//注销ProcessEngine实例 			ProcessEngines.unregister( engine); 			System.out.println("调用unregister后引擎数：" + engines.size()); 		使用ProcessEngines的retry方法 			//得到资源文件的URL实例 			ClassLoader cl = Retry.class.getClassLoader(); 			URL url = cl.getResource("retry.xml"); 			//调用retry方法创建ProcessEngine实例 			ProcessEngineInfo info = ProcessEngines.retry(url.toString()); 			//得到流程实例保存对象 			Map&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines(); 			System.out.println("调用retry方法后引擎数：" + engines.size());	 		使用ProcessEngines的destroy方法 			// 进行初始化并且返回默认的ProcessEngine实例 			ProcessEngine engine = ProcessEngines.getDefaultProcessEngine(); 			System.out.println("调用getDefaultProcessEngine方法后引擎数量：" 					+ ProcessEngines.getProcessEngines().size()); 			// 调用销毁方法 			ProcessEngines.destroy(); 			// 最终结果为0 			System.out.println("调用destroy方法后引擎数量：" 					+ ProcessEngines.getProcessEngines().size()); 			// 得到资源文件的URL实例 			ClassLoader cl = Destroy.class.getClassLoader(); 			URL url = cl.getResource("activiti.cfg.xml"); 			// 调用retry方法创建ProcessEngine实例 			ProcessEngines.retry(url.toString()); 			System.out.println("只调用 retry方法后引擎数量：" 					+ ProcessEngines.getProcessEngines().size()); 			// 调用销毁方法，没有效果 			ProcessEngines.destroy(); 			System.out.println("调用destory无效果，引擎数量：" 					+ ProcessEngines.getProcessEngines().size()); 	3.ProcessEngine对象 		一个ProcessEngine实例代表一个流程引擎，实例中保存着各个服务组件的实例，根据这些服务组件，可以操作流程实例 		、任务、系统角色等数据。 		1.服务组件： 			好像J2EE的Service层，通过getXXXService方法得到实例 			包含的实例： 				RespositoryService:提供一系列管理流程定义和流程部署的API 				RuntimeService:在流程运行时对流程实例进行管理与控制 				TaskService:对流程任务进行管理，例如任务提醒、任务完成和创建任务等 				IdentityService:提供对流程角色数据进行管理的API，这些角色数据包括用户组、用户及它们之间的关系 				ManagementService:提供对流程引擎进行管理和维护的服务 				HistoryService:对流程的历史数据进行操作，包括查询、删除这些历史数据 				DynamicBpmnService:使用该服务，可以不需要重新部署流程模型，就可以实现对流程模型的修改 		2.关闭流程引擎： 			engine.close(); 			根据配置中databaseSchemeUpdate属性判断是否删除数据库	 		3.流程引擎名称: 			默认名称时default 			使用config.setProcessEngineName("test"); 			示例： 				ProcessEngineConfiguration config = ProcessEngineConfiguration. 				createProcessEngineConfigurationFromResource("name.xml"); 				//设置流程引擎名称 				config.setProcessEngineName("test"); 				ProcessEngine engine = config.buildProcessEngine(); 				//根据名称查询流程引擎 				ProcessEngine engineTest = ProcessEngines.getProcessEngine("test"); 				System.out.println("创建的引擎实例：" + engine); 				System.out.println("查询的引擎实例：" + engineTest); 	 第六章 用户组与用户 	1.用户组管理： 		1.Group对象： 			通过业务层组件去创建 			IdentityService 		2.创建用户组： 			id,name,type 然后保存， 				技巧：group.setId(null) 可以让数据库自动生成主键id 		3.修改用户组： 			setter 		4.删除用户组： 			deleteGroup(id) 	2.Activiti数据查询： 		Activiti提供了一套数据查询API供开发者使用，可以使用各个服务组件的createXXXQuery方法来获取这些查询对象。 		 		1.查询对象： 			Query是多有查询对象的父接口，提供了很多基础的方法： 				asc	设置查询结果的排序方式为升序 				count	计算查询结果的数据量 				desc	降序 				list	封装查询结果，返回相应类型的集合 				listPage	分页返回查询结果 				singleResult	查询单条符合条件的数据，没有返回null,多条抛出异常 		2.list方法： 			// 使用list方法查询全部的部署数据 			List&lt;Group&gt; datas = identityService.createGroupQuery().list(); 		3.listPage方法： 			//调用listPage方法，从索引为2的记录开始，查询3条记录 			List&lt;Group&gt; datas = identityService.createGroupQuery().listPage(2, 3); 		4.count方法： 			// 使用list方法查询全部的部署数据 			long size = identityService.createGroupQuery().count(); 		5.排序方法： 			List&lt;Group&gt; datas = identityService.createGroupQuery().orderByGroupName().asc().list(); 		6.ID排序问题： 			主键均是字符型，排序要额外处理 		7.多字段排序： 			List&lt;Group&gt; datas = identityService.createGroupQuery() 				.orderByGroupId().desc() 				.orderByGroupName().asc().list(); 		8.singleResult方法 		9.用户组数据查询： 			相应的数据查询对象除了拥有基类的方法，还有自己的方法： 			// groupId方法 			Group groupA = identityService.createGroupQuery().groupId(aId).singleResult(); 			 			// groupName方法 			Group groupB = identityService.createGroupQuery().groupName("GroupB").singleResult(); 			 			// groupType方法 			Group groupC = identityService.createGroupQuery().groupType("typeC").singleResult(); 			 			// groupNameLike方法 			List&lt;Group&gt; groups = identityService.createGroupQuery().groupNameLike("%group%").list(); 		10.原生SQL查询： 			createNativeGroupQuery() 			groups = identityService.createNativeGroupQuery() 				.sql("select * from ACT_ID_GROUP where NAME_ = #{name}") 				.parameter("name", "GroupD").list(); 	 	3.用户管理： 		User对象 		添加用户 newUser saveUser 		修改用户 		删除用户 		验证用户密码 checkPassWord 是用户密码，不是用户的账号密码 		用户数据查询 UserQuery对象 		设置认证用户 setAuthenticatedUserId 多线程中使用 	4.用户信息管理： 		添加和删除用户信息： 			用为ACT_ID_INFO数据结构是key-value，没有查询对象,通过id+key可以查到记录 			setUserInfo(String userId,String key,String value) 			deleteUserInfo(String userId,String key) 			示例： 				// 创建用户 				creatUser(identityService, id, "angus", "young", "yangenxiong@163.com", "abc"); 				// 创建一个用户信息 				identityService.setUserInfo(id, "age", "30"); 				// 创建第二个用户信息 				identityService.setUserInfo(id, "weight", "60KG"); 				// 删除用户年龄信息 				identityService.deleteUserInfo(id, "age"); 		查询用户信息： 			getUserInfo(String userId,String key) 		设置用户图片： 			setUserPicture 			getUserPicture 			先转为byte array，再存储，图片存放再资源表中，用户信息表存的是图片在的资源表的id 				// 读取图片并转换为byte数组 				FileInputStream fis = new FileInputStream(new File("resource/artifact/picture.png"));		 				BufferedImage img = ImageIO.read(fis); 				ByteArrayOutputStream output = new ByteArrayOutputStream(); 				ImageIO.write(img, "png", output); 				//获取图片的byte数组 				byte[] picArray = output.toByteArray();		 				// 创建Picture实例 				Picture picture = new Picture(picArray, "angus image"); 				// 为用户设置图片 				identityService.setUserPicture(id, picture);	 	5.用户组和用户的关系： 		多对多，中间表ACT_ID_MEMBERSHIP 		绑定关系： 			// 绑定关系 			identityService.createMembership(user.getId(), group.getId()); 		接触绑定： 			// 删除绑定关系 			identityService.deleteMembership(user.getId(), group.getId()); 		查询用户组下的用户： 			使用用户的查询对象 memberOfGroup(group.getId()) 				List&lt;User&gt; users = identityService.createUserQuery() 				.memberOfGroup(group.getId()).list(); 		查询用户所属的用户组： 			使用用户组的查询对象 groupMenber(user.getId()) 				List&lt;Group&gt; groups = identityService.createGroupQuery() 						.groupMember(user.getId()).list(); 	 第七章 流程存储 	RepositoryService 主要对Activiti中的流程存储的相关数据进行操作，这些操作包括对流程存储数据的管理、 		流程部署以及对流程的基本操作等。 	1.流程文件部署： 		RepositoryService负责对流程文件的部署以及流程定义的管理 		 		1.Deployment对象： 			只提供getter方法 		2.DeploymentBuilder对象： 			DeploymentBuilder builder = repositoryService.createDeployment(); 		3.添加输入流资源： 			builder.addInputStream("inputa",a) 				// 第一个资源输入流 				InputStream is1 = new FileInputStream(new File( 						"resource/artifact/flow_inputstream1.png")); 				// 第二个资源输入流 				InputStream is2 = new FileInputStream(new File( 						"resource/artifact/flow_inputstream1.png")); 				// 创建DeploymentBuilder实例 				DeploymentBuilder builder = repositoryService.createDeployment(); 				// 为DeploymentBuilder添加资源输入流 				builder.addInputStream("inputA", is1); 				builder.addInputStream("inputB", is2); 				// 执行部署方法 				builder.deploy(); 		4.添加classpath资源： 			builder.addClasspathResource("artifact/classpath.png") 				//添加classpath下的资源 				builder.addClasspathResource("artifact/classpath.png"); 				//执行部署（写入到数据库中） 				builder.deploy(); 		5.添加字符串资源： 			//添加String资源 			builder.addString("test", "this is string method"); 			//执行部署（写入到数据库中） 			builder.deploy(); 		6.添加压缩包资源： 			//获取zip文件的输入流 			FileInputStream fis = new FileInputStream(new File("resource/artifact/ZipInputStream.zip")); 			//读取zip文件，创建ZipInputStream对象 			ZipInputStream zi = new ZipInputStream(fis); 			//添加Zip压缩包资源 			builder.addZipInputStream(zi); 			//执行部署（写入到数据库中） 			builder.deploy(); 		7.添加BPMN模型资源： 			addBpmnModel 			addBytes 		8.修改部署信息： 			//设置各个属性 			builder.name("crazyit").tenantId("tenanId").key("myKey").category("myCategory"); 		9.过滤重复部署： 			重复部署不再写入数据库，若不同，添加方法后，仍会修改数据库 			builderB.enableDuplicateFiltering(); 		10.取消部署时的验证： 			默认情况下，在部署时会对流程的XML文件进行验证，包括验证是否符合BPMN规范、定义的流程是否可执行。 				builderB.addClasspathResource("bpmn/bpmnError.bpmn") 				.disableBpmnValidation().deploy(); 	2.流程定义的管理： 		中止流程定义、激活流程定义和设置流程权限 		 		1.ProcessDefinition对象： 			有很多getter方法 		2.流程部署： 			将流程的描述文件写入数据库 		3.流程图部署： 		4.流程图自动生成： 			不自动生成 ，在配置文件中加&lt;property name="createDiagramOnDeploy" value="false" /&gt; 		5.中止与激活流程定义： 		6.流程定义缓存配置： 		7.自定义缓存 			自定义Java类，维护map 	3.流程定义的权限： 		activiti没有拦截检查，完全由开发者定义用户权限，然后根据表来查询 		1.设置流程定义的用户权限： 			repositoryService.addCandidateStarterUser(def.getId(), "user1"); 		2.设置流程定义的用户权限： 			repositoryService.addCandidateStarterGroup(def.getId(), "group1"); 		3.IdentityLink对象： 			对应表 ACT_RU_IDENTITYLINK 		4.查询权限数据： 			// 根据用户查询用权限的流程定义 			List&lt;ProcessDefinition&gt; defs = repositoryService 					.createProcessDefinitionQuery().startableByUser("user1").list(); 			// 根据流程定义查询用户组数据 			List&lt;Group&gt; groups = identityService.createGroupQuery() 					.potentialStarter(def.getId()).list(); 			 			// 根据流程定义查询用户数据 			List&lt;User&gt; users = identityService.createUserQuery() 					.potentialStarter(def.getId()).list(); 			 			// 根据流程定义查询全部的 IdentityLink（ACT_RU_IDENTITYLINK表） 数据 			List&lt;IdentityLink&gt; links = repositoryService 					.getIdentityLinksForProcessDefinition(def.getId());	 	4.RepositoryService数据查询与删除： 		1.查询部署资源 			// 查询资源文件 			InputStream is = repositoryService.getResourceAsStream(dep.getId(), 				"artifact/GetResource.txt"); 			// 读取输入流 			int count = is.available(); 			byte[] contents = new byte[count]; 			is.read(contents); 			String result = new String(contents); 		2.查询流程文件 		3.查询流程图 		4.查询部署的资源名称 		5.删除部署资源 		6.DeploymentQuery对象 		7.ProcessDefinitionQuery对象 第八章 流程任务管理 	1.任务的创建和删除： 		1.Task接口： 			ACT_RU_TASK 		2.创建与保存Task实例： 			newTask 			saveTask 		3.删除任务： 			多个删除方法 	2.任务权限： 		1.设置候选用户组 		2.设置候选用户 		3.权限数据查询 			用户组和用户的Query对象没有提供根据任务ID查询用户组和用户的方法 		4.设置任务持有人： 			setOwner 		5.设置任务代理人 			setAssignee 		6.添加任务权限数据 		7.删除用户组权限 		8.删除用户权限 	3.任务参数： 		参数类型分为流程参数和任务参数 		1.基本类型参数设置： 			setVariable 		2.序列化参数： 			对象必须实现序列化接口 		3.获取参数 			getVariable(taskId,argName) 		4.参数作用域： 			setVariableLocal 局部参数 			getVariableLocal 		5.设置多个参数： 			setVariables 			setVariablesLocal	 				//初始化参数 				Map&lt;String,Object&gt; vars = new HashMap&lt;String, Object&gt;(); 				vars.put("days", 10); 				vars.put("target", "欧洲"); 				taskService.setVariables(task1.getId(), vars); 			或使用序列化对象 		6.数据对象： 			BPMN文件中的dataObject元素 				Map&lt;String, DataObject&gt; objs = taskService.getDataObjects(task.getId()); 	 	4.任务附件管理： 		1.Attachment对象： 		2.创建任务附件： 			// 设置任务附件 			taskService.createAttachment("web url", task.getId(), pi.getId(), "163.com", 					"163 web page", "http://www.163.com"); 			// 创建图片输入流 			InputStream is = new FileInputStream(new File("resource/artifact/result.png")); 			// 设置输入流为任务附件 			taskService.createAttachment("web url", task.getId(), pi.getId(), "163.com", 					"163 web page", is); 		3.附件查询： 		4.删除附件 	5.任务评论和事件记录： 		1.Comment对象: 		2.新增任务评论 			addComment 		3.事件的记录 		4.数据查询 	6.任务声明与完成： 		1.任务声明： 			claim 		2.任务完成： 			complete 第九章 流程控制 	TaskService主要用于任务管理，包括任务操作、任务数据管理等 	IdentityService主要用于管理流程的身份数据 	RepositoryService主要管理流程部署的数据 	RuntimeService主要用于管理流程在运行时产生的数据，以及对流程进行操作的API 	流程运行时产生的数据包括流程参数、事件、流程 实例及执行流等 	流程的操作包括启动流程，流程前进等 	1.流程实例与执行流： 		1.流程实例与执行流的概念： 			启动一个流程时，会创建一个流程实例，每个流程实例至少有一个执行流 		2.流程实例和执行流对象 ProcessInstance Execution 	2.启动流程: 		RuntimeService提供流程启动的多个方法，命名均为startProcessInstanceByXXX 			XXX可以是流程定义的ID、Key【流程描述文件中process的id属性】和message 		1.startProcessInstanceById方法： 		2.startProcessInstanceByKey方法 		3.startProcessInstanceByMessage方法 			消息事件 	3.流程参数： 		1.设置与查询流程参数： 			设置需要传入执行流的ID 			查询需要传入执行流的ID和参数名称 			setViriable 		2.流程参数的作用域： 			局部只作用域执行流 			setViriableLocal 		3.其他设置参数的方法： 			setViriables 			setViriablesLocal 	4.流程操作： 		启动流程、发送信号、中断流程、激活流程 		1.流程触发： 			对于receiveTask等流程节点，使用trigger方法进行触发，使流程往前进行 		2.触发信号事件： 			事件节点是在流程中记录事件发生的流程元素，BPMN2 规范中主要有两种类型的事件： 				捕获事件Catching 需要信号才能前进 					// 发送信号给事件，流程结束 					runtimeService.signalEventReceived("testSignal"); 				抛出事件Throwing 		3.触发消息事件： 			消息事件节点 				// 触发消息事件 				runtimeService.messageEventReceived("testMsg", exe.getId()); 		4.中断和激活流程： 			SUSPENSION_STATE_字段保存中断状态，1为活跃，2为中断 				runtimeService.suspendProcessInstanceById(pi.getId()); 				runtimeService.activateProcessInstanceById(pi.getId()); 		5.删除流程： 			runtimeService.deleteProcessInstance(pi.getId(), "abc"); 	5.流程数据查询： 		1.执行流查询： 		2.流程实例查询 			 第十章 历史数据管理和流程引擎管理 	历史数据： 		activiti删除的流程定义、流程任务和流程实例的数据 		已经完成的流程实例以及相关数据 	ManagementService可以查询引擎数据库信息、工作信息，直接对数据库操作 	 	1.历史数据管理： 		1.历史流程实例查询： 			historyService.createHistoricProcessInstanceQuery() 		2.历史任务查询： 			historyService.createHistoricTaskInstanceQuery() 		3.历史行为查询： 			historyService.createHistoricActivityInstanceQuery() 		4.历史流程明细查询： 			流程的明细信息包括流程参数和流程表单属性 				默认情况下，Activiti不会记录明细，当history配置为full级别时，才会记录 		5.删除历史流程实例和历史任务： 			historyService.deleteHistoricProcessInstance(pi1.getId()); 			级联删除实例 	2.工作的产生： 		异步工作时，用工作表保存任务 			一般的工作 ACT_RU_JOB 			定时中断任务 ACT_RU_SUSPENDED_JOB 			定时任务 ACT_RU_TIMER_JOB 		1.异步任务产生的工作： 			Java Service Task主要用于在任务中调用外部的Java 类 		2.定义中间事件产生的工作： 			定义了定时器相关的节点，会在某个定义的时间点上执行。 			可以加入定时器的节点： 				中间事件节点、流程开始事件节点和边界事件节点 		3.定义边界事件产生的工作： 		4.定时开始事件产生的工作 		5.流程抛出事件产生的工作 		6.暂停工作的产生 		7.无法执行的工作 	3.工作管理： 		ManagementService提供工作查询对象（对象返回job实例） 		1.工作查询对象：	 			4个： 				JobQuery 				TimerJobQuery 				SuspendedJobQuery 				DeadLetterJobQuery 		2.获取工作异常信息： 			getXXXJobExceptionStacktrace 		3.转移与删除工作： 			move 			delete 	4.数据库管理： 		1.查询引擎属性 		2.数据表信息查询 		3.数据库操作 		4.数据表查询 	 第十一章 流程事件 	要点： 		BPMN的事件分类 		各种流程的事件定义 		开始事件的应用 		结束事件的应用 		边界事件的应用 		中间事件的应用 	 	1.事件分类： 		1.按照事件的位置分类： 			开始事件：表示流程开始的事件 			结束事件：表示流程结束的事件 			中间事件：出现在流程中，单独作为流程节点的事件 			边界事件：附属于某个流程节点（如子流程，流程任务）的事件 		2.按照事件的特性分类： 			Catching事件 			Throwing事件 				开始事件是Catching 				结束事件是throwing 				边界时catching 				中间 都有 	2.事件定义： 		与事件结合 	3.开始事件： 		无指定开始事件 		定时器开始事件 		消息开始事件 		错误开始事件 	4.结束事件： 		无指定结束事件 		错误结束事件 		取消结束事件 		中止结束事件 	5.边界事件 		定时器 		信号 		错误 		取消 	6.中间事件 		定时器 捕获 		信号 捕获 抛出 		消息 抛出	 	7.补偿事件 		补偿边界 			事务子流程取消触发 			补偿中间触发 		补偿中间 第十二章 流程任务 	BPMN任务概述 	用户任务的应用 	指定服务任务的行为 	WebService任务的应用 	脚本任务的应用 	任务监听器的使用 	流程监听器的使用 	1.用户任务： 		1.分配任务候选人 			&lt;userTask id="usertask1" name="Task1"&gt; 				&lt;potentialOwner&gt; 					&lt;resourceAssignmentExpression&gt; 						&lt;formalExpression&gt;user(angus), group(management), boss 						&lt;/formalExpression&gt; 					&lt;/resourceAssignmentExpression&gt; 				&lt;/potentialOwner&gt; 			&lt;/userTask&gt; 		2.分配任务代理人 			&lt;userTask id="usertask1" name="Task 1"&gt; 				&lt;humanPerformer&gt; 					&lt;resourceAssignmentExpression&gt; 						&lt;formalExpression&gt;user1&lt;/formalExpression&gt; 					&lt;/resourceAssignmentExpression&gt; 				&lt;/humanPerformer&gt; 			&lt;/userTask&gt; 		3.权限分配扩展 			使用activiti扩展来分配任务的候选人和代理人 				&lt;userTask id="usertask1" name="Assignee" activiti:assignee="user1"&gt;&lt;/userTask&gt; 				&lt;userTask id="usertask2" name="Candidate User" 					activiti:candidateUsers="user1, user2"&gt;&lt;/userTask&gt; 				&lt;userTask id="usertask3" name="Candidate Group" 					activiti:candidateGroups="group1,group2"&gt;&lt;/userTask&gt; 		4.使用任务监听器进行权限分配 			设置监听类 				public class UserTaskListener implements TaskListener { 					public void notify(DelegateTask delegateTask) { 						System.out.println("使用任务监听器设置任务权限"); 						delegateTask.setAssignee("user1"); 						delegateTask.addCandidateGroup("group1"); 						delegateTask.addCandidateUser("user1");		 					} 				} 			配置监听器 				&lt;userTask id="usertask1" name="Assignee"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:taskListener event="create" 							class="org.crazyit.activiti.UserTaskListener"&gt;&lt;/activiti:taskListener&gt; 					&lt;/extensionElements&gt; 				&lt;/userTask&gt; 		5.使用JUEL分配权限 			 			&lt;userTask id="usertask2" name="Task 1" activiti:assignee="${authService.getUserAssignee()}"&gt;&lt;/userTask&gt; 			&lt;userTask id="usertask3" name="Task 2" activiti:candidateUsers="${authService.getCandidateUsers()}"&gt;&lt;/userTask&gt; 			&lt;userTask id="usertask4" name="Task 3" activiti:candidateGroups="${authService.getCandidateGroups()}"&gt;&lt;/userTask&gt; 			&lt;userTask id="usertask5" name="Task 4" activiti:assignee="${authService.lastUser}"&gt;&lt;/userTask&gt; 		 			服务Bean 			public class AuthService implements Serializable { 	 				private String lastUser = "angus"; 				 				public String getLastUser() { 					return this.lastUser; 				} 				 				public AuthService() { 					System.out.println("create AuthService"); 				} 				//使用方法为任务指定代理人 				public String getUserAssignee() { 					return "crazyit"; 				} 				 				//使用方法为任务指定候选人 				public List&lt;String&gt; getCandidateUsers() { 					List&lt;String&gt; result = new ArrayList&lt;String&gt;(); 					result.add("user1"); 					result.add("user2"); 					return result; 				} 				 				//使用方法为任务指定候选用户组 				public List&lt;String&gt; getCandidateGroups() { 					List&lt;String&gt; result = new ArrayList&lt;String&gt;(); 					result.add("group1"); 					result.add("group2"); 					return result; 				} 			} 			添加流程变量 			Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 			vars.put("authService", new AuthService()); 			// 启动流程 			ProcessInstance pi = runtimeService.startProcessInstanceByKey("process1", vars); 					 	2.服务任务： 		activiti:class: JavaDelegate或ActivitiBehavior的实现类 		activiti:delegateExpression 		activiti:expression 直接调用bean 		 		1.实现JavaDelegate 			 			public class MyJavaDelegate implements JavaDelegate, Serializable { 				public void execute(DelegateExecution execution) { 					System.out.println(" 实现 JavaDelegate 的 JavaSeviceTask: " + this); 				} 			} 			activiti:class方式： 				&lt;serviceTask id="servicetask1" name="Service Task 1" 					activiti:class="org.crazyit.activiti.MyJavaDelegate"&gt;&lt;/serviceTask&gt; 			activiti:delegateExpression 方式： 				Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 				vars.put("myDelegate", new MyJavaDelegate()); 				// 启动流程 				ProcessInstance pi = runtimeService.startProcessInstanceByKey("process1", vars); 				&lt;serviceTask id="servicetask1" name="Service Task" 					activiti:delegateExpression="${myDelegate}"&gt;&lt;/serviceTask&gt; 			 		2.使用普通的JavaBean 			调用Bean方法和属性 			Bean类： 				public class MyJavaBean implements Serializable { 					private String name = "crazyit"; 					 					public String getName() { 						return this.name; 					} 					 					public void print(Execution exe) { 						System.out.println("使用Java Bean的print方法：" + exe.getId()); 					} 				} 			 			BPMN： 				&lt;serviceTask id="servicetask1" name="Service Task" 					activiti:expression="${myBean.print(execution)}"&gt;&lt;/serviceTask&gt; 				&lt;serviceTask id="servicetask2" name="Service Task" 					activiti:expression="${execution.setVariable('myName', myBean.name)}"&gt;&lt;/serviceTask&gt; 			设置参数： 				Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 				vars.put("myBean", new MyJavaBean()); 				// 启动流程 				ProcessInstance pi = runtimeService.startProcessInstanceByKey( 						"process1", vars); 		3.Shell任务： 			执行cmd命令 	 	3.流程与任务监听器： 		 		任务监听器taskListener 设置event ="create/complete/assignment"表示用户任务创建时调用监听器 			&lt;userTask id="usertask1" name="User Task"&gt; 				&lt;extensionElements&gt; 					&lt;activiti:taskListener event="create" 						class="org.crazyit.activiti.PropertyConfigListener" /&gt; 				&lt;/extensionElements&gt; 			&lt;/userTask&gt; 			属性注入，往任务监听器中注入属性 				&lt;userTask id="usertask1" name="User Task"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:taskListener event="create" 							class="org.crazyit.activiti.PropertyInjection"&gt; 							&lt;activiti:field name="userName" stringValue="crazyit" /&gt; 						&lt;/activiti:taskListener&gt; 					&lt;/extensionElements&gt; 				&lt;/userTask&gt; 				监听器类： 					public class PropertyInjection implements TaskListener { 						private Expression userName; 						 						public void setUserName(Expression userName) { 							this.userName = userName; 						} 						 						public void notify(DelegateTask delegateTask) { 							System.out.println("属性注入后的值：" + this.userName.getValue(null)); 						} 					} 		 		流程监听器： 			&lt;activiti:executionListener event="XXXXX" 				class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 				&lt;activiti:field name="message"&gt; 					&lt;activiti:string&gt;&lt;/activiti:string&gt; 				&lt;/activiti:field&gt; 			&lt;/activiti:executionListener&gt; 			 			 			&lt;process id="process1" name="process1" isExecutable="true"&gt; 				&lt;extensionElements&gt; 					&lt;activiti:executionListener event="end" 						class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 						&lt;activiti:field name="message"&gt; 							&lt;activiti:string&gt;&lt;![CDATA[流程结束]]&gt;&lt;/activiti:string&gt; 						&lt;/activiti:field&gt; 					&lt;/activiti:executionListener&gt; 					&lt;activiti:executionListener event="start" 						class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 						&lt;activiti:field name="message"&gt; 							&lt;activiti:string&gt;&lt;![CDATA[流程开始]]&gt;&lt;/activiti:string&gt; 						&lt;/activiti:field&gt; 					&lt;/activiti:executionListener&gt; 				&lt;/extensionElements&gt; 				&lt;startEvent id="startevent1" name="Start"&gt;&lt;/startEvent&gt; 				&lt;userTask id="usertask1" name="Task 1"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:executionListener event="end" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[用户任务结束]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 						&lt;activiti:executionListener event="start" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[用户任务开始]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 					&lt;/extensionElements&gt; 				&lt;/userTask&gt; 				&lt;exclusiveGateway id="exclusivegateway1" name="Exclusive Gateway"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:executionListener event="start" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[网关开始]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 					&lt;/extensionElements&gt; 				&lt;/exclusiveGateway&gt; 				&lt;intermediateThrowEvent id="signalintermediatethrowevent1" 					name="SignalThrowEvent"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:executionListener event="end" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[中间事件结束]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 						&lt;activiti:executionListener event="start" 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message"&gt; 								&lt;activiti:string&gt;&lt;![CDATA[中间事件开始]]&gt;&lt;/activiti:string&gt; 							&lt;/activiti:field&gt; 						&lt;/activiti:executionListener&gt; 					&lt;/extensionElements&gt; 				&lt;/intermediateThrowEvent&gt; 				&lt;endEvent id="endevent1" name="End"&gt;&lt;/endEvent&gt; 				&lt;sequenceFlow id="flow1" sourceRef="startevent1" 					targetRef="exclusivegateway1"&gt; 					&lt;extensionElements&gt; 						&lt;activiti:executionListener 							class="org.crazyit.activiti.ExecutionListenerInvocation"&gt; 							&lt;activiti:field name="message" stringValue="从开始事件到网关的顺序流"/&gt; 						&lt;/activiti:executionListener&gt; 					&lt;/extensionElements&gt;	 				&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow3" sourceRef="usertask1" 					targetRef="signalintermediatethrowevent1"&gt;&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow4" sourceRef="signalintermediatethrowevent1" 					targetRef="endevent1"&gt;&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow5" sourceRef="exclusivegateway1" 					targetRef="usertask1"&gt;&lt;/sequenceFlow&gt; 			&lt;/process&gt; 				 第十三章 其他流程元素	 	1.子流程： 		1.嵌入式子流程 			&lt;subProcess id="subprocess1" name="Sub Process"&gt; 				&lt;startEvent id="startevent2" name="Start"&gt;&lt;/startEvent&gt; 				&lt;serviceTask id="usertask2" name="Sub Task" 					activiti:class="org.crazyit.activiti.EmbededJavaDelegate"&gt;&lt;/serviceTask&gt; 				&lt;endEvent id="endevent1" name="End"&gt;&lt;/endEvent&gt; 				&lt;sequenceFlow id="flow3" sourceRef="startevent2" 					targetRef="usertask2"&gt;&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow4" sourceRef="usertask2" 					targetRef="endevent1"&gt;&lt;/sequenceFlow&gt; 			&lt;/subProcess&gt; 		 		 		 		2.调用式子流程 			&lt;callActivity id="subprocess1" name="人事、总监子流程" calledElement="SubProcess"&gt; 				&lt;extensionElements&gt; 					&lt;activiti:in source="days" target="newDays"&gt;&lt;/activiti:in&gt; 					&lt;activiti:out source="myDays" target="resultDays"&gt;&lt;/activiti:out&gt; 				&lt;/extensionElements&gt; 			&lt;/callActivity&gt; 			 			// 部署流程文件 			repositoryService 					.createDeployment() 					.addClasspathResource( 							"bpmn/CallActivityVariable.bpmn") 					.addClasspathResource("bpmn/SubProcess.bpmn") 					.deploy();		 		3.事件子流程 		4.事务子流程 		5.特别子流程 			bpmn不指定子流程的执行顺序,实际运行时指定运行顺序 			&lt;adHocSubProcess id="adhocSubProcess" ordering="Sequential"&gt; 				&lt;userTask id="subProcessTask" name="Task in subprocess" /&gt; 				&lt;userTask id="subProcessTask2" name="Task2 in subprocess" /&gt; 			&lt;/adHocSubProcess&gt; 			 			// 查询子流程的执行流 			Execution exe = runtimeService.createExecutionQuery() 					.processInstanceId(pi.getId()).activityId("adhocSubProcess") 					.singleResult(); 			// 让执行流到达第二个任务 			runtimeService.executeActivityInAdhocSubProcess(exe.getId(), 					"subProcessTask2");	 			 			// 完成第二个任务 			Task subProcessTask2 = taskService.createTaskQuery() 					.processInstanceId(pi.getId()) 					.taskDefinitionKey("subProcessTask2").singleResult(); 			taskService.complete(subProcessTask2.getId()); 			// 完成特别子流程✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ 			//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ 			runtimeService.completeAdhocSubProcess(exe.getId()); 			//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓ 		 	2.顺序流与网关： 		顺序流： 			条件顺序流 				&lt;sequenceFlow id="flow4" name="小于等于5天" sourceRef="exclusivegateway1" 					targetRef="usertask2"&gt; 					&lt;conditionExpression xsi:type="tFormalExpression"&gt; 					&lt;![CDATA[ 					${days &lt;= 5} 					]]&gt; 					&lt;/conditionExpression&gt; 				&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow5" name="大于5天" sourceRef="exclusivegateway1" 					targetRef="usertask3"&gt; 					&lt;conditionExpression xsi:type="tFormalExpression"&gt; 					&lt;![CDATA[ 					${days &gt; 5} 					]]&gt; 					&lt;/conditionExpression&gt; 				&lt;/sequenceFlow&gt; 				执行示例： 				Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 				vars.put("days", 6); 				ProcessInstance pi = runtimeService.startProcessInstanceByKey( 				"process1", vars); 			默认顺序流 				&lt;userTask id="usertask1" name="填写请假申请" default="flow1"&gt;&lt;/userTask&gt; 				 				&lt;sequenceFlow id="flow1" sourceRef="usertask1" targetRef="usertask2"&gt;&lt;/sequenceFlow&gt; 				&lt;sequenceFlow id="flow2" sourceRef="usertask1" targetRef="usertask3"&gt; 					&lt;conditionExpression xsi:type="tFormalExpression"&gt;&lt;![CDATA[ 					${days &gt; 5} 					]]&gt;&lt;/conditionExpression&gt; 				&lt;/sequenceFlow&gt; 				 		流程网关： 			单向网关 			并行网关 			兼容网关 			事件网关 			组合网关（Activiti不支持） 			单向网关 			并行网关： 				分叉 合并 			兼容网关： 				单向网关和并行网关结合 			事件网关： 				哪个事件先触发，就转向哪一个执行流 				事件网关只会选择最先触发的事件所在的分支向前执行 	 	3.流程活动的特性： 		1.多实例活动 			&lt;multiInstanceLoopCharacteristics 				isSequential="true"&gt; 				&lt;loopCardinality&gt;2&lt;/loopCardinality&gt; 			&lt;/multiInstanceLoopCharacteristics&gt; 		2.设置循环数据 			&lt;multiInstanceLoopCharacteristics 				isSequential="false" activiti:collection="datas1"&gt; 			&lt;/multiInstanceLoopCharacteristics&gt; 			 			List&lt;String&gt; datas1 = new ArrayList&lt;String&gt;(); 			datas1.add("a"); 			datas1.add("b"); 			Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;(); 			vars.put("datas1", datas1); 			ProcessInstance pi = runtimeService.startProcessInstanceByKey( 				"process1", vars); 		3.获取循环元素 			&lt;multiInstanceLoopCharacteristics 				isSequential="true" activiti:collection="datas1" 				activiti:elementVariable="data"&gt; 			&lt;/multiInstanceLoopCharacteristics&gt; 			public class ServiceB implements JavaDelegate { 				public void execute(DelegateExecution execution) { 				 					System.out.println("获取循环参数：" + execution.getVariable("data")); 				} 			} 		4.循环的内置参数 			nrOfInstances:实例总数 			nrOfActiveInstances:当前正在执行的实例总数	 			nrOfCompletedInstances:已经完成的实例总数 			loopCounter:当前循环的索引 		5.循环结束条件 			&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt; 			 			&lt;multiInstanceLoopCharacteristics 				isSequential="true" activiti:collection="${datas}" 				activiti:elementVariable="data"&gt; 				&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt; 			&lt;/multiInstanceLoopCharacteristics&gt; 第十四章 Activiti与规则引擎			 	1.Drools介绍与运行 		代码与业务规则分离 	2.规则语法 		全局变量 		函数 		规则属性 			activation-group 激活组，组内只有一个规则会被激活 			salience 优先级 		条件语法 			when then 		行为语法 			修改事实对象 			insert 			update 	3.Activiti整合Drools 		&lt;property name="customPostDeployers"&gt; 			&lt;list&gt; 				&lt;bean class="org.activiti.engine.impl.rules.RulesDeployer" /&gt; 			&lt;/list&gt; 		&lt;/property&gt;	 		 		&lt;businessRuleTask id="businessruletask1" name="匹配销售规则" 			activiti:ruleVariablesInput="${member}" 			activiti:resultVariable="members"&gt; &lt;/businessRuleTask&gt; 第十五章 基于DMN的Activiti规则引擎 	1.DMN规范 	2.规则引擎使用 	3.MVEL表达式 第十六章 整合第三方框架 	 	引擎，各种服务，都可以直接注入 第十七章 Rest 	 第十八章 	表单 	流程图与XML的转换 	回退 	会签">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-8b38246e.css" as="style"><link rel="stylesheet" href="/assets/style-8b38246e.css">
    <link rel="modulepreload" href="/assets/app-a2c721dc.js"><link rel="modulepreload" href="/assets/activiti6基础笔记.html-1b61032b.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/activiti6基础笔记.html-f51799c6.js"><link rel="prefetch" href="/assets/index.html-e1021f54.js" as="script"><link rel="prefetch" href="/assets/intro.html-c1e4b2dc.js" as="script"><link rel="prefetch" href="/assets/slides.html-b45a6447.js" as="script"><link rel="prefetch" href="/assets/index.html-458c8341.js" as="script"><link rel="prefetch" href="/assets/左神算法基础提升课学习笔记.html-c80b4071.js" as="script"><link rel="prefetch" href="/assets/左神算法基础课学习笔记.html-096663ed.js" as="script"><link rel="prefetch" href="/assets/算法总结.html-9a485fee.js" as="script"><link rel="prefetch" href="/assets/index.html-9e0df4db.js" as="script"><link rel="prefetch" href="/assets/index.html-f636b49d.js" as="script"><link rel="prefetch" href="/assets/index.html-a142dc4a.js" as="script"><link rel="prefetch" href="/assets/index.html-fde69805.js" as="script"><link rel="prefetch" href="/assets/index.html-bdb8e9fa.js" as="script"><link rel="prefetch" href="/assets/index.html-c075669e.js" as="script"><link rel="prefetch" href="/assets/index.html-a3d07645.js" as="script"><link rel="prefetch" href="/assets/技巧.html-2793d7c3.js" as="script"><link rel="prefetch" href="/assets/第一行代码笔记.html-6b105108.js" as="script"><link rel="prefetch" href="/assets/Bash基础笔记.html-f5fbf11c.js" as="script"><link rel="prefetch" href="/assets/常用命令.html-7b2e7a9d.js" as="script"><link rel="prefetch" href="/assets/docker命令.html-6e1c13fc.js" as="script"><link rel="prefetch" href="/assets/常用镜像命令.html-b7dc6f8f.js" as="script"><link rel="prefetch" href="/assets/maven深入学习笔记.html-e465d6d4.js" as="script"><link rel="prefetch" href="/assets/yaml语法.html-9c137d39.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-894e58f9.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-c95a47cc.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-ded985b2.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-1ba79826.js" as="script"><link rel="prefetch" href="/assets/源码分析.html-77cd1a08.js" as="script"><link rel="prefetch" href="/assets/springcloud项目尚医通总结.html-7533d2f4.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-c6f616d3.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-322beccc.js" as="script"><link rel="prefetch" href="/assets/java整合mysql.html-6971f64b.js" as="script"><link rel="prefetch" href="/assets/基础.html-feab24ef.js" as="script"><link rel="prefetch" href="/assets/Oracle基础总结.html-48c08c34.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-c4d3d1e4.js" as="script"><link rel="prefetch" href="/assets/Vue2.5开发去哪儿网App从零基础入门到实战项目学习笔记.html-1bcc0f69.js" as="script"><link rel="prefetch" href="/assets/CSS世界学习笔记.html-d61b3898.js" as="script"><link rel="prefetch" href="/assets/JavaScript笔记.html-a3c5445a.js" as="script"><link rel="prefetch" href="/assets/JavaScript高级程序设计学习笔记.html-a10bd1c6.js" as="script"><link rel="prefetch" href="/assets/jquery_ajax笔记.html-d0d7f2ee.js" as="script"><link rel="prefetch" href="/assets/疯狂HTML5_CSS3_JavaScript讲义笔记.html-87a698fd.js" as="script"><link rel="prefetch" href="/assets/疯狂前端开发讲义笔记.html-6fd93eee.js" as="script"><link rel="prefetch" href="/assets/JSP_Servlet笔记.html-b42852cf.js" as="script"><link rel="prefetch" href="/assets/JUC.html-322c1f07.js" as="script"><link rel="prefetch" href="/assets/基础.html-31adf37f.js" as="script"><link rel="prefetch" href="/assets/学习笔记《java开发手册》.html-0e209bf1.js" as="script"><link rel="prefetch" href="/assets/学习笔记《疯狂Java讲义》.html-35e33874.js" as="script"><link rel="prefetch" href="/assets/学习笔记《码出高效：Java开发手册》.html-85052851.js" as="script"><link rel="prefetch" href="/assets/抽象类和接口.html-d8f10676.js" as="script"><link rel="prefetch" href="/assets/集合.html-35003d70.js" as="script"><link rel="prefetch" href="/assets/note.html-a82101b8.js" as="script"><link rel="prefetch" href="/assets/404.html-bb007e7c.js" as="script"><link rel="prefetch" href="/assets/index.html-5a33631f.js" as="script"><link rel="prefetch" href="/assets/index.html-b34cdcff.js" as="script"><link rel="prefetch" href="/assets/index.html-f17edf1c.js" as="script"><link rel="prefetch" href="/assets/index.html-229a541c.js" as="script"><link rel="prefetch" href="/assets/index.html-f5aaa230.js" as="script"><link rel="prefetch" href="/assets/index.html-f64238ef.js" as="script"><link rel="prefetch" href="/assets/index.html-d9b7035b.js" as="script"><link rel="prefetch" href="/assets/index.html-94a162e9.js" as="script"><link rel="prefetch" href="/assets/index.html-2128bc53.js" as="script"><link rel="prefetch" href="/assets/index.html-1f5c737d.js" as="script"><link rel="prefetch" href="/assets/index.html-279e3e4c.js" as="script"><link rel="prefetch" href="/assets/index.html-855b20ae.js" as="script"><link rel="prefetch" href="/assets/index.html-bb9df194.js" as="script"><link rel="prefetch" href="/assets/index.html-6561255c.js" as="script"><link rel="prefetch" href="/assets/index.html-f01f9cce.js" as="script"><link rel="prefetch" href="/assets/index.html-a7da0750.js" as="script"><link rel="prefetch" href="/assets/index.html-69474e89.js" as="script"><link rel="prefetch" href="/assets/index.html-272edd85.js" as="script"><link rel="prefetch" href="/assets/index.html-7c80cf43.js" as="script"><link rel="prefetch" href="/assets/index.html-fcc37413.js" as="script"><link rel="prefetch" href="/assets/index.html-0e5553da.js" as="script"><link rel="prefetch" href="/assets/index.html-ee08f8a4.js" as="script"><link rel="prefetch" href="/assets/index.html-0b977aec.js" as="script"><link rel="prefetch" href="/assets/index.html-2f13bbcc.js" as="script"><link rel="prefetch" href="/assets/index.html-e9d110f9.js" as="script"><link rel="prefetch" href="/assets/index.html-5a918ded.js" as="script"><link rel="prefetch" href="/assets/index.html-9479282f.js" as="script"><link rel="prefetch" href="/assets/index.html-536277d1.js" as="script"><link rel="prefetch" href="/assets/index.html-45a37b61.js" as="script"><link rel="prefetch" href="/assets/index.html-2085521d.js" as="script"><link rel="prefetch" href="/assets/index.html-edf11e1d.js" as="script"><link rel="prefetch" href="/assets/index.html-7bcda36e.js" as="script"><link rel="prefetch" href="/assets/index.html-4e6cd9b4.js" as="script"><link rel="prefetch" href="/assets/index.html-70154c1a.js" as="script"><link rel="prefetch" href="/assets/index.html-5504710a.js" as="script"><link rel="prefetch" href="/assets/index.html-45a9d477.js" as="script"><link rel="prefetch" href="/assets/index.html-3b54d6af.js" as="script"><link rel="prefetch" href="/assets/index.html-d8b74bf0.js" as="script"><link rel="prefetch" href="/assets/index.html-2b442d8c.js" as="script"><link rel="prefetch" href="/assets/index.html-5bab0b0d.js" as="script"><link rel="prefetch" href="/assets/index.html-94361434.js" as="script"><link rel="prefetch" href="/assets/index.html-7cf55d7a.js" as="script"><link rel="prefetch" href="/assets/index.html-39ed20a3.js" as="script"><link rel="prefetch" href="/assets/index.html-b84d7b0e.js" as="script"><link rel="prefetch" href="/assets/index.html-96b00477.js" as="script"><link rel="prefetch" href="/assets/index.html-931e73cc.js" as="script"><link rel="prefetch" href="/assets/index.html-d5238306.js" as="script"><link rel="prefetch" href="/assets/index.html-022320ef.js" as="script"><link rel="prefetch" href="/assets/index.html-1458f3e8.js" as="script"><link rel="prefetch" href="/assets/index.html-2535caab.js" as="script"><link rel="prefetch" href="/assets/index.html-aa00903c.js" as="script"><link rel="prefetch" href="/assets/index.html-89737dbe.js" as="script"><link rel="prefetch" href="/assets/index.html-8f53cfb6.js" as="script"><link rel="prefetch" href="/assets/index.html-da0ace56.js" as="script"><link rel="prefetch" href="/assets/index.html-d672288c.js" as="script"><link rel="prefetch" href="/assets/index.html-fe42fcc6.js" as="script"><link rel="prefetch" href="/assets/index.html-240726d8.js" as="script"><link rel="prefetch" href="/assets/index.html-0ef4edf7.js" as="script"><link rel="prefetch" href="/assets/index.html-6930b6fa.js" as="script"><link rel="prefetch" href="/assets/index.html-7209af5f.js" as="script"><link rel="prefetch" href="/assets/index.html-f13374c1.js" as="script"><link rel="prefetch" href="/assets/index.html-36d23d70.js" as="script"><link rel="prefetch" href="/assets/index.html-71b464fd.js" as="script"><link rel="prefetch" href="/assets/index.html-339be067.js" as="script"><link rel="prefetch" href="/assets/index.html-4421e73f.js" as="script"><link rel="prefetch" href="/assets/index.html-9b007397.js" as="script"><link rel="prefetch" href="/assets/index.html-940ed4e0.js" as="script"><link rel="prefetch" href="/assets/index.html-4bacd547.js" as="script"><link rel="prefetch" href="/assets/index.html-9b0dc7af.js" as="script"><link rel="prefetch" href="/assets/index.html-9d2370c8.js" as="script"><link rel="prefetch" href="/assets/index.html-57282599.js" as="script"><link rel="prefetch" href="/assets/index.html-1e155d25.js" as="script"><link rel="prefetch" href="/assets/index.html-d16d5b9d.js" as="script"><link rel="prefetch" href="/assets/index.html-c548900e.js" as="script"><link rel="prefetch" href="/assets/index.html-ce700e36.js" as="script"><link rel="prefetch" href="/assets/index.html-6ff40265.js" as="script"><link rel="prefetch" href="/assets/index.html-e0955dfb.js" as="script"><link rel="prefetch" href="/assets/index.html-b1191208.js" as="script"><link rel="prefetch" href="/assets/index.html-efa0c71e.js" as="script"><link rel="prefetch" href="/assets/intro.html-93e5942d.js" as="script"><link rel="prefetch" href="/assets/slides.html-d7f89bdf.js" as="script"><link rel="prefetch" href="/assets/index.html-9627a98a.js" as="script"><link rel="prefetch" href="/assets/左神算法基础提升课学习笔记.html-871037ae.js" as="script"><link rel="prefetch" href="/assets/左神算法基础课学习笔记.html-793a3b98.js" as="script"><link rel="prefetch" href="/assets/算法总结.html-94cca232.js" as="script"><link rel="prefetch" href="/assets/index.html-57fc8aa1.js" as="script"><link rel="prefetch" href="/assets/index.html-fdaf2add.js" as="script"><link rel="prefetch" href="/assets/index.html-22bd2c17.js" as="script"><link rel="prefetch" href="/assets/index.html-a5b084e0.js" as="script"><link rel="prefetch" href="/assets/index.html-5cd5be0b.js" as="script"><link rel="prefetch" href="/assets/index.html-487709de.js" as="script"><link rel="prefetch" href="/assets/index.html-4552be36.js" as="script"><link rel="prefetch" href="/assets/技巧.html-3b6ee27f.js" as="script"><link rel="prefetch" href="/assets/第一行代码笔记.html-69d4ed12.js" as="script"><link rel="prefetch" href="/assets/Bash基础笔记.html-c26d0fc5.js" as="script"><link rel="prefetch" href="/assets/常用命令.html-6b6cdeac.js" as="script"><link rel="prefetch" href="/assets/docker命令.html-eef0c47d.js" as="script"><link rel="prefetch" href="/assets/常用镜像命令.html-fd428514.js" as="script"><link rel="prefetch" href="/assets/maven深入学习笔记.html-366b8248.js" as="script"><link rel="prefetch" href="/assets/yaml语法.html-cf2ebf52.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-c208962b.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-1f8eff17.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-45a62c2a.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-e053aa02.js" as="script"><link rel="prefetch" href="/assets/源码分析.html-954f148e.js" as="script"><link rel="prefetch" href="/assets/springcloud项目尚医通总结.html-571978d1.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-1d20bb80.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-0349b7ee.js" as="script"><link rel="prefetch" href="/assets/java整合mysql.html-e9ef67b3.js" as="script"><link rel="prefetch" href="/assets/基础.html-0450706b.js" as="script"><link rel="prefetch" href="/assets/Oracle基础总结.html-468dc0d1.js" as="script"><link rel="prefetch" href="/assets/基础总结.html-675d5baa.js" as="script"><link rel="prefetch" href="/assets/Vue2.5开发去哪儿网App从零基础入门到实战项目学习笔记.html-a379a8a1.js" as="script"><link rel="prefetch" href="/assets/CSS世界学习笔记.html-aaaaa2ac.js" as="script"><link rel="prefetch" href="/assets/JavaScript笔记.html-0955824c.js" as="script"><link rel="prefetch" href="/assets/JavaScript高级程序设计学习笔记.html-385c4ac7.js" as="script"><link rel="prefetch" href="/assets/jquery_ajax笔记.html-d95d5200.js" as="script"><link rel="prefetch" href="/assets/疯狂HTML5_CSS3_JavaScript讲义笔记.html-59892f49.js" as="script"><link rel="prefetch" href="/assets/疯狂前端开发讲义笔记.html-8f63a08d.js" as="script"><link rel="prefetch" href="/assets/JSP_Servlet笔记.html-8eba6956.js" as="script"><link rel="prefetch" href="/assets/JUC.html-4a2c359b.js" as="script"><link rel="prefetch" href="/assets/基础.html-01f31dec.js" as="script"><link rel="prefetch" href="/assets/学习笔记《java开发手册》.html-7aa6ea8f.js" as="script"><link rel="prefetch" href="/assets/学习笔记《疯狂Java讲义》.html-26fcb733.js" as="script"><link rel="prefetch" href="/assets/学习笔记《码出高效：Java开发手册》.html-9cc463cf.js" as="script"><link rel="prefetch" href="/assets/抽象类和接口.html-04de375f.js" as="script"><link rel="prefetch" href="/assets/集合.html-479e2f1d.js" as="script"><link rel="prefetch" href="/assets/note.html-14cf8edf.js" as="script"><link rel="prefetch" href="/assets/404.html-51d44eea.js" as="script"><link rel="prefetch" href="/assets/index.html-2a7a6861.js" as="script"><link rel="prefetch" href="/assets/index.html-c45a34dd.js" as="script"><link rel="prefetch" href="/assets/index.html-0f30b99c.js" as="script"><link rel="prefetch" href="/assets/index.html-98657ec5.js" as="script"><link rel="prefetch" href="/assets/index.html-94b38a1e.js" as="script"><link rel="prefetch" href="/assets/index.html-f0d0d1e2.js" as="script"><link rel="prefetch" href="/assets/index.html-cb791088.js" as="script"><link rel="prefetch" href="/assets/index.html-a4967664.js" as="script"><link rel="prefetch" href="/assets/index.html-e8fa6857.js" as="script"><link rel="prefetch" href="/assets/index.html-e71ea698.js" as="script"><link rel="prefetch" href="/assets/index.html-dc85b06d.js" as="script"><link rel="prefetch" href="/assets/index.html-055b2ca9.js" as="script"><link rel="prefetch" href="/assets/index.html-f930bad6.js" as="script"><link rel="prefetch" href="/assets/index.html-c2bcdb36.js" as="script"><link rel="prefetch" href="/assets/index.html-5a189899.js" as="script"><link rel="prefetch" href="/assets/index.html-e8f848f4.js" as="script"><link rel="prefetch" href="/assets/index.html-f2b6d918.js" as="script"><link rel="prefetch" href="/assets/index.html-e0b949b6.js" as="script"><link rel="prefetch" href="/assets/index.html-05ff6d51.js" as="script"><link rel="prefetch" href="/assets/index.html-79ea5ccf.js" as="script"><link rel="prefetch" href="/assets/index.html-dbce5675.js" as="script"><link rel="prefetch" href="/assets/index.html-c218230c.js" as="script"><link rel="prefetch" href="/assets/index.html-e8350416.js" as="script"><link rel="prefetch" href="/assets/index.html-b527e6f5.js" as="script"><link rel="prefetch" href="/assets/index.html-f917d2a5.js" as="script"><link rel="prefetch" href="/assets/index.html-950bf01c.js" as="script"><link rel="prefetch" href="/assets/index.html-8dca2b7a.js" as="script"><link rel="prefetch" href="/assets/index.html-ba9ac5a5.js" as="script"><link rel="prefetch" href="/assets/index.html-9a76957b.js" as="script"><link rel="prefetch" href="/assets/index.html-42bae693.js" as="script"><link rel="prefetch" href="/assets/index.html-2fd57555.js" as="script"><link rel="prefetch" href="/assets/index.html-b779b27d.js" as="script"><link rel="prefetch" href="/assets/index.html-d3574a5b.js" as="script"><link rel="prefetch" href="/assets/index.html-64da747a.js" as="script"><link rel="prefetch" href="/assets/index.html-82b3793d.js" as="script"><link rel="prefetch" href="/assets/index.html-38be2a36.js" as="script"><link rel="prefetch" href="/assets/index.html-9725c24b.js" as="script"><link rel="prefetch" href="/assets/index.html-dd09db79.js" as="script"><link rel="prefetch" href="/assets/index.html-4146b37d.js" as="script"><link rel="prefetch" href="/assets/index.html-d43826b8.js" as="script"><link rel="prefetch" href="/assets/index.html-9de3e07a.js" as="script"><link rel="prefetch" href="/assets/index.html-31ef4d0d.js" as="script"><link rel="prefetch" href="/assets/index.html-23977d43.js" as="script"><link rel="prefetch" href="/assets/index.html-095661e7.js" as="script"><link rel="prefetch" href="/assets/index.html-a15268fa.js" as="script"><link rel="prefetch" href="/assets/index.html-04aff772.js" as="script"><link rel="prefetch" href="/assets/index.html-9b77adac.js" as="script"><link rel="prefetch" href="/assets/index.html-7247c7ac.js" as="script"><link rel="prefetch" href="/assets/index.html-0d99ba0f.js" as="script"><link rel="prefetch" href="/assets/index.html-6b169b4b.js" as="script"><link rel="prefetch" href="/assets/index.html-0c6a6310.js" as="script"><link rel="prefetch" href="/assets/index.html-59e4d5c2.js" as="script"><link rel="prefetch" href="/assets/index.html-8d3094cf.js" as="script"><link rel="prefetch" href="/assets/index.html-38490b58.js" as="script"><link rel="prefetch" href="/assets/index.html-a145267a.js" as="script"><link rel="prefetch" href="/assets/index.html-e80145a8.js" as="script"><link rel="prefetch" href="/assets/index.html-734a47c0.js" as="script"><link rel="prefetch" href="/assets/index.html-a9416d71.js" as="script"><link rel="prefetch" href="/assets/index.html-26ffdf94.js" as="script"><link rel="prefetch" href="/assets/index.html-4df71dc7.js" as="script"><link rel="prefetch" href="/assets/index.html-ea2eb893.js" as="script"><link rel="prefetch" href="/assets/index.html-de2ee033.js" as="script"><link rel="prefetch" href="/assets/index.html-01a68c1d.js" as="script"><link rel="prefetch" href="/assets/index.html-d5f96a7b.js" as="script"><link rel="prefetch" href="/assets/index.html-eb54f92e.js" as="script"><link rel="prefetch" href="/assets/index.html-ab5d924e.js" as="script"><link rel="prefetch" href="/assets/index.html-30c83703.js" as="script"><link rel="prefetch" href="/assets/index.html-4f6ff7f5.js" as="script"><link rel="prefetch" href="/assets/index.html-429fc1d3.js" as="script"><link rel="prefetch" href="/assets/index.html-58b8fa5e.js" as="script"><link rel="prefetch" href="/assets/index.html-74b7bfe3.js" as="script"><link rel="prefetch" href="/assets/index.html-c1c852a4.js" as="script"><link rel="prefetch" href="/assets/index.html-b0f222c8.js" as="script"><link rel="prefetch" href="/assets/index.html-3b80d6d2.js" as="script"><link rel="prefetch" href="/assets/index.html-568d3529.js" as="script"><link rel="prefetch" href="/assets/index.html-22fe42e8.js" as="script"><link rel="prefetch" href="/assets/index.html-3b7eb864.js" as="script"><link rel="prefetch" href="/assets/index.html-d79b5f81.js" as="script"><link rel="prefetch" href="/assets/waline-meta-56fbc549.js" as="script"><link rel="prefetch" href="/assets/component-a2159e74.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-4d7b3aa4.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-a5baf4db.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script"><link rel="prefetch" href="/assets/pageview-a7133da3.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt="Alooc"><!----><span class="vp-site-name hide-in-pad">Alooc</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><!---->首页<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/blog/algorithm/"><!---->算法<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/blog/database/"><!---->数据库<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/blog/language/"><!---->编程语言<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/blog/skill/"><!---->技巧<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/blog/beframework/"><!---->后端框架<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link active" href="/blog/be/"><!---->后端技术<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/blog/feframework/"><!---->前端框架<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/blog/fe/"><!---->前端技术<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="博文"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>博文</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>苹果</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/zh/posts/apple/1.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>苹果1<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/zh/posts/apple/2.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>苹果2<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/zh/posts/apple/3.html"><!---->/zh/posts/apple/3<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/zh/posts/apple/4.html"><!---->/zh/posts/apple/4<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>香蕉</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="vp-link nav-link" href="/zh/posts/banana/1.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>香蕉 1<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/zh/posts/banana/2.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>香蕉 2<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/zh/posts/banana/3.html"><!---->/zh/posts/banana/3<!----></a></li><li class="dropdown-subitem"><a class="vp-link nav-link" href="/zh/posts/banana/4.html"><!---->/zh/posts/banana/4<!----></a></li></ul></li><li class="dropdown-item"><a class="vp-link nav-link" href="/zh/posts/cherry.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>樱桃<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/zh/posts/dragonfruit.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>火龙果<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/zh/posts/tomato.html"><!---->/zh/posts/tomato<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/zh/posts/strawberry.html"><!---->/zh/posts/strawberry<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://theme-hope.vuejs.press/zh/" rel="noopener noreferrer" target="_blank" aria-label="V2 文档" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>V2 文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->activiti6笔记</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://alooc.github.io" target="_blank" rel="noopener noreferrer">Alooc</a></span><span property="author" content="Alooc"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2020-01-01T09:02:55.000Z"></span><span class="page-pageview-info" aria-label="访问量🔢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/blog/be/activiti/activiti6%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0.html">...</span></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 28 分钟</span><meta property="timeRequired" content="PT28M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category8 clickable" role="navigation">后端技术</span><span class="page-category-item category0 clickable" role="navigation">activiti</span><!--]--><meta property="articleSection" content="后端技术,activiti"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag0 clickable" role="navigation">activiti</span><span class="page-tag-item tag1 clickable" role="navigation">工作流</span><!--]--><meta property="keywords" content="activiti,工作流"></span></div><hr></div><!----><!----><div class="theme-hope-content"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>first-demo：
步骤：设计流程，配置流程引擎，加载流程文件，启动流程。

数据库表的含义
url driver user password

配置文件

工作流引擎设计的一致原则是：强调流程服务的可嵌入性和可扩展性

jbpm3,jbpm5 activiti5:
	jBPM3 是一个完整的工作流系统实现，面向开发人员，
		目的在于简化对组织核心流程进行支撑的软件创建，不支持标准。

	jBPM4 引入 PVM，使其拥有更强大的扩展性，同时增加 BPMS 特性，
		这些特性包括了对 BPMN 的支持、面向业务人员的 Web 建模器和简单统计分析功能的加入。

	jBPM5 基于原先的 Drools Flow，支持 BPMN，通过与 Drools 的合并支持 BAM，
		通过内容仓库增加对流程可视化的支持。由于放弃了 jBPM4 的 PVM，引擎的可扩展性受到损害，并且不再支持 jPDL。

	Activiti5 基于 jBPM4，与 Alfresco 的集成增加了其流程可视化与管理能力，
		同时通过创新的 Activiti Cycle 协作组件支持流程相关人员之间的协调，最后，它加强了集成能力。

******************************************************************
第一章 Activiti介绍
	BPMN   Business Process Modeling Notation  业务流程模型和符号
	BPMN 2.0 定义了5个基础的元素类别：
		流对象 Flow Object :在一个业务流程中，流对象是用于定义行为的图形元素，主要有事件Events、活动Activities、和网关 Gateways 三种流对象 
		数据 Data :主要有数据对象 Data Objects、数据输入 Data Inputs 、数据输出 Data Outputs 和数据存储 Data Stores 四种元素
		连接对象 Connecting Objects :用于连接流对象，顺序流 Sequence Flows、消息流 Message Flows、关联 Associations 和数据关联 Data Associations 四种连接流对象的方式
		泳道 Swimlanes :泳道提供了两种途径用于组织基础的模型元素，分别是池 Pools 和道 Lanes
		制品 Artifacts :制品主要用于为流程提供附加信息，当前制品包括组 Group 和 注释 Text Annotation

第二章 安装运行Activiti
	开发第一个应用：
		1.引入jar包
		2.写配置文件 activiti的配置文件默认是resource中的activiti.cgf.xml
			示例：
				&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
				&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
				       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
				       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
					&lt;!-- 流程引擎配置的bean --&gt;
					&lt;bean id=&quot;processEngineConfiguration&quot;
						class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;
						&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/act?useUnicode=true&amp;amp; characterEncoding=utf8&amp;amp; useSSL=false&amp;amp; serverTimezone=UTC&amp;amp; rewriteBatchedStatements=true&quot; /&gt;
						&lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;
						&lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot; /&gt;
						&lt;property name=&quot;jdbcPassword&quot; value=&quot;root&quot; /&gt;
						&lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;true&quot; /&gt;
					&lt;/bean&gt;
				&lt;/beans&gt;

		3.创建bpmn文件 
		4.类文件启动示例：

			// 创建流程引擎
			ProcessEngine engine = ProcessEngines.getDefaultProcessEngine();

		★//部署层面
			// 得到流程存储服务组件，相当于流程仓库，可部署流程，kickstart App
			RepositoryService repositoryService = engine.getRepositoryService();
			
		★//启动层面
			// 得到运行时服务组件，运行服务，启动流程  启动流程
			RuntimeService runtimeService = engine.getRuntimeService();
			
		★//流程处理层面
			// 获取流程任务组件    流程启动后，使用
			TaskService taskService = engine.getTaskService();
			// 部署流程文件
			repositoryService.createDeployment()
					.addClasspathResource(&quot;bpmn/First.bpmn&quot;).deploy();
			// 启动流程
			runtimeService.startProcessInstanceByKey(&quot;process1&quot;);
			// 查询第一个任务
			Task task = taskService.createTaskQuery().singleResult();
			System.out.println(&quot;第一个任务完成前，当前任务名称：&quot; + task.getName());
			// 完成第一个任务
			taskService.complete(task.getId());
			// 查询第二个任务
			task = taskService.createTaskQuery().singleResult();
			System.out.println(&quot;第二个任务完成前，当前任务名称：&quot; + task.getName());
			// 完成第二个任务（流程结束）
			taskService.complete(task.getId());
			task = taskService.createTaskQuery().singleResult();
			System.out.println(&quot;流程结束后，查找任务：&quot; + task);
			// 退出
	
第三章 Activiti数据库设计
	activiti流程引擎的数据表分为5大类，各类职责不同，有统一的命名规范
	
	1.通用数据表：只存放通用资源， ACT_GE
		资源表 ACT_GE_BYTEARRAY 
			保存与流程引擎相关的资源
			一般用来保存字符串、流程文件的内容、流程图片内容
		属性表 ACT_GE_PROPERTY
			属性的键值对
	2.流程存储表：保存流程定义和部署信息 ACT_RE
		部署数据表 ACT_RE_DEPLOYMENT
			保存部署信息
		流程定义表 ACT_RE_PROCDEF
			保存流程文件 .bpmn
	3.身份数据表：有关身份数据的几张表 ACT_ID
		用户表 ACT_ID_USER
			保存用户信息
		用户账号（信息）表 ACT_ID_INFO
			activiti将用户、用户账号和用户信息分三种数据，用户表保存用户的数据，
			而其他两个被保存在这个表中
		用户组表 ACT_ID_GROUP
			用户组数据（组名称，组类型）
		关系表 ACT_ID_MEMBERSHIP
			保存用户属于哪个组
	4.运行时数据表：保存流程在运行过程中所产生的数据，例如流程实例、执行流、任务等 ACT_RU
		流程实例（执行流）表 ACT_RU_EXECUTION
		流程任务表 ACT_RU_TASK
		流程参数表 ACT_RU_VARIABLE
		流程与身份关系表 ACT_RU_IDENTITYLINK
		工作数据表
			ACT_RU_JOB
			ACT_RU_DEADLEFTER_JOB
			ACT_RU_SUSPENDED_JOB
			ACT_RU_TIMER_JOB
		事件描述表 ACT_RU_EVENT_SUBSCR
	5.历史数据表：流程引擎的日志表，操作过的流程元素将会被记录到历史表中 ACT_HI
		流程实例表 ACT_HI_PROCINST
		流程明细表 ACT_HI_DETAIL
		历史任务表和历史行为表 ACT_HI_TASKINST
		附件表和评论表 ACT_HI_ATTACHMENT
	6.DMN 规则引擎表
		activiti6加入了DMN规范的规则引擎模块
			1.决策部署表  ACT_DMN_DEPLOYMENT
				类似于流程定义部署，每次部署，向部署表中写入部署数据
			2.决策表 ACT_DMN_DECISION_TABLE
				决策类似于流程定义，保存决策模型
			3.部署资源表 ACT_DMN_DEPLOYMENT_RESOURCE
				规则引擎相关的资源，例如决策文件、图片

第四章 Activiti流程引擎配置
	1.流程引擎对象
		ProcessEngineConfiguration对象代表一个Activiti流程引擎的全部配置
			该对象的静态方法读取配置文件，生成实例
		1.
		/**
		 * 使用createProcessEngineConfigurationFromResourceDefault方法
		 * 创建ProcessEngineConfiguration实例
		 * @author Administrator
		 *
		 */
		//使用Activiti默认的方式创建ProcessEngineConfiguration
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResourceDefault();	
		2.
		/**
		 * 使用CreateProcessEngineConfigurationFromResource方法创建ProcessEngineConfiguration实例
		 * 
		 * @author Administrator
		 * 
		 */
		// 指定配置文件创建ProcessEngineConfiguration
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResource(&quot;my-activiti1.xml&quot;);
		3.
		/**
		 * 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration
		 * 
		 * @author yangenxiong
		 * 
		 */
		File file = new File(&quot;resource/input-stream.xml&quot;);
		// 得到文件输入流
		InputStream fis = new FileInputStream(file);
		// 使用createProcessEngineConfigurationFromInputStream方法创建ProcessEngineConfiguration
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromInputStream(fis);
		4.
		/**
		 * 使用createStandaloneInMemProcessEngineConfiguration创建ProcessEngineConfiguration
		 * 
		 * @author yangenxiong
		 * 
		 */
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createStandaloneInMemProcessEngineConfiguration();
		// 值为create-drop
		System.out.println(config.getDatabaseSchemaUpdate());
		// 值为jdbc:h2:mem:activiti
		System.out.println(config.getJdbcUrl());
		5.
		/**
		 * 使用CreateStandaloneProcessEngineConfiguration方法创建ProcessEngineConfiguration
		 * 
		 * @author yangenxiong
		 * 
		 */
		 ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createStandaloneProcessEngineConfiguration();
		// 默认值为 false
		System.out.println(config.getDatabaseSchemaUpdate());
		// 默认值为 jdbc:h2:tcp://localhost/~/activiti
		System.out.println(config.getJdbcUrl());
	2.数据源配置
	3.其他属性配置
		history配置
		asyncExecutorActivate配置
		邮件服务器配置
	示例：
		************************************************************************************
		&lt;!-- 将databaseType设置为oracle --&gt;
		&lt;bean id=&quot;processEngineConfiguration&quot;
			class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;
			&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/act&quot; /&gt;
			&lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
			&lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot; /&gt;
			&lt;property name=&quot;jdbcPassword&quot; value=&quot;123456&quot; /&gt;
			&lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;create-drop&quot;/&gt;
			&lt;property name=&quot;databaseType&quot; value=&quot;oracle&quot;/&gt;
		&lt;/bean&gt;
		// 读取Activiti配置
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResource(&quot;database-type.xml&quot;);
		// 启动Activiti
		ProcessEngine engine = config.buildProcessEngine();
		// 关闭流程引擎
		engine.close();
		************************************************************************************
		&lt;!-- 使用C3P0数据源 --&gt;
		&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
			&lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
			&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/act&quot; /&gt;
			&lt;property name=&quot;user&quot; value=&quot;root&quot; /&gt;
			&lt;property name=&quot;password&quot; value=&quot;123456&quot; /&gt;
		&lt;/bean&gt;

		&lt;bean id=&quot;processEngineConfiguration&quot;
			class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;
			&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
		&lt;/bean&gt;
		// 读取c3p0-config.xml配置
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResource(&quot;config/c3p0-config.xml&quot;);
		// 能正常输出，即完成配置
		DataSource ds = config.getDataSource();
		// 查询数据库元信息，如果能查询则表示连接成功
		ds.getConnection().getMetaData();
		// 结果为 com.mchange.v2.c3p0.ComboPooledDataSource
		System.out.println(config.getDataSource().getClass().getName());
		
		或者

		&lt;!-- 不初始化任何属性 --&gt;
		&lt;bean id=&quot;processEngineConfiguration&quot;
			class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;
		&lt;/bean&gt;
		// 创建C3P0数据源
		ComboPooledDataSource ds = new ComboPooledDataSource();
		// 设置JDBC连接的各个属性
		ds.setUser(&quot;root&quot;);
		ds.setPassword(&quot;123456&quot;);
		ds.setJdbcUrl(&quot;jdbc:mysql://localhost:3306/act&quot;);
		ds.setDriverClass(&quot;com.mysql.jdbc.Driver&quot;);
		// 验证是否连接成功
		ds.getConnection().getMetaData();

		// 读取Activiti配置文件
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResource(&quot;config/c3p0-coding.xml&quot;);
		// 为ProcessEngineConfiguration设置dataSource属性
		config.setDataSource(ds);
		System.out.println(config.getDataSource());
		************************************************************************************
		&lt;!-- 将databaseSchemaUpdate设置为false --&gt;
		&lt;bean id=&quot;processEngineConfiguration&quot;
			class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;
			&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/act&quot; /&gt;
			&lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
			&lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot; /&gt;
			&lt;property name=&quot;jdbcPassword&quot; value=&quot;123456&quot; /&gt;
			&lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;false&quot;/&gt;
		&lt;/bean&gt;
		//读取Activiti配置
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResource(&quot;schemaUpdate-false.xml&quot;);
		//启动Activiti
		config.buildProcessEngine();
		************************************************************************************
		&lt;!-- 将databaseSchemaUpdate设置为true --&gt;
		&lt;bean id=&quot;processEngineConfiguration&quot;
			class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;
			&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/act&quot; /&gt;
			&lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
			&lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot; /&gt;
			&lt;property name=&quot;jdbcPassword&quot; value=&quot;123456&quot; /&gt;
			&lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;true&quot;/&gt;
		&lt;/bean&gt;
		//读取Activiti配置
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResource(&quot;schemaUpdate-true.xml&quot;);
		System.out.println(config.getClass().getName());
		//启动Activiti
		config.buildProcessEngine();
		************************************************************************************
		&lt;!-- 将databaseSchemaUpdate设置为create-drop --&gt;
		&lt;bean id=&quot;processEngineConfiguration&quot;
			class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;
			&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/act&quot; /&gt;
			&lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
			&lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot; /&gt;
			&lt;property name=&quot;jdbcPassword&quot; value=&quot;123456&quot; /&gt;
			&lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;create-drop&quot;/&gt;
		&lt;/bean&gt;
		// 读取Activiti配置
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResource(&quot;schemaUpdate-create-drop.xml&quot;);
		// 启动Activiti
		ProcessEngine engine = config.buildProcessEngine();
		// 关闭流程引擎
		engine.close();
		************************************************************************************
		&lt;bean id=&quot;processEngineConfiguration&quot;
			class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;
			&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/act&quot; /&gt;
			&lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
			&lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot; /&gt;
			&lt;property name=&quot;jdbcPassword&quot; value=&quot;123456&quot; /&gt;
			&lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;true&quot;/&gt;
			&lt;property name=&quot;history&quot; value=&quot;activity&quot;/&gt;  activiti/audit/full/none/
		&lt;/bean&gt;
		// 读取Activiti配置
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResource(&quot;history-activity.xml&quot;);		
		//初始化流程引擎
		ProcessEngine engine = config.buildProcessEngine();
		//得到流程存储对象
		RepositoryService repositoryService = engine.getRepositoryService();
		//部署流程文件
		repositoryService.createDeployment().addClasspathResource(&quot;bpmn/history.bpmn20.xml&quot;).deploy();
		//得到运行服务对象
		RuntimeService runtimeService = engine.getRuntimeService();
		//创建参数
		Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();
		vars.put(&quot;day&quot;, 10);
		//开始流程
		ProcessInstance pi = runtimeService.startProcessInstanceByKey(&quot;vacationProcess&quot;, vars);
		System.exit(0);
		************************************************************************************
		&lt;bean id=&quot;processEngineConfiguration&quot;
		class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;
			&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/act&quot; /&gt;
			&lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
			&lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot; /&gt;
			&lt;property name=&quot;jdbcPassword&quot; value=&quot;123456&quot; /&gt;
			&lt;property name=&quot;mailServerHost&quot; value=&quot;smtp.163.com&quot;&gt;&lt;/property&gt;
			&lt;property name=&quot;mailServerPort&quot; value=&quot;25&quot;&gt;&lt;/property&gt;
			&lt;property name=&quot;mailServerDefaultFrom&quot; value=&quot;yangenxiong@163.com&quot;&gt;&lt;/property&gt;
			&lt;property name=&quot;mailServerUsername&quot; value=&quot;yangenxiong@163.com&quot;&gt;&lt;/property&gt;
			&lt;property name=&quot;mailServerPassword&quot; value=&quot;123456&quot;&gt;&lt;/property&gt;
		&lt;/bean&gt;
		************************************************************************************

		************************************************************************************
	4.ProcessEngineCofiguration bean
		继承接口ProcessEngineCofiguration或ProcessEngineCofigurationImpl，
		自定义引擎启动类。
	5.Activiti的命令拦截器
		未学习

第五章 流程引擎的创建
	和汽车发动机启动很像
	1.ProcessEngineConfiguration的buildProcessEngine方法创建
	先读后配，相当于配置检查
		// 读取配置
		ProcessEngineConfiguration config = ProcessEngineConfiguration
				.createProcessEngineConfigurationFromResource(&quot;build_engine.xml&quot;);
		// 创建ProcessEngine
		ProcessEngine engine = config.buildProcessEngine();
	2.ProcessEngines对象
		调用ProcessEngines的init方法
			// 初始化ProcessEngines的Map,
			// 再加载Activiti默认的配置文件（classpath下的activiti.cfg.xml文件）
			// 如果与Spring整合，则读取classpath下的activiti-context.xml文件

			ProcessEngines.init();

			// 得到ProcessEngines的Map
			Map&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines();
			System.out.println(engines.size());
			System.out.println(engines.get(&quot;default&quot;));
		注册与注销ProcessEngine实例
			//读取自定义配置
			ProcessEngineConfiguration config = ProcessEngineConfiguration.
					createProcessEngineConfigurationFromResource(&quot;register.xml&quot;);
			//创建ProcessEngine实例
			ProcessEngine engine = config.buildProcessEngine();
			//获取ProcessEngine的Map
			Map&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines();
			System.out.println(&quot;注册后引擎数：&quot; + engines.size());
			//注销ProcessEngine实例
			ProcessEngines.unregister( engine);
			System.out.println(&quot;调用unregister后引擎数：&quot; + engines.size());
		使用ProcessEngines的retry方法
			//得到资源文件的URL实例
			ClassLoader cl = Retry.class.getClassLoader();
			URL url = cl.getResource(&quot;retry.xml&quot;);
			//调用retry方法创建ProcessEngine实例
			ProcessEngineInfo info = ProcessEngines.retry(url.toString());
			//得到流程实例保存对象
			Map&lt;String, ProcessEngine&gt; engines = ProcessEngines.getProcessEngines();
			System.out.println(&quot;调用retry方法后引擎数：&quot; + engines.size());	
		使用ProcessEngines的destroy方法
			// 进行初始化并且返回默认的ProcessEngine实例
			ProcessEngine engine = ProcessEngines.getDefaultProcessEngine();
			System.out.println(&quot;调用getDefaultProcessEngine方法后引擎数量：&quot;
					+ ProcessEngines.getProcessEngines().size());
			// 调用销毁方法
			ProcessEngines.destroy();
			// 最终结果为0
			System.out.println(&quot;调用destroy方法后引擎数量：&quot;
					+ ProcessEngines.getProcessEngines().size());

			// 得到资源文件的URL实例
			ClassLoader cl = Destroy.class.getClassLoader();
			URL url = cl.getResource(&quot;activiti.cfg.xml&quot;);
			// 调用retry方法创建ProcessEngine实例
			ProcessEngines.retry(url.toString());
			System.out.println(&quot;只调用 retry方法后引擎数量：&quot;
					+ ProcessEngines.getProcessEngines().size());
			// 调用销毁方法，没有效果
			ProcessEngines.destroy();
			System.out.println(&quot;调用destory无效果，引擎数量：&quot;
					+ ProcessEngines.getProcessEngines().size());
	3.ProcessEngine对象
		一个ProcessEngine实例代表一个流程引擎，实例中保存着各个服务组件的实例，根据这些服务组件，可以操作流程实例
		、任务、系统角色等数据。

		1.服务组件：
			好像J2EE的Service层，通过getXXXService方法得到实例
			包含的实例：
				RespositoryService:提供一系列管理流程定义和流程部署的API
				RuntimeService:在流程运行时对流程实例进行管理与控制
				TaskService:对流程任务进行管理，例如任务提醒、任务完成和创建任务等
				IdentityService:提供对流程角色数据进行管理的API，这些角色数据包括用户组、用户及它们之间的关系
				ManagementService:提供对流程引擎进行管理和维护的服务
				HistoryService:对流程的历史数据进行操作，包括查询、删除这些历史数据
				DynamicBpmnService:使用该服务，可以不需要重新部署流程模型，就可以实现对流程模型的修改
		2.关闭流程引擎：
			engine.close();
			根据配置中databaseSchemeUpdate属性判断是否删除数据库	
		3.流程引擎名称:
			默认名称时default
			使用config.setProcessEngineName(&quot;test&quot;);
			示例：
				ProcessEngineConfiguration config = ProcessEngineConfiguration.
				createProcessEngineConfigurationFromResource(&quot;name.xml&quot;);
				//设置流程引擎名称
				config.setProcessEngineName(&quot;test&quot;);
				ProcessEngine engine = config.buildProcessEngine();
				//根据名称查询流程引擎
				ProcessEngine engineTest = ProcessEngines.getProcessEngine(&quot;test&quot;);
				System.out.println(&quot;创建的引擎实例：&quot; + engine);
				System.out.println(&quot;查询的引擎实例：&quot; + engineTest);
	
第六章 用户组与用户
	1.用户组管理：
		1.Group对象：
			通过业务层组件去创建
			IdentityService
		2.创建用户组：
			id,name,type 然后保存，
				技巧：group.setId(null) 可以让数据库自动生成主键id
		3.修改用户组：
			setter
		4.删除用户组：
			deleteGroup(id)
	2.Activiti数据查询：
		Activiti提供了一套数据查询API供开发者使用，可以使用各个服务组件的createXXXQuery方法来获取这些查询对象。
		
		1.查询对象：
			Query是多有查询对象的父接口，提供了很多基础的方法：
				asc	设置查询结果的排序方式为升序
				count	计算查询结果的数据量
				desc	降序
				list	封装查询结果，返回相应类型的集合
				listPage	分页返回查询结果
				singleResult	查询单条符合条件的数据，没有返回null,多条抛出异常
		2.list方法：
			// 使用list方法查询全部的部署数据
			List&lt;Group&gt; datas = identityService.createGroupQuery().list();
		3.listPage方法：
			//调用listPage方法，从索引为2的记录开始，查询3条记录
			List&lt;Group&gt; datas = identityService.createGroupQuery().listPage(2, 3);
		4.count方法：
			// 使用list方法查询全部的部署数据
			long size = identityService.createGroupQuery().count();
		5.排序方法：
			List&lt;Group&gt; datas = identityService.createGroupQuery().orderByGroupName().asc().list();
		6.ID排序问题：
			主键均是字符型，排序要额外处理
		7.多字段排序：
			List&lt;Group&gt; datas = identityService.createGroupQuery()
				.orderByGroupId().desc()
				.orderByGroupName().asc().list();
		8.singleResult方法
		9.用户组数据查询：
			相应的数据查询对象除了拥有基类的方法，还有自己的方法：
			// groupId方法
			Group groupA = identityService.createGroupQuery().groupId(aId).singleResult();
			
			// groupName方法
			Group groupB = identityService.createGroupQuery().groupName(&quot;GroupB&quot;).singleResult();
			
			// groupType方法
			Group groupC = identityService.createGroupQuery().groupType(&quot;typeC&quot;).singleResult();
			
			// groupNameLike方法
			List&lt;Group&gt; groups = identityService.createGroupQuery().groupNameLike(&quot;%group%&quot;).list();

		10.原生SQL查询：
			createNativeGroupQuery()
			groups = identityService.createNativeGroupQuery()
				.sql(&quot;select * from ACT_ID_GROUP where NAME_ = #{name}&quot;)
				.parameter(&quot;name&quot;, &quot;GroupD&quot;).list();
	
	3.用户管理：
		User对象
		添加用户 newUser  saveUser
		修改用户
		删除用户
		验证用户密码 checkPassWord  是用户密码，不是用户的账号密码
		用户数据查询 UserQuery对象
		设置认证用户 setAuthenticatedUserId 多线程中使用
	4.用户信息管理：
		添加和删除用户信息：
			用为ACT_ID_INFO数据结构是key-value，没有查询对象,通过id+key可以查到记录
			setUserInfo(String userId,String key,String value)
			deleteUserInfo(String userId,String key)
			示例：
				// 创建用户
				creatUser(identityService, id, &quot;angus&quot;, &quot;young&quot;, &quot;yangenxiong@163.com&quot;, &quot;abc&quot;);
				// 创建一个用户信息
				identityService.setUserInfo(id, &quot;age&quot;, &quot;30&quot;);
				// 创建第二个用户信息
				identityService.setUserInfo(id, &quot;weight&quot;, &quot;60KG&quot;);
				// 删除用户年龄信息
				identityService.deleteUserInfo(id, &quot;age&quot;);
		查询用户信息：
			getUserInfo(String userId,String key)
		设置用户图片：
			setUserPicture
			getUserPicture

			先转为byte array，再存储，图片存放再资源表中，用户信息表存的是图片在的资源表的id
				// 读取图片并转换为byte数组
				FileInputStream fis = new FileInputStream(new File(&quot;resource/artifact/picture.png&quot;));		
				BufferedImage img = ImageIO.read(fis);
				ByteArrayOutputStream output = new ByteArrayOutputStream();
				ImageIO.write(img, &quot;png&quot;, output);
				//获取图片的byte数组
				byte[] picArray = output.toByteArray();		
				// 创建Picture实例
				Picture picture = new Picture(picArray, &quot;angus image&quot;);
				// 为用户设置图片
				identityService.setUserPicture(id, picture);	
	5.用户组和用户的关系：
		多对多，中间表ACT_ID_MEMBERSHIP

		绑定关系：
			// 绑定关系
			identityService.createMembership(user.getId(), group.getId());
		接触绑定：
			// 删除绑定关系
			identityService.deleteMembership(user.getId(), group.getId());
		查询用户组下的用户：
			使用用户的查询对象  memberOfGroup(group.getId())
				List&lt;User&gt; users = identityService.createUserQuery()
				.memberOfGroup(group.getId()).list();
		查询用户所属的用户组：
			使用用户组的查询对象 groupMenber(user.getId())
				List&lt;Group&gt; groups = identityService.createGroupQuery()
						.groupMember(user.getId()).list();
	
第七章 流程存储
	RepositoryService 主要对Activiti中的流程存储的相关数据进行操作，这些操作包括对流程存储数据的管理、
		流程部署以及对流程的基本操作等。
	1.流程文件部署：
		RepositoryService负责对流程文件的部署以及流程定义的管理
		
		1.Deployment对象：
			只提供getter方法
		2.DeploymentBuilder对象：
			DeploymentBuilder builder = repositoryService.createDeployment();
		3.添加输入流资源：
			builder.addInputStream(&quot;inputa&quot;,a)
				// 第一个资源输入流
				InputStream is1 = new FileInputStream(new File(
						&quot;resource/artifact/flow_inputstream1.png&quot;));
				// 第二个资源输入流
				InputStream is2 = new FileInputStream(new File(
						&quot;resource/artifact/flow_inputstream1.png&quot;));
				// 创建DeploymentBuilder实例
				DeploymentBuilder builder = repositoryService.createDeployment();
				// 为DeploymentBuilder添加资源输入流
				builder.addInputStream(&quot;inputA&quot;, is1);
				builder.addInputStream(&quot;inputB&quot;, is2);
				// 执行部署方法
				builder.deploy();

		4.添加classpath资源：
			builder.addClasspathResource(&quot;artifact/classpath.png&quot;)
				//添加classpath下的资源
				builder.addClasspathResource(&quot;artifact/classpath.png&quot;);
				//执行部署（写入到数据库中）
				builder.deploy();
		5.添加字符串资源：
			//添加String资源
			builder.addString(&quot;test&quot;, &quot;this is string method&quot;);
			//执行部署（写入到数据库中）
			builder.deploy();
		6.添加压缩包资源：
			//获取zip文件的输入流
			FileInputStream fis = new FileInputStream(new File(&quot;resource/artifact/ZipInputStream.zip&quot;));
			//读取zip文件，创建ZipInputStream对象
			ZipInputStream zi = new ZipInputStream(fis);
			//添加Zip压缩包资源
			builder.addZipInputStream(zi);
			//执行部署（写入到数据库中）
			builder.deploy();
		7.添加BPMN模型资源：
			addBpmnModel 
			addBytes
		8.修改部署信息：
			//设置各个属性
			builder.name(&quot;crazyit&quot;).tenantId(&quot;tenanId&quot;).key(&quot;myKey&quot;).category(&quot;myCategory&quot;);
		9.过滤重复部署：
			重复部署不再写入数据库，若不同，添加方法后，仍会修改数据库
			builderB.enableDuplicateFiltering();
		10.取消部署时的验证：
			默认情况下，在部署时会对流程的XML文件进行验证，包括验证是否符合BPMN规范、定义的流程是否可执行。
				builderB.addClasspathResource(&quot;bpmn/bpmnError.bpmn&quot;)
				.disableBpmnValidation().deploy();
	2.流程定义的管理：
		中止流程定义、激活流程定义和设置流程权限
		
		1.ProcessDefinition对象：
			有很多getter方法
		2.流程部署：
			将流程的描述文件写入数据库
		3.流程图部署：
		4.流程图自动生成：
			不自动生成 ，在配置文件中加&lt;property name=&quot;createDiagramOnDeploy&quot; value=&quot;false&quot; /&gt;
		5.中止与激活流程定义：
		6.流程定义缓存配置：
		7.自定义缓存
			自定义Java类，维护map
	3.流程定义的权限：
		activiti没有拦截检查，完全由开发者定义用户权限，然后根据表来查询
		1.设置流程定义的用户权限：
			repositoryService.addCandidateStarterUser(def.getId(), &quot;user1&quot;);
		2.设置流程定义的用户权限：
			repositoryService.addCandidateStarterGroup(def.getId(), &quot;group1&quot;);
		3.IdentityLink对象：
			对应表 ACT_RU_IDENTITYLINK
		4.查询权限数据：
			// 根据用户查询用权限的流程定义
			List&lt;ProcessDefinition&gt; defs = repositoryService
					.createProcessDefinitionQuery().startableByUser(&quot;user1&quot;).list();

			// 根据流程定义查询用户组数据
			List&lt;Group&gt; groups = identityService.createGroupQuery()
					.potentialStarter(def.getId()).list();
			
			// 根据流程定义查询用户数据
			List&lt;User&gt; users = identityService.createUserQuery()
					.potentialStarter(def.getId()).list();
			
			// 根据流程定义查询全部的 IdentityLink（ACT_RU_IDENTITYLINK表） 数据
			List&lt;IdentityLink&gt; links = repositoryService
					.getIdentityLinksForProcessDefinition(def.getId());	
	4.RepositoryService数据查询与删除：
		1.查询部署资源
			// 查询资源文件
			InputStream is = repositoryService.getResourceAsStream(dep.getId(), 
				&quot;artifact/GetResource.txt&quot;);
			// 读取输入流
			int count = is.available();
			byte[] contents = new byte[count];
			is.read(contents);
			String result = new String(contents);
		2.查询流程文件
		3.查询流程图
		4.查询部署的资源名称
		5.删除部署资源
		6.DeploymentQuery对象
		7.ProcessDefinitionQuery对象

第八章 流程任务管理
	1.任务的创建和删除：
		1.Task接口：
			ACT_RU_TASK
		2.创建与保存Task实例：
			newTask
			saveTask
		3.删除任务：
			多个删除方法
	2.任务权限：
		1.设置候选用户组
		2.设置候选用户
		3.权限数据查询
			用户组和用户的Query对象没有提供根据任务ID查询用户组和用户的方法
		4.设置任务持有人：
			setOwner
		5.设置任务代理人
			setAssignee
		6.添加任务权限数据
		7.删除用户组权限
		8.删除用户权限
	3.任务参数：
		参数类型分为流程参数和任务参数
		1.基本类型参数设置：
			setVariable
		2.序列化参数：
			对象必须实现序列化接口
		3.获取参数
			getVariable(taskId,argName)
		4.参数作用域：
			setVariableLocal 局部参数
			getVariableLocal 
		5.设置多个参数：
			setVariables
			setVariablesLocal	
				//初始化参数
				Map&lt;String,Object&gt; vars = new HashMap&lt;String, Object&gt;();
				vars.put(&quot;days&quot;, 10);
				vars.put(&quot;target&quot;, &quot;欧洲&quot;);
				taskService.setVariables(task1.getId(), vars);
			或使用序列化对象
		6.数据对象：
			BPMN文件中的dataObject元素
				Map&lt;String, DataObject&gt; objs = taskService.getDataObjects(task.getId());
	
	4.任务附件管理：
		1.Attachment对象：
		2.创建任务附件：
			// 设置任务附件
			taskService.createAttachment(&quot;web url&quot;, task.getId(), pi.getId(), &quot;163.com&quot;, 
					&quot;163 web page&quot;, &quot;http://www.163.com&quot;);
			// 创建图片输入流
			InputStream is = new FileInputStream(new File(&quot;resource/artifact/result.png&quot;));
			// 设置输入流为任务附件
			taskService.createAttachment(&quot;web url&quot;, task.getId(), pi.getId(), &quot;163.com&quot;, 
					&quot;163 web page&quot;, is);
		3.附件查询：
		4.删除附件
	5.任务评论和事件记录：
		1.Comment对象:
		2.新增任务评论
			addComment
		3.事件的记录
		4.数据查询
	6.任务声明与完成：
		1.任务声明：
			claim
		2.任务完成：
			complete

第九章 流程控制
	TaskService主要用于任务管理，包括任务操作、任务数据管理等
	IdentityService主要用于管理流程的身份数据
	RepositoryService主要管理流程部署的数据
	RuntimeService主要用于管理流程在运行时产生的数据，以及对流程进行操作的API

	流程运行时产生的数据包括流程参数、事件、流程 实例及执行流等
	流程的操作包括启动流程，流程前进等

	1.流程实例与执行流：
		1.流程实例与执行流的概念：
			启动一个流程时，会创建一个流程实例，每个流程实例至少有一个执行流
		2.流程实例和执行流对象 ProcessInstance Execution
	2.启动流程:
		RuntimeService提供流程启动的多个方法，命名均为startProcessInstanceByXXX
			XXX可以是流程定义的ID、Key【流程描述文件中process的id属性】和message
		1.startProcessInstanceById方法：
		2.startProcessInstanceByKey方法
		3.startProcessInstanceByMessage方法
			消息事件
	3.流程参数：
		1.设置与查询流程参数：
			设置需要传入执行流的ID
			查询需要传入执行流的ID和参数名称
			setViriable
		2.流程参数的作用域：
			局部只作用域执行流
			setViriableLocal
		3.其他设置参数的方法：
			setViriables
			setViriablesLocal
	4.流程操作：
		启动流程、发送信号、中断流程、激活流程
		1.流程触发：
			对于receiveTask等流程节点，使用trigger方法进行触发，使流程往前进行
		2.触发信号事件：
			事件节点是在流程中记录事件发生的流程元素，BPMN2 规范中主要有两种类型的事件：
				捕获事件Catching 需要信号才能前进 
					// 发送信号给事件，流程结束
					runtimeService.signalEventReceived(&quot;testSignal&quot;);
				抛出事件Throwing
		3.触发消息事件：
			消息事件节点
				// 触发消息事件
				runtimeService.messageEventReceived(&quot;testMsg&quot;, exe.getId());
		4.中断和激活流程：
			SUSPENSION_STATE_字段保存中断状态，1为活跃，2为中断
				runtimeService.suspendProcessInstanceById(pi.getId());
				runtimeService.activateProcessInstanceById(pi.getId());
		5.删除流程：
			runtimeService.deleteProcessInstance(pi.getId(), &quot;abc&quot;);
	5.流程数据查询：
		1.执行流查询：
		2.流程实例查询
			
第十章 历史数据管理和流程引擎管理
	历史数据：
		activiti删除的流程定义、流程任务和流程实例的数据
		已经完成的流程实例以及相关数据
	ManagementService可以查询引擎数据库信息、工作信息，直接对数据库操作
	
	1.历史数据管理：
		1.历史流程实例查询：
			historyService.createHistoricProcessInstanceQuery()
		2.历史任务查询：
			historyService.createHistoricTaskInstanceQuery()
		3.历史行为查询：
			historyService.createHistoricActivityInstanceQuery()
		4.历史流程明细查询：
			流程的明细信息包括流程参数和流程表单属性
				默认情况下，Activiti不会记录明细，当history配置为full级别时，才会记录
		5.删除历史流程实例和历史任务：
			historyService.deleteHistoricProcessInstance(pi1.getId());
			级联删除实例
	2.工作的产生：
		异步工作时，用工作表保存任务
			一般的工作 ACT_RU_JOB
			定时中断任务 ACT_RU_SUSPENDED_JOB
			定时任务 ACT_RU_TIMER_JOB
		1.异步任务产生的工作：
			Java Service Task主要用于在任务中调用外部的Java 类
		2.定义中间事件产生的工作：
			定义了定时器相关的节点，会在某个定义的时间点上执行。
			可以加入定时器的节点：
				中间事件节点、流程开始事件节点和边界事件节点
		3.定义边界事件产生的工作：
		4.定时开始事件产生的工作
		5.流程抛出事件产生的工作
		6.暂停工作的产生
		7.无法执行的工作
	3.工作管理：
		ManagementService提供工作查询对象（对象返回job实例）
		1.工作查询对象：	
			4个：
				JobQuery
				TimerJobQuery
				SuspendedJobQuery
				DeadLetterJobQuery
		2.获取工作异常信息：
			getXXXJobExceptionStacktrace
		3.转移与删除工作：
			move
			delete
	4.数据库管理：
		1.查询引擎属性
		2.数据表信息查询
		3.数据库操作
		4.数据表查询
	
第十一章 流程事件
	要点：
		BPMN的事件分类
		各种流程的事件定义
		开始事件的应用
		结束事件的应用
		边界事件的应用
		中间事件的应用
	
	1.事件分类：
		1.按照事件的位置分类：
			开始事件：表示流程开始的事件
			结束事件：表示流程结束的事件
			中间事件：出现在流程中，单独作为流程节点的事件
			边界事件：附属于某个流程节点（如子流程，流程任务）的事件
		2.按照事件的特性分类：
			Catching事件
			Throwing事件
				开始事件是Catching
				结束事件是throwing
				边界时catching
				中间 都有
	2.事件定义：
		与事件结合
	3.开始事件：
		无指定开始事件
		定时器开始事件
		消息开始事件
		错误开始事件
	4.结束事件：
		无指定结束事件
		错误结束事件
		取消结束事件
		中止结束事件
	5.边界事件
		定时器
		信号
		错误
		取消
	6.中间事件
		定时器  捕获
		信号 捕获 抛出
		消息 抛出	
	7.补偿事件
		补偿边界
			事务子流程取消触发
			补偿中间触发
		补偿中间

第十二章 流程任务
	BPMN任务概述
	用户任务的应用
	指定服务任务的行为
	WebService任务的应用
	脚本任务的应用
	任务监听器的使用
	流程监听器的使用

	1.用户任务：
		1.分配任务候选人
			&lt;userTask id=&quot;usertask1&quot; name=&quot;Task1&quot;&gt;
				&lt;potentialOwner&gt;
					&lt;resourceAssignmentExpression&gt;
						&lt;formalExpression&gt;user(angus), group(management), boss
						&lt;/formalExpression&gt;
					&lt;/resourceAssignmentExpression&gt;
				&lt;/potentialOwner&gt;
			&lt;/userTask&gt;
		2.分配任务代理人
			&lt;userTask id=&quot;usertask1&quot; name=&quot;Task 1&quot;&gt;
				&lt;humanPerformer&gt;
					&lt;resourceAssignmentExpression&gt;
						&lt;formalExpression&gt;user1&lt;/formalExpression&gt;
					&lt;/resourceAssignmentExpression&gt;
				&lt;/humanPerformer&gt;
			&lt;/userTask&gt;
		3.权限分配扩展
			使用activiti扩展来分配任务的候选人和代理人
				&lt;userTask id=&quot;usertask1&quot; name=&quot;Assignee&quot; activiti:assignee=&quot;user1&quot;&gt;&lt;/userTask&gt;
				&lt;userTask id=&quot;usertask2&quot; name=&quot;Candidate User&quot;
					activiti:candidateUsers=&quot;user1, user2&quot;&gt;&lt;/userTask&gt;
				&lt;userTask id=&quot;usertask3&quot; name=&quot;Candidate Group&quot;
					activiti:candidateGroups=&quot;group1,group2&quot;&gt;&lt;/userTask&gt;
		4.使用任务监听器进行权限分配
			设置监听类
				public class UserTaskListener implements TaskListener {

					public void notify(DelegateTask delegateTask) {
						System.out.println(&quot;使用任务监听器设置任务权限&quot;);
						delegateTask.setAssignee(&quot;user1&quot;);
						delegateTask.addCandidateGroup(&quot;group1&quot;);
						delegateTask.addCandidateUser(&quot;user1&quot;);		
					}
				}
			配置监听器
				&lt;userTask id=&quot;usertask1&quot; name=&quot;Assignee&quot;&gt;
					&lt;extensionElements&gt;
						&lt;activiti:taskListener event=&quot;create&quot;
							class=&quot;org.crazyit.activiti.UserTaskListener&quot;&gt;&lt;/activiti:taskListener&gt;
					&lt;/extensionElements&gt;
				&lt;/userTask&gt;
		5.使用JUEL分配权限
			
			&lt;userTask id=&quot;usertask2&quot; name=&quot;Task 1&quot; activiti:assignee=&quot;${authService.getUserAssignee()}&quot;&gt;&lt;/userTask&gt;
			&lt;userTask id=&quot;usertask3&quot; name=&quot;Task 2&quot; activiti:candidateUsers=&quot;${authService.getCandidateUsers()}&quot;&gt;&lt;/userTask&gt;
			&lt;userTask id=&quot;usertask4&quot; name=&quot;Task 3&quot; activiti:candidateGroups=&quot;${authService.getCandidateGroups()}&quot;&gt;&lt;/userTask&gt;
			&lt;userTask id=&quot;usertask5&quot; name=&quot;Task 4&quot; activiti:assignee=&quot;${authService.lastUser}&quot;&gt;&lt;/userTask&gt;
		
			服务Bean
			public class AuthService implements Serializable {
	
				private String lastUser = &quot;angus&quot;;
				
				public String getLastUser() {
					return this.lastUser;
				}
				
				public AuthService() {
					System.out.println(&quot;create AuthService&quot;);
				}

				//使用方法为任务指定代理人
				public String getUserAssignee() {
					return &quot;crazyit&quot;;
				}
				
				//使用方法为任务指定候选人
				public List&lt;String&gt; getCandidateUsers() {
					List&lt;String&gt; result = new ArrayList&lt;String&gt;();
					result.add(&quot;user1&quot;);
					result.add(&quot;user2&quot;);
					return result;
				}
				
				//使用方法为任务指定候选用户组
				public List&lt;String&gt; getCandidateGroups() {
					List&lt;String&gt; result = new ArrayList&lt;String&gt;();
					result.add(&quot;group1&quot;);
					result.add(&quot;group2&quot;);
					return result;
				}
			}

			添加流程变量
			Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();
			vars.put(&quot;authService&quot;, new AuthService());
			// 启动流程
			ProcessInstance pi = runtimeService.startProcessInstanceByKey(&quot;process1&quot;, vars);
					
	2.服务任务：
		activiti:class: JavaDelegate或ActivitiBehavior的实现类
		activiti:delegateExpression  
		activiti:expression 直接调用bean
		
		1.实现JavaDelegate
			
			public class MyJavaDelegate implements JavaDelegate, Serializable {

				public void execute(DelegateExecution execution) {
					System.out.println(&quot; 实现  JavaDelegate 的  JavaSeviceTask: &quot; + this);
				}
			}
			activiti:class方式：

				&lt;serviceTask id=&quot;servicetask1&quot; name=&quot;Service Task 1&quot;
					activiti:class=&quot;org.crazyit.activiti.MyJavaDelegate&quot;&gt;&lt;/serviceTask&gt;

			activiti:delegateExpression 方式：
				Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();
				vars.put(&quot;myDelegate&quot;, new MyJavaDelegate());
				// 启动流程
				ProcessInstance pi = runtimeService.startProcessInstanceByKey(&quot;process1&quot;, vars);

				&lt;serviceTask id=&quot;servicetask1&quot; name=&quot;Service Task&quot;
					activiti:delegateExpression=&quot;${myDelegate}&quot;&gt;&lt;/serviceTask&gt;
			
		2.使用普通的JavaBean
			调用Bean方法和属性

			Bean类：
				public class MyJavaBean implements Serializable {

					private String name = &quot;crazyit&quot;;
					
					public String getName() {
						return this.name;
					}
					
					public void print(Execution exe) {
						System.out.println(&quot;使用Java Bean的print方法：&quot; + exe.getId());
					}
				}
			
			BPMN：
				&lt;serviceTask id=&quot;servicetask1&quot; name=&quot;Service Task&quot;
					activiti:expression=&quot;${myBean.print(execution)}&quot;&gt;&lt;/serviceTask&gt;
				&lt;serviceTask id=&quot;servicetask2&quot; name=&quot;Service Task&quot;
					activiti:expression=&quot;${execution.setVariable(&#39;myName&#39;, myBean.name)}&quot;&gt;&lt;/serviceTask&gt;
			设置参数：
				Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();
				vars.put(&quot;myBean&quot;, new MyJavaBean());
				// 启动流程
				ProcessInstance pi = runtimeService.startProcessInstanceByKey(
						&quot;process1&quot;, vars);
		3.Shell任务：
			执行cmd命令
	
	3.流程与任务监听器：
		
		任务监听器taskListener  设置event  =&quot;create/complete/assignment&quot;表示用户任务创建时调用监听器
			&lt;userTask id=&quot;usertask1&quot; name=&quot;User Task&quot;&gt;
				&lt;extensionElements&gt;
					&lt;activiti:taskListener event=&quot;create&quot;
						class=&quot;org.crazyit.activiti.PropertyConfigListener&quot; /&gt;
				&lt;/extensionElements&gt;
			&lt;/userTask&gt;

			属性注入，往任务监听器中注入属性
				&lt;userTask id=&quot;usertask1&quot; name=&quot;User Task&quot;&gt;
					&lt;extensionElements&gt;
						&lt;activiti:taskListener event=&quot;create&quot;
							class=&quot;org.crazyit.activiti.PropertyInjection&quot;&gt;
							&lt;activiti:field name=&quot;userName&quot; stringValue=&quot;crazyit&quot; /&gt;
						&lt;/activiti:taskListener&gt;
					&lt;/extensionElements&gt;
				&lt;/userTask&gt;
				监听器类：
					public class PropertyInjection implements TaskListener {

						private Expression userName;
						
						public void setUserName(Expression userName) {
							this.userName = userName;
						}
						
						public void notify(DelegateTask delegateTask) {
							System.out.println(&quot;属性注入后的值：&quot; + this.userName.getValue(null));
						}
					}
		
		流程监听器：
			&lt;activiti:executionListener event=&quot;XXXXX&quot;
				class=&quot;org.crazyit.activiti.ExecutionListenerInvocation&quot;&gt;
				&lt;activiti:field name=&quot;message&quot;&gt;
					&lt;activiti:string&gt;&lt;/activiti:string&gt;
				&lt;/activiti:field&gt;
			&lt;/activiti:executionListener&gt;
			


			
			&lt;process id=&quot;process1&quot; name=&quot;process1&quot; isExecutable=&quot;true&quot;&gt;
				&lt;extensionElements&gt;
					&lt;activiti:executionListener event=&quot;end&quot;
						class=&quot;org.crazyit.activiti.ExecutionListenerInvocation&quot;&gt;
						&lt;activiti:field name=&quot;message&quot;&gt;
							&lt;activiti:string&gt;&lt;![CDATA[流程结束]]&gt;&lt;/activiti:string&gt;
						&lt;/activiti:field&gt;
					&lt;/activiti:executionListener&gt;
					&lt;activiti:executionListener event=&quot;start&quot;
						class=&quot;org.crazyit.activiti.ExecutionListenerInvocation&quot;&gt;
						&lt;activiti:field name=&quot;message&quot;&gt;
							&lt;activiti:string&gt;&lt;![CDATA[流程开始]]&gt;&lt;/activiti:string&gt;
						&lt;/activiti:field&gt;
					&lt;/activiti:executionListener&gt;
				&lt;/extensionElements&gt;
				&lt;startEvent id=&quot;startevent1&quot; name=&quot;Start&quot;&gt;&lt;/startEvent&gt;
				&lt;userTask id=&quot;usertask1&quot; name=&quot;Task 1&quot;&gt;
					&lt;extensionElements&gt;
						&lt;activiti:executionListener event=&quot;end&quot;
							class=&quot;org.crazyit.activiti.ExecutionListenerInvocation&quot;&gt;
							&lt;activiti:field name=&quot;message&quot;&gt;
								&lt;activiti:string&gt;&lt;![CDATA[用户任务结束]]&gt;&lt;/activiti:string&gt;
							&lt;/activiti:field&gt;
						&lt;/activiti:executionListener&gt;
						&lt;activiti:executionListener event=&quot;start&quot;
							class=&quot;org.crazyit.activiti.ExecutionListenerInvocation&quot;&gt;
							&lt;activiti:field name=&quot;message&quot;&gt;
								&lt;activiti:string&gt;&lt;![CDATA[用户任务开始]]&gt;&lt;/activiti:string&gt;
							&lt;/activiti:field&gt;
						&lt;/activiti:executionListener&gt;
					&lt;/extensionElements&gt;
				&lt;/userTask&gt;
				&lt;exclusiveGateway id=&quot;exclusivegateway1&quot; name=&quot;Exclusive Gateway&quot;&gt;
					&lt;extensionElements&gt;
						&lt;activiti:executionListener event=&quot;start&quot;
							class=&quot;org.crazyit.activiti.ExecutionListenerInvocation&quot;&gt;
							&lt;activiti:field name=&quot;message&quot;&gt;
								&lt;activiti:string&gt;&lt;![CDATA[网关开始]]&gt;&lt;/activiti:string&gt;
							&lt;/activiti:field&gt;
						&lt;/activiti:executionListener&gt;
					&lt;/extensionElements&gt;
				&lt;/exclusiveGateway&gt;
				&lt;intermediateThrowEvent id=&quot;signalintermediatethrowevent1&quot;
					name=&quot;SignalThrowEvent&quot;&gt;
					&lt;extensionElements&gt;
						&lt;activiti:executionListener event=&quot;end&quot;
							class=&quot;org.crazyit.activiti.ExecutionListenerInvocation&quot;&gt;
							&lt;activiti:field name=&quot;message&quot;&gt;
								&lt;activiti:string&gt;&lt;![CDATA[中间事件结束]]&gt;&lt;/activiti:string&gt;
							&lt;/activiti:field&gt;
						&lt;/activiti:executionListener&gt;
						&lt;activiti:executionListener event=&quot;start&quot;
							class=&quot;org.crazyit.activiti.ExecutionListenerInvocation&quot;&gt;
							&lt;activiti:field name=&quot;message&quot;&gt;
								&lt;activiti:string&gt;&lt;![CDATA[中间事件开始]]&gt;&lt;/activiti:string&gt;
							&lt;/activiti:field&gt;
						&lt;/activiti:executionListener&gt;
					&lt;/extensionElements&gt;
				&lt;/intermediateThrowEvent&gt;
				&lt;endEvent id=&quot;endevent1&quot; name=&quot;End&quot;&gt;&lt;/endEvent&gt;
				&lt;sequenceFlow id=&quot;flow1&quot; sourceRef=&quot;startevent1&quot;
					targetRef=&quot;exclusivegateway1&quot;&gt;
					&lt;extensionElements&gt;
						&lt;activiti:executionListener 
							class=&quot;org.crazyit.activiti.ExecutionListenerInvocation&quot;&gt;
							&lt;activiti:field name=&quot;message&quot; stringValue=&quot;从开始事件到网关的顺序流&quot;/&gt;
						&lt;/activiti:executionListener&gt;
					&lt;/extensionElements&gt;	
				&lt;/sequenceFlow&gt;
				&lt;sequenceFlow id=&quot;flow3&quot; sourceRef=&quot;usertask1&quot;
					targetRef=&quot;signalintermediatethrowevent1&quot;&gt;&lt;/sequenceFlow&gt;
				&lt;sequenceFlow id=&quot;flow4&quot; sourceRef=&quot;signalintermediatethrowevent1&quot;
					targetRef=&quot;endevent1&quot;&gt;&lt;/sequenceFlow&gt;
				&lt;sequenceFlow id=&quot;flow5&quot; sourceRef=&quot;exclusivegateway1&quot;
					targetRef=&quot;usertask1&quot;&gt;&lt;/sequenceFlow&gt;
			&lt;/process&gt;
				
第十三章 其他流程元素	
	1.子流程：
		1.嵌入式子流程
			&lt;subProcess id=&quot;subprocess1&quot; name=&quot;Sub Process&quot;&gt;
				&lt;startEvent id=&quot;startevent2&quot; name=&quot;Start&quot;&gt;&lt;/startEvent&gt;
				&lt;serviceTask id=&quot;usertask2&quot; name=&quot;Sub Task&quot;
					activiti:class=&quot;org.crazyit.activiti.EmbededJavaDelegate&quot;&gt;&lt;/serviceTask&gt;
				&lt;endEvent id=&quot;endevent1&quot; name=&quot;End&quot;&gt;&lt;/endEvent&gt;
				&lt;sequenceFlow id=&quot;flow3&quot; sourceRef=&quot;startevent2&quot;
					targetRef=&quot;usertask2&quot;&gt;&lt;/sequenceFlow&gt;
				&lt;sequenceFlow id=&quot;flow4&quot; sourceRef=&quot;usertask2&quot;
					targetRef=&quot;endevent1&quot;&gt;&lt;/sequenceFlow&gt;
			&lt;/subProcess&gt;
		
		
		
		2.调用式子流程

			&lt;callActivity id=&quot;subprocess1&quot; name=&quot;人事、总监子流程&quot; calledElement=&quot;SubProcess&quot;&gt;
				&lt;extensionElements&gt;
					&lt;activiti:in source=&quot;days&quot; target=&quot;newDays&quot;&gt;&lt;/activiti:in&gt;
					&lt;activiti:out source=&quot;myDays&quot; target=&quot;resultDays&quot;&gt;&lt;/activiti:out&gt;
				&lt;/extensionElements&gt;
			&lt;/callActivity&gt;
			
			// 部署流程文件
			repositoryService
					.createDeployment()
					.addClasspathResource(
							&quot;bpmn/CallActivityVariable.bpmn&quot;)
					.addClasspathResource(&quot;bpmn/SubProcess.bpmn&quot;)
					.deploy();		

		3.事件子流程
		4.事务子流程
		5.特别子流程
			bpmn不指定子流程的执行顺序,实际运行时指定运行顺序
			&lt;adHocSubProcess id=&quot;adhocSubProcess&quot; ordering=&quot;Sequential&quot;&gt;
				&lt;userTask id=&quot;subProcessTask&quot; name=&quot;Task in subprocess&quot; /&gt;
				&lt;userTask id=&quot;subProcessTask2&quot; name=&quot;Task2 in subprocess&quot; /&gt;
			&lt;/adHocSubProcess&gt;
			
			// 查询子流程的执行流
			Execution exe = runtimeService.createExecutionQuery()
					.processInstanceId(pi.getId()).activityId(&quot;adhocSubProcess&quot;)
					.singleResult();
			// 让执行流到达第二个任务
			runtimeService.executeActivityInAdhocSubProcess(exe.getId(),
					&quot;subProcessTask2&quot;);	
			
			// 完成第二个任务
			Task subProcessTask2 = taskService.createTaskQuery()
					.processInstanceId(pi.getId())
					.taskDefinitionKey(&quot;subProcessTask2&quot;).singleResult();
			taskService.complete(subProcessTask2.getId());

			// 完成特别子流程✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓
			//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓
			runtimeService.completeAdhocSubProcess(exe.getId());
			//✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓✓
		
	2.顺序流与网关：
		顺序流：
			条件顺序流
				&lt;sequenceFlow id=&quot;flow4&quot; name=&quot;小于等于5天&quot; sourceRef=&quot;exclusivegateway1&quot;
					targetRef=&quot;usertask2&quot;&gt;
					&lt;conditionExpression xsi:type=&quot;tFormalExpression&quot;&gt;
					&lt;![CDATA[
					${days &lt;= 5}
					]]&gt;
					&lt;/conditionExpression&gt;
				&lt;/sequenceFlow&gt;
				&lt;sequenceFlow id=&quot;flow5&quot; name=&quot;大于5天&quot; sourceRef=&quot;exclusivegateway1&quot;
					targetRef=&quot;usertask3&quot;&gt;
					&lt;conditionExpression xsi:type=&quot;tFormalExpression&quot;&gt;
					&lt;![CDATA[
					${days &gt; 5}
					]]&gt;
					&lt;/conditionExpression&gt;
				&lt;/sequenceFlow&gt;

				执行示例：
				Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();
				vars.put(&quot;days&quot;, 6);
				ProcessInstance pi = runtimeService.startProcessInstanceByKey(
				&quot;process1&quot;, vars);
			默认顺序流
				&lt;userTask id=&quot;usertask1&quot; name=&quot;填写请假申请&quot; default=&quot;flow1&quot;&gt;&lt;/userTask&gt;
				
				&lt;sequenceFlow id=&quot;flow1&quot; sourceRef=&quot;usertask1&quot; targetRef=&quot;usertask2&quot;&gt;&lt;/sequenceFlow&gt;

				&lt;sequenceFlow id=&quot;flow2&quot; sourceRef=&quot;usertask1&quot; targetRef=&quot;usertask3&quot;&gt;
					&lt;conditionExpression xsi:type=&quot;tFormalExpression&quot;&gt;&lt;![CDATA[
					${days &gt; 5}
					]]&gt;&lt;/conditionExpression&gt;
				&lt;/sequenceFlow&gt;
				
		流程网关：
			单向网关
			并行网关
			兼容网关
			事件网关
			组合网关（Activiti不支持）

			单向网关
			并行网关：
				分叉 合并
			兼容网关：
				单向网关和并行网关结合
			事件网关：
				哪个事件先触发，就转向哪一个执行流
				事件网关只会选择最先触发的事件所在的分支向前执行
	
	3.流程活动的特性：
		1.多实例活动
			&lt;multiInstanceLoopCharacteristics
				isSequential=&quot;true&quot;&gt;
				&lt;loopCardinality&gt;2&lt;/loopCardinality&gt;
			&lt;/multiInstanceLoopCharacteristics&gt;
		2.设置循环数据
			&lt;multiInstanceLoopCharacteristics
				isSequential=&quot;false&quot; activiti:collection=&quot;datas1&quot;&gt;
			&lt;/multiInstanceLoopCharacteristics&gt;
			
			List&lt;String&gt; datas1 = new ArrayList&lt;String&gt;();
			datas1.add(&quot;a&quot;);
			datas1.add(&quot;b&quot;);
			Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();
			vars.put(&quot;datas1&quot;, datas1);
			ProcessInstance pi = runtimeService.startProcessInstanceByKey(
				&quot;process1&quot;, vars);
		3.获取循环元素
			&lt;multiInstanceLoopCharacteristics
				isSequential=&quot;true&quot; activiti:collection=&quot;datas1&quot;
				activiti:elementVariable=&quot;data&quot;&gt;
			&lt;/multiInstanceLoopCharacteristics&gt;

			public class ServiceB implements JavaDelegate {

				public void execute(DelegateExecution execution) {
				
					System.out.println(&quot;获取循环参数：&quot; + execution.getVariable(&quot;data&quot;));
				}
			}
		4.循环的内置参数
			nrOfInstances:实例总数
			nrOfActiveInstances:当前正在执行的实例总数	
			nrOfCompletedInstances:已经完成的实例总数
			loopCounter:当前循环的索引
		5.循环结束条件
			&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt;
			
			&lt;multiInstanceLoopCharacteristics
				isSequential=&quot;true&quot; activiti:collection=&quot;${datas}&quot;
				activiti:elementVariable=&quot;data&quot;&gt;
				&lt;completionCondition&gt;${nrOfCompletedInstances &gt;= 2}&lt;/completionCondition&gt;
			&lt;/multiInstanceLoopCharacteristics&gt;

第十四章 Activiti与规则引擎			
	1.Drools介绍与运行
		代码与业务规则分离
	2.规则语法
		全局变量
		函数
		规则属性
			activation-group 激活组，组内只有一个规则会被激活
			salience 优先级
		条件语法
			when then
		行为语法
			修改事实对象
			insert
			update
	3.Activiti整合Drools
		&lt;property name=&quot;customPostDeployers&quot;&gt;
			&lt;list&gt;
				&lt;bean class=&quot;org.activiti.engine.impl.rules.RulesDeployer&quot; /&gt;
			&lt;/list&gt;
		&lt;/property&gt;	
		
		&lt;businessRuleTask id=&quot;businessruletask1&quot; name=&quot;匹配销售规则&quot; 
			activiti:ruleVariablesInput=&quot;${member}&quot; 
			activiti:resultVariable=&quot;members&quot;&gt; &lt;/businessRuleTask&gt;

第十五章 基于DMN的Activiti规则引擎
	1.DMN规范
	2.规则引擎使用
	3.MVEL表达式

第十六章 整合第三方框架
	
	引擎，各种服务，都可以直接注入

第十七章 Rest
	
第十八章 
	表单
	流程图与XML的转换
	回退
	会签
	



		
		
		

	
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: dongzhaohe@inspur.com">dongzhaohe</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">昵称</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">邮箱</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">网址</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="请留言。(填写邮箱可在被回复时收到邮件提醒)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>预览:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="表情" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="表情包"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="上传图片"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="预览"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if-->  字</div><button type="button" class="wl-btn">登录</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->提交<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="搜索表情包"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> 评论</div><ul class="wl-sort"><!--[--><li class="active">按正序</li><li class="">按倒序</li><li class="">按热度</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.5</div></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">默认页脚</div><div class="vp-copyright">Copyright © 2023 Alooc</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-a2c721dc.js" defer></script>
  </body>
</html>
